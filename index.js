(()=>{var C={};(function(e){"use strict";e["Control.Alt"]=e["Control.Alt"]||{};var n=e["Control.Alt"],t=function(r){return r.alt};n.alt=t})(C);(function(e){"use strict";e.arrayApply=function(n){return function(t){for(var r=n.length,i=t.length,o=new Array(r*i),l=0,c=0;c<r;c++)for(var v=n[c],s=0;s<i;s++)o[l++]=v(t[s]);return o}}})(C["Control.Apply"]=C["Control.Apply"]||{});(function(e){"use strict";e["Control.Semigroupoid"]=e["Control.Semigroupoid"]||{};var n=e["Control.Semigroupoid"],t={compose:function(i){return function(o){return function(l){return i(o(l))}}}},r=function(i){return i.compose};n.compose=r,n.semigroupoidFn=t})(C);(function(e){"use strict";e["Control.Category"]=e["Control.Category"]||{};var n=e["Control.Category"],t=e["Control.Semigroupoid"],r=function(o){return o.identity},i={identity:function(o){return o},Semigroupoid0:function(){return t.semigroupoidFn}};n.identity=r,n.categoryFn=i})(C);(function(e){"use strict";e["Data.Function"]=e["Data.Function"]||{};var n=e["Data.Function"],t=function(c){return function(v){return function(s){return function(d){return c(v(s))(v(d))}}}},r=function(c){return function(v){return function(s){return c(s)(v)}}},i=function(c){return function(v){return c}},o=function(c){return function(v){return v(c)}},l=function(c){return function(v){return c(v)}};n.flip=r,n.const=i,n.apply=l,n.applyFlipped=o,n.on=t})(C);(function(e){"use strict";e.arrayMap=function(n){return function(t){for(var r=t.length,i=new Array(r),o=0;o<r;o++)i[o]=n(t[o]);return i}}})(C["Data.Functor"]=C["Data.Functor"]||{});(function(e){"use strict";e.unit={}})(C["Data.Unit"]=C["Data.Unit"]||{});(function(e){"use strict";e["Data.Unit"]=e["Data.Unit"]||{};var n=e["Data.Unit"],t=e["Data.Unit"];n.unit=t.unit})(C);(function(e){"use strict";e["Data.Functor"]=e["Data.Functor"]||{};var n=e["Data.Functor"],t=e["Data.Functor"],r=e["Control.Semigroupoid"],i=e["Data.Function"],o=e["Data.Unit"],l=function(m){return m.map},c=function(m){return function(x){return function(D){return l(m)(D)(x)}}},v=function(m){return l(m)(i.const(o.unit))},s=function(m){return function(x){return function(D){return l(m)(i.const(D))(x)}}},d=function(m){return function(x){return l(m)(i.const(x))}},h={map:r.compose(r.semigroupoidFn)},p={map:t.arrayMap};n.map=l,n.mapFlipped=c,n.void=v,n.voidRight=d,n.voidLeft=s,n.functorFn=h,n.functorArray=p})(C);(function(e){"use strict";e["Control.Apply"]=e["Control.Apply"]||{};var n=e["Control.Apply"],t=e["Control.Apply"],r=e["Control.Category"],i=e["Data.Function"],o=e["Data.Functor"],l={apply:t.arrayApply,Functor0:function(){return o.functorArray}},c=function(d){return d.apply},v=function(d){return function(h){return function(p){return c(d)(o.map(d.Functor0())(i.const(r.identity(r.categoryFn)))(h))(p)}}},s=function(d){return function(h){return function(p){return function(m){return c(d)(o.map(d.Functor0())(h)(p))(m)}}}};n.apply=c,n.applySecond=v,n.lift2=s,n.applyArray=l})(C);(function(e){"use strict";e["Control.Applicative"]=e["Control.Applicative"]||{};var n=e["Control.Applicative"],t=e["Control.Apply"],r=e["Data.Unit"],i=function(v){return v.pure},o=function(v){return function(s){return function(d){if(s)return d;if(!s)return i(v)(r.unit);throw new Error("Failed pattern match at Control.Applicative (line 61, column 1 - line 61, column 63): "+[s.constructor.name,d.constructor.name])}}},l=function(v){return function(s){return function(d){return t.apply(v.Apply0())(i(v)(s))(d)}}},c={pure:function(v){return[v]},Apply0:function(){return t.applyArray}};n.pure=i,n.liftA1=l,n.when=o,n.applicativeArray=c})(C);(function(e){"use strict";e.arrayBind=function(n){return function(t){for(var r=[],i=0,o=n.length;i<o;i++)Array.prototype.push.apply(r,t(n[i]));return r}}})(C["Control.Bind"]=C["Control.Bind"]||{});(function(e){"use strict";e["Control.Bind"]=e["Control.Bind"]||{};var n=e["Control.Bind"],t=e["Control.Bind"],r=e["Control.Apply"],i=e["Control.Category"],o=e["Data.Function"],l=function(m){return m.discard},c={bind:t.arrayBind,Apply0:function(){return r.applyArray}},v=function(m){return m.bind},s=function(m){return o.flip(v(m))},d=function(m){return function(x){return function(D){return function(b){return v(m)(x(b))(D)}}}},h={discard:function(m){return v(m)}},p=function(m){return function(x){return v(m)(x)(i.identity(i.categoryFn))}};n.bind=v,n.bindFlipped=s,n.discard=l,n.join=p,n.composeKleisli=d,n.bindArray=c,n.discardUnit=h})(C);(function(e){"use strict";e["Control.Monad"]=e["Control.Monad"]||{};var n=e["Control.Monad"],t=e["Control.Applicative"],r=e["Control.Bind"],i=function(o){return function(l){return function(c){return r.bind(o.Bind1())(l)(function(v){return r.bind(o.Bind1())(c)(function(s){return t.pure(o.Applicative0())(v(s))})})}}};n.ap=i})(C);(function(e){"use strict";e["Data.Maybe"]=e["Data.Maybe"]||{};var n=e["Data.Maybe"],t=e["Control.Category"],r=e["Data.Functor"],i=function(){function b(){}return b.value=new b,b}(),o=function(){function b(g){this.value0=g}return b.create=function(g){return new b(g)},b}(),l=function(b){return function(g){return function(E){if(E instanceof i)return b;if(E instanceof o)return g(E.value0);throw new Error("Failed pattern match at Data.Maybe (line 230, column 1 - line 230, column 51): "+[b.constructor.name,g.constructor.name,E.constructor.name])}}},c={map:function(b){return function(g){return g instanceof o?new o(b(g.value0)):i.value}}},v=function(b){return l(b)(t.identity(t.categoryFn))},s=function(b){return function(g){if(g instanceof o)return g.value0;throw new Error("Failed pattern match at Data.Maybe (line 281, column 1 - line 281, column 46): "+[g.constructor.name])}},d={apply:function(b){return function(g){if(b instanceof o)return r.map(c)(b.value0)(g);if(b instanceof i)return i.value;throw new Error("Failed pattern match at Data.Maybe (line 68, column 1 - line 70, column 30): "+[b.constructor.name,g.constructor.name])}},Functor0:function(){return c}},h={bind:function(b){return function(g){if(b instanceof o)return g(b.value0);if(b instanceof i)return i.value;throw new Error("Failed pattern match at Data.Maybe (line 126, column 1 - line 128, column 28): "+[b.constructor.name,g.constructor.name])}},Apply0:function(){return d}},p={pure:o.create,Apply0:function(){return d}},m={alt:function(b){return function(g){return b instanceof i?g:b}},Functor0:function(){return c}},x={empty:i.value,Alt0:function(){return m}},D={Applicative0:function(){return p},Plus1:function(){return x}};n.Nothing=i,n.Just=o,n.maybe=l,n.fromMaybe=v,n.fromJust=s,n.functorMaybe=c,n.applicativeMaybe=p,n.alternativeMaybe=D,n.bindMaybe=h})(C);(function(e){"use strict";e["Data.Either"]=e["Data.Either"]||{};var n=e["Data.Either"],t=e["Data.Function"],r=e["Data.Maybe"],i=function(){function s(d){this.value0=d}return s.create=function(d){return new s(d)},s}(),o=function(){function s(d){this.value0=d}return s.create=function(d){return new s(d)},s}(),l={map:function(s){return function(d){if(d instanceof i)return new i(d.value0);if(d instanceof o)return new o(s(d.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[d.constructor.name])}}},c=function(s){return function(d){return function(h){if(h instanceof i)return s(h.value0);if(h instanceof o)return d(h.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[s.constructor.name,d.constructor.name,h.constructor.name])}}},v=c(t.const(r.Nothing.value))(r.Just.create);n.Left=i,n.Right=o,n.either=c,n.hush=v,n.functorEither=l})(C);(function(e){"use strict";e.pureE=function(n){return function(){return n}},e.bindE=function(n){return function(t){return function(){return t(n())()}}},e.foreachE=function(n){return function(t){return function(){for(var r=0,i=n.length;r<i;r++)t(n[r])()}}}})(C.Effect=C.Effect||{});(function(e){"use strict";e.concatArray=function(n){return function(t){return n.length===0?t:t.length===0?n:n.concat(t)}}})(C["Data.Semigroup"]=C["Data.Semigroup"]||{});(function(e){"use strict";e["Data.Semigroup"]=e["Data.Semigroup"]||{};var n=e["Data.Semigroup"],t=e["Data.Semigroup"],r=e["Data.Unit"],i={append:function(v){return function(s){return r.unit}}},o={append:t.concatArray},l=function(v){return v.append},c=function(v){return{append:function(s){return function(d){return function(h){return l(v)(s(h))(d(h))}}}}};n.append=l,n.semigroupUnit=i,n.semigroupFn=c,n.semigroupArray=o})(C);(function(e){"use strict";e["Data.Monoid"]=e["Data.Monoid"]||{};var n=e["Data.Monoid"],t=e["Data.Semigroup"],r=e["Data.Unit"],i={mempty:r.unit,Semigroup0:function(){return t.semigroupUnit}},o=function(c){return c.mempty},l=function(c){return{mempty:function(v){return o(c)},Semigroup0:function(){return t.semigroupFn(c.Semigroup0())}}};n.mempty=o,n.monoidUnit=i,n.monoidFn=l})(C);(function(e){"use strict";e.Effect=e.Effect||{};var n=e.Effect,t=e.Effect,r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Monad"],l=e["Data.Monoid"],c=e["Data.Semigroup"],v={Applicative0:function(){return h},Bind1:function(){return s}},s={bind:t.bindE,Apply0:function(){return d}},d={apply:o.ap(v),Functor0:function(){return p}},h={pure:t.pureE,Apply0:function(){return d}},p={map:r.liftA1(h)},m=function(D){return{append:i.lift2(d)(c.append(D))}},x=function(D){return{mempty:t.pureE(l.mempty(D)),Semigroup0:function(){return m(D.Semigroup0())}}};n.functorEffect=p,n.applyEffect=d,n.applicativeEffect=h,n.bindEffect=s,n.monadEffect=v,n.monoidEffect=x,n.foreachE=t.foreachE})(C);(function(e){"use strict";e.error=function(n){return new Error(n)},e.throwException=function(n){return function(){throw n}},e.catchException=function(n){return function(t){return function(){try{return t()}catch(r){return r instanceof Error||Object.prototype.toString.call(r)==="[object Error]"?n(r)():n(new Error(r.toString()))()}}}}})(C["Effect.Exception"]=C["Effect.Exception"]||{});(function(e){"use strict";e["Effect.Exception"]=e["Effect.Exception"]||{};var n=e["Effect.Exception"],t=e["Effect.Exception"];n.error=t.error,n.throwException=t.throwException,n.catchException=t.catchException})(C);(function(e){"use strict";e["Control.Monad.Error.Class"]=e["Control.Monad.Error.Class"]||{};var n=e["Control.Monad.Error.Class"],t=e["Control.Applicative"],r=e["Data.Either"],i=e["Data.Function"],o=e["Data.Functor"],l=e.Effect,c=e["Effect.Exception"],v=function(m){return m.throwError},s={throwError:c.throwException,Monad0:function(){return l.monadEffect}},d={catchError:i.flip(c.catchException),MonadThrow0:function(){return s}},h=function(m){return m.catchError},p=function(m){return function(x){return h(m)(o.map(m.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(r.Right.create)(x))(function(){var D=t.pure(m.MonadThrow0().Monad0().Applicative0());return function(b){return D(r.Left.create(b))}}())}};n.throwError=v,n.try=p,n.monadErrorEffect=d})(C);(function(e){"use strict";e["Control.Monad.Except.Trans"]=e["Control.Monad.Except.Trans"]||{};var n=e["Control.Monad.Except.Trans"],t=e["Control.Applicative"],r=e["Control.Bind"],i=e["Control.Monad"],o=e["Data.Either"],l=e["Data.Functor"],c=e["Data.Semigroup"],v=function(E){return E},s=function(E){return E},d=function(E){return function(k){return E(k)}},h=function(E){return{map:function(k){return d(l.map(E)(l.map(o.functorEither)(k)))}}},p=function(E){return{Applicative0:function(){return D(E)},Bind1:function(){return m(E)}}},m=function(E){return{bind:function(k){return function(W){return r.bind(E.Bind1())(k)(o.either(function(){var G=t.pure(E.Applicative0());return function(_){return G(o.Left.create(_))}}())(function(G){var _=W(G);return _}))}},Apply0:function(){return x(E)}}},x=function(E){return{apply:i.ap(p(E)),Functor0:function(){return h(E.Bind1().Apply0().Functor0())}}},D=function(E){return{pure:function(){var k=t.pure(E.Applicative0());return function(W){return v(k(o.Right.create(W)))}}(),Apply0:function(){return x(E)}}},b=function(E){return{throwError:function(){var k=t.pure(E.Applicative0());return function(W){return v(k(o.Left.create(W)))}}(),Monad0:function(){return p(E)}}},g=function(E){return function(k){return{alt:function(W){return function(G){return r.bind(k.Bind1())(W)(function(_){if(_ instanceof o.Right)return t.pure(k.Applicative0())(new o.Right(_.value0));if(_ instanceof o.Left)return r.bind(k.Bind1())(G)(function(u){if(u instanceof o.Right)return t.pure(k.Applicative0())(new o.Right(u.value0));if(u instanceof o.Left)return t.pure(k.Applicative0())(new o.Left(c.append(E)(_.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 87, column 9 - line 89, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 83, column 5 - line 89, column 49): "+[_.constructor.name])})}},Functor0:function(){return h(k.Bind1().Apply0().Functor0())}}}};n.runExceptT=s,n.functorExceptT=h,n.applicativeExceptT=D,n.altExceptT=g,n.monadThrowExceptT=b})(C);(function(e){"use strict";e.unsafeCoerce=function(n){return n}})(C["Unsafe.Coerce"]=C["Unsafe.Coerce"]||{});(function(e){"use strict";e["Unsafe.Coerce"]=e["Unsafe.Coerce"]||{};var n=e["Unsafe.Coerce"],t=e["Unsafe.Coerce"];n.unsafeCoerce=t.unsafeCoerce})(C);(function(e){"use strict";e["Safe.Coerce"]=e["Safe.Coerce"]||{};var n=e["Safe.Coerce"],t=e["Unsafe.Coerce"],r=function(i){return t.unsafeCoerce};n.coerce=r})(C);(function(e){"use strict";e["Data.Newtype"]=e["Data.Newtype"]||{};var n=e["Data.Newtype"],t=e["Safe.Coerce"],r=function(l){return t.coerce()},i=function(l){return t.coerce()},o=function(l){return function(c){return function(v){return t.coerce()}}};n.wrap=r,n.unwrap=i,n.over=o})(C);(function(e){"use strict";e["Control.Monad.Except"]=e["Control.Monad.Except"]||{};var n=e["Control.Monad.Except"],t=e["Control.Monad.Except.Trans"],r=e["Data.Newtype"],i=function(){var o=r.unwrap();return function(l){return o(t.runExceptT(l))}}();n.runExcept=i})(C);(function(e){"use strict";e["Control.Monad.State"]=e["Control.Monad.State"]||{};var n=e["Control.Monad.State"],t=function(r){return function(i){var o=r(i);return o.value0}};n.evalState=t})(C);(function(e){"use strict";e["Control.Monad.State.Class"]=e["Control.Monad.State.Class"]||{};var n=e["Control.Monad.State.Class"],t=function(r){return r.state};n.state=t})(C);(function(e){"use strict";var n=function(t){return function(r){return t===r}};e.eqIntImpl=n,e.eqNumberImpl=n,e.eqStringImpl=n})(C["Data.Eq"]=C["Data.Eq"]||{});(function(e){"use strict";e["Data.Eq"]=e["Data.Eq"]||{};var n=e["Data.Eq"],t=e["Data.Eq"],r={eq:function(v){return function(s){return!0}}},i={eq:t.eqStringImpl},o={eq:t.eqNumberImpl},l={eq:t.eqIntImpl},c=function(v){return v.eq};n.eq=c,n.eqInt=l,n.eqNumber=o,n.eqString=i,n.eqUnit=r})(C);(function(e){"use strict";e["Data.Tuple"]=e["Data.Tuple"]||{};var n=e["Data.Tuple"],t=e["Data.Eq"],r=function(){function s(d,h){this.value0=d,this.value1=h}return s.create=function(d){return function(h){return new s(d,h)}},s}(),i=function(s){return function(d){return s(d.value0)(d.value1)}},o=function(s){return s.value1},l={map:function(s){return function(d){return new r(d.value0,s(d.value1))}}},c=function(s){return s.value0},v=function(s){return function(d){return{eq:function(h){return function(p){return t.eq(s)(h.value0)(p.value0)&&t.eq(d)(h.value1)(p.value1)}}}}};n.Tuple=r,n.fst=c,n.snd=o,n.uncurry=i,n.eqTuple=v,n.functorTuple=l})(C);(function(e){"use strict";e["Control.Monad.State.Trans"]=e["Control.Monad.State.Trans"]||{};var n=e["Control.Monad.State.Trans"],t=e["Control.Applicative"],r=e["Control.Bind"],i=e["Control.Monad"],o=e["Data.Functor"],l=e["Data.Tuple"],c=function(x){return x},v=function(x){return{map:function(D){return function(b){return function(g){return o.map(x)(function(E){return new l.Tuple(D(E.value0),E.value1)})(b(g))}}}}},s=function(x){return{Applicative0:function(){return p(x)},Bind1:function(){return d(x)}}},d=function(x){return{bind:function(D){return function(b){return function(g){return r.bind(x.Bind1())(D(g))(function(E){var k=b(E.value0);return k(E.value1)})}}},Apply0:function(){return h(x)}}},h=function(x){return{apply:i.ap(s(x)),Functor0:function(){return v(x.Bind1().Apply0().Functor0())}}},p=function(x){return{pure:function(D){return function(b){return t.pure(x.Applicative0())(new l.Tuple(D,b))}},Apply0:function(){return h(x)}}},m=function(x){return{state:function(D){return c(function(){var b=t.pure(x.Applicative0());return function(g){return b(D(g))}}())},Monad0:function(){return s(x)}}};n.functorStateT=v,n.applyStateT=h,n.applicativeStateT=p,n.bindStateT=d,n.monadStateStateT=m})(C);(function(e){"use strict";e["Control.Parallel.Class"]=e["Control.Parallel.Class"]||{};var n=e["Control.Parallel.Class"],t=function(i){return i.sequential},r=function(i){return i.parallel};n.parallel=r,n.sequential=t})(C);(function(e){"use strict";e.foldrArray=function(n){return function(t){return function(r){for(var i=t,o=r.length,l=o-1;l>=0;l--)i=n(r[l])(i);return i}}},e.foldlArray=function(n){return function(t){return function(r){for(var i=t,o=r.length,l=0;l<o;l++)i=n(i)(r[l]);return i}}}})(C["Data.Foldable"]=C["Data.Foldable"]||{});(function(e){"use strict";e["Control.Plus"]=e["Control.Plus"]||{};var n=e["Control.Plus"],t=function(r){return r.empty};n.empty=t})(C);(function(e){"use strict";e["Data.Foldable"]=e["Data.Foldable"]||{};var n=e["Data.Foldable"],t=e["Data.Foldable"],r=e["Control.Alt"],i=e["Control.Applicative"],o=e["Control.Apply"],l=e["Control.Category"],c=e["Control.Plus"],v=e["Data.Function"],s=e["Data.Maybe"],d=e["Data.Monoid"],h=e["Data.Semigroup"],p=e["Data.Unit"],m=function(a){return a.foldr},x=function(a){return function(f){return m(a)(r.alt(f.Alt0()))(c.empty(f))}},D=function(a){return function(f){return function(O){return m(a)(function(){var R=r.alt(f.Alt0());return function(B){return R(O(B))}}())(c.empty(f))}}},b=function(a){return function(f){return function(O){return m(f)(function(){var R=o.applySecond(a.Apply0());return function(B){return R(O(B))}}())(i.pure(a)(p.unit))}}},g=function(a){return function(f){return v.flip(b(a)(f))}},E=function(a){return function(f){return b(a)(f)(l.identity(l.categoryFn))}},k=function(a){return a.foldl},W={foldr:function(a){return function(f){return function(O){if(O instanceof s.Nothing)return f;if(O instanceof s.Just)return a(O.value0)(f);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[a.constructor.name,f.constructor.name,O.constructor.name])}}},foldl:function(a){return function(f){return function(O){if(O instanceof s.Nothing)return f;if(O instanceof s.Just)return a(f)(O.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[a.constructor.name,f.constructor.name,O.constructor.name])}}},foldMap:function(a){return function(f){return function(O){if(O instanceof s.Nothing)return d.mempty(a);if(O instanceof s.Just)return f(O.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[f.constructor.name,O.constructor.name])}}}},G=function(a){return function(f){return function(O){return m(a)(function(R){return function(B){return h.append(f.Semigroup0())(O(R))(B)}})(d.mempty(f))}}},_={foldr:t.foldrArray,foldl:t.foldlArray,foldMap:function(a){return G(_)(a)}},u=function(a){return a.foldMap};n.foldr=m,n.foldl=k,n.foldMap=u,n.traverse_=b,n.for_=g,n.sequence_=E,n.oneOf=x,n.oneOfMap=D,n.foldableArray=_,n.foldableMaybe=W})(C);(function(e){"use strict";e.traverseArrayImpl=function(){function n(o){return[o]}function t(o){return function(l){return[o,l]}}function r(o){return function(l){return function(c){return[o,l,c]}}}function i(o){return function(l){return o.concat(l)}}return function(o){return function(l){return function(c){return function(v){return function(s){function d(h,p){switch(p-h){case 0:return c([]);case 1:return l(n)(v(s[h]));case 2:return o(l(t)(v(s[h])))(v(s[h+1]));case 3:return o(o(l(r)(v(s[h])))(v(s[h+1])))(v(s[h+2]));default:var m=h+Math.floor((p-h)/4)*2;return o(l(i)(d(h,m)))(d(m,p))}}return d(0,s.length)}}}}}}()})(C["Data.Traversable"]=C["Data.Traversable"]||{});(function(e){"use strict";e["Data.Traversable"]=e["Data.Traversable"]||{};var n=e["Data.Traversable"],t=e["Data.Traversable"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Category"],l=e["Data.Foldable"],c=e["Data.Functor"],v=function(h){return h.traverse},s=function(h){return function(p){return v(h)(p)(o.identity(o.categoryFn))}},d={traverse:function(h){return t.traverseArrayImpl(i.apply(h.Apply0()))(c.map(h.Apply0().Functor0()))(r.pure(h))},sequence:function(h){return s(d)(h)},Functor0:function(){return c.functorArray},Foldable1:function(){return l.foldableArray}};n.traverse=v,n.traversableArray=d})(C);(function(e){"use strict";e["Control.Parallel"]=e["Control.Parallel"]||{};var n=e["Control.Parallel"],t=e["Control.Category"],r=e["Control.Parallel.Class"],i=e["Data.Foldable"],o=e["Data.Traversable"],l=function(s){return function(d){return function(h){var p=r.sequential(s),m=i.traverse_(s.Applicative1())(d)(function(){var x=r.parallel(s);return function(D){return x(h(D))}}());return function(x){return p(m(x))}}}},c=function(s){return function(d){return function(h){var p=r.sequential(s),m=o.traverse(d)(s.Applicative1())(function(){var x=r.parallel(s);return function(D){return x(h(D))}}());return function(x){return p(m(x))}}}},v=function(s){return function(d){return l(s)(d)(t.identity(t.categoryFn))}};n.parTraverse=c,n.parSequence_=v})(C);(function(e){e.thenImpl=function(n){return function(t){return function(r){return function(){n.then(r,t)}}}}})(C["Control.Promise"]=C["Control.Promise"]||{});(function(e){"use strict";e["Data.Identity"]=e["Data.Identity"]||{};var n=e["Data.Identity"],t=function(v){return v},r={map:function(v){return function(s){return v(s)}}},i={apply:function(v){return function(s){return v(s)}},Functor0:function(){return r}},o={bind:function(v){return function(s){return s(v)}},Apply0:function(){return i}},l={pure:t,Apply0:function(){return i}},c={Applicative0:function(){return l},Bind1:function(){return o}};n.functorIdentity=r,n.monadIdentity=c})(C);(function(e){"use strict";e["Data.NonEmpty"]=e["Data.NonEmpty"]||{};var n=e["Data.NonEmpty"],t=e["Control.Plus"],r=function(){function o(l,c){this.value0=l,this.value1=c}return o.create=function(l){return function(c){return new o(l,c)}},o}(),i=function(o){return function(l){return new r(l,t.empty(o))}};n.NonEmpty=r,n.singleton=i})(C);(function(e){"use strict";e["Data.List.Types"]=e["Data.List.Types"]||{};var n=e["Data.List.Types"],t=e["Control.Apply"],r=e["Data.Foldable"],i=e["Data.Function"],o=e["Data.Functor"],l=e["Data.Maybe"],c=e["Data.Monoid"],v=e["Data.NonEmpty"],s=e["Data.Semigroup"],d=function(){function f(){}return f.value=new f,f}(),h=function(){function f(O,R){this.value0=O,this.value1=R}return f.create=function(O){return function(R){return new f(O,R)}},f}(),p=function(f){return f},m=function(f){return new h(f.value0,f.value1)},x=function(f){var O=function(R){return function(B){var L=R,F=!1,$;function Z(H,V){if(V instanceof h&&V.value1 instanceof h&&V.value1.value1 instanceof h){L=new h(V,H),B=V.value1.value1.value1;return}var J=function(A){return A instanceof h&&A.value1 instanceof h&&A.value1.value1 instanceof d?new h(f(A.value0),new h(f(A.value1.value0),d.value)):A instanceof h&&A.value1 instanceof d?new h(f(A.value0),d.value):d.value},I=function(A){return function(q){var j=A,re=!1,M;function T(Q,K){if(Q instanceof h&&Q.value0 instanceof h&&Q.value0.value1 instanceof h&&Q.value0.value1.value1 instanceof h){j=Q.value1,q=new h(f(Q.value0.value0),new h(f(Q.value0.value1.value0),new h(f(Q.value0.value1.value1.value0),K)));return}return re=!0,K}for(;!re;)M=T(j,q);return M}};return F=!0,I(H)(J(V))}for(;!F;)$=Z(L,B);return $}};return O(d.value)},D={map:x},b={foldr:function(f){return function(O){var R=function(){var L=function(F){return function($){var Z=F,H=!1,V;function J(I,A){if(A instanceof d)return H=!0,I;if(A instanceof h){Z=new h(A.value0,I),$=A.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 108, column 7 - line 108, column 23): "+[I.constructor.name,A.constructor.name])}for(;!H;)V=J(Z,$);return V}};return L(d.value)}(),B=r.foldl(b)(i.flip(f))(O);return function(L){return B(R(L))}}},foldl:function(f){var O=function(R){return function(B){var L=R,F=!1,$;function Z(H,V){if(V instanceof d)return F=!0,H;if(V instanceof h){L=f(H)(V.value0),B=V.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 112, column 12 - line 114, column 30): "+[V.constructor.name])}for(;!F;)$=Z(L,B);return $}};return O},foldMap:function(f){return function(O){return r.foldl(b)(function(R){var B=s.append(f.Semigroup0())(R);return function(L){return B(O(L))}})(c.mempty(f))}}},g={append:function(f){return function(O){return r.foldr(b)(h.create)(O)(f)}}},E={append:function(f){return function(O){return new v.NonEmpty(f.value0,s.append(g)(f.value1)(m(O)))}}},k={unfoldr1:function(f){return function(O){var R=function(B){return function(L){var F=B,$=!1,Z;function H(V,J){var I=f(V);if(I.value1 instanceof l.Just){F=I.value1.value0,L=new h(I.value0,J);return}if(I.value1 instanceof l.Nothing)return $=!0,r.foldl(b)(i.flip(h.create))(d.value)(new h(I.value0,J));throw new Error("Failed pattern match at Data.List.Types (line 136, column 22 - line 138, column 61): "+[I.constructor.name])}for(;!$;)Z=H(F,L);return Z}};return R(O)(d.value)}}},W={unfoldr:function(f){return function(O){var R=function(B){return function(L){var F=B,$=!1,Z;function H(V,J){var I=f(V);if(I instanceof l.Nothing)return $=!0,r.foldl(b)(i.flip(h.create))(d.value)(J);if(I instanceof l.Just){F=I.value0.value1,L=new h(I.value0.value0,J);return}throw new Error("Failed pattern match at Data.List.Types (line 143, column 22 - line 145, column 52): "+[I.constructor.name])}for(;!$;)Z=H(F,L);return Z}};return R(O)(d.value)}},Unfoldable10:function(){return k}},G={apply:function(f){return function(O){if(f instanceof d)return d.value;if(f instanceof h)return s.append(g)(o.map(D)(f.value0)(O))(t.apply(G)(f.value1)(O));throw new Error("Failed pattern match at Data.List.Types (line 158, column 1 - line 160, column 48): "+[f.constructor.name,O.constructor.name])}},Functor0:function(){return D}},_={pure:function(f){return new h(f,d.value)},Apply0:function(){return G}},u={alt:s.append(g),Functor0:function(){return D}},a={empty:d.value,Alt0:function(){return u}};n.Nil=d,n.Cons=h,n.NonEmptyList=p,n.semigroupList=g,n.foldableList=b,n.unfoldableList=W,n.applicativeList=_,n.plusList=a,n.semigroupNonEmptyList=E})(C);(function(e){"use strict";var n=function(){var t={},r="Pure",i="Throw",o="Catch",l="Sync",c="Async",v="Bind",s="Bracket",d="Fork",h="Sequential",p="Map",m="Apply",x="Alt",D="Cons",b="Resume",g="Release",E="Finalizer",k="Finalized",W="Forked",G="Fiber",_="Thunk";function u(M,T,Q,K){this.tag=M,this._1=T,this._2=Q,this._3=K}function a(M){var T=function(Q,K,te){return new u(M,Q,K,te)};return T.tag=M,T}function f(M){return new u(r,void 0)}function O(M){try{M()}catch(T){setTimeout(function(){throw T},0)}}function R(M,T,Q){try{return T(Q())}catch(K){return M(K)}}function B(M,T,Q){try{return T(Q)()}catch(K){return Q(M(K))(),f}}var L=function(){var M=1024,T=0,Q=0,K=new Array(M),te=!1;function S(){var y;for(te=!0;T!==0;)T--,y=K[Q],K[Q]=void 0,Q=(Q+1)%M,y();te=!1}return{isDraining:function(){return te},enqueue:function(y){var N,U;T===M&&(U=te,S(),te=U),K[(Q+T)%M]=y,T++,te||S()}}}();function F(M){var T={},Q=0,K=0;return{register:function(te){var S=Q++;te.onComplete({rethrow:!0,handler:function(y){return function(){K--,delete T[S]}}})(),T[S]=te,K++},isEmpty:function(){return K===0},killAll:function(te,S){return function(){if(K===0)return S();var y=0,N={};function U(Ee){N[Ee]=T[Ee].kill(te,function(X){return function(){delete N[Ee],y--,M.isLeft(X)&&M.fromLeft(X)&&setTimeout(function(){throw M.fromLeft(X)},0),y===0&&S()}})()}for(var De in T)T.hasOwnProperty(De)&&(y++,U(De));return T={},Q=0,K=0,function(Ee){return new u(l,function(){for(var X in N)N.hasOwnProperty(X)&&N[X]()})}}}}}var $=0,Z=1,H=2,V=3,J=4,I=5,A=6;function q(M,T,Q){var K=0,te=$,S=Q,y=null,N=null,U=null,De=null,Ee=null,X=0,we=0,ge=null,ne=!0;function se(fe){for(var le,he,_e;;)switch(le=null,he=null,_e=null,te){case H:te=Z;try{S=U(S),De===null?U=null:(U=De._1,De=De._2)}catch(Ie){te=I,y=M.left(Ie),S=null}break;case V:M.isLeft(S)?(te=I,y=S,S=null):U===null?te=I:(te=H,S=M.fromRight(S));break;case Z:switch(S.tag){case v:U&&(De=new u(D,U,De)),U=S._2,te=Z,S=S._1;break;case r:U===null?(te=I,S=M.right(S._1)):(te=H,S=S._1);break;case l:te=V,S=R(M.left,M.right,S._1);break;case c:te=J,S=B(M.left,S._1,function(Ie){return function(){K===fe&&(K++,L.enqueue(function(){K===fe+1&&(te=V,S=Ie,se(K))}))}});return;case i:te=I,y=M.left(S._1),S=null;break;case o:U===null?Ee=new u(D,S,Ee,N):Ee=new u(D,S,new u(D,new u(b,U,De),Ee,N),N),U=null,De=null,te=Z,S=S._1;break;case s:X++,U===null?Ee=new u(D,S,Ee,N):Ee=new u(D,S,new u(D,new u(b,U,De),Ee,N),N),U=null,De=null,te=Z,S=S._1;break;case d:te=V,le=q(M,T,S._2),T&&T.register(le),S._1&&le.run(),S=M.right(le);break;case h:te=Z,S=re(M,T,S._1);break}break;case I:if(U=null,De=null,Ee===null)te=A,S=N||y||S;else switch(le=Ee._3,_e=Ee._1,Ee=Ee._2,_e.tag){case o:N&&N!==le&&X===0?te=I:y&&(te=Z,S=_e._2(M.fromLeft(y)),y=null);break;case b:N&&N!==le&&X===0||y?te=I:(U=_e._1,De=_e._2,te=H,S=M.fromRight(S));break;case s:X--,y===null&&(he=M.fromRight(S),Ee=new u(D,new u(g,_e._2,he),Ee,le),(N===le||X>0)&&(te=Z,S=_e._3(he)));break;case g:Ee=new u(D,new u(k,S,y),Ee,N),te=Z,N&&N!==le&&X===0?S=_e._1.killed(M.fromLeft(N))(_e._2):y?S=_e._1.failed(M.fromLeft(y))(_e._2):S=_e._1.completed(M.fromRight(S))(_e._2),y=null,X++;break;case E:X++,Ee=new u(D,new u(k,S,y),Ee,N),te=Z,S=_e._1;break;case k:X--,te=I,S=_e._1,y=_e._2;break}break;case A:for(var Oe in ge)ge.hasOwnProperty(Oe)&&(ne=ne&&ge[Oe].rethrow,O(ge[Oe].handler(S)));ge=null,N&&y?setTimeout(function(){throw M.fromLeft(y)},0):M.isLeft(S)&&ne&&setTimeout(function(){if(ne)throw M.fromLeft(S)},0);return;case $:te=Z;break;case J:return}}function Ae(fe){return function(){if(te===A)return ne=ne&&fe.rethrow,fe.handler(S)(),function(){};var le=we++;return ge=ge||{},ge[le]=fe,function(){ge!==null&&delete ge[le]}}}function ee(fe,le){return function(){if(te===A)return le(M.right(void 0))(),function(){};var he=Ae({rethrow:!1,handler:function(){return le(M.right(void 0))}})();switch(te){case $:N=M.left(fe),te=A,S=N,se(K);break;case J:N===null&&(N=M.left(fe)),X===0&&(te===J&&(Ee=new u(D,new u(E,S(fe)),Ee,N)),te=I,S=null,y=null,se(++K));break;default:N===null&&(N=M.left(fe)),X===0&&(te=I,S=null,y=null)}return he}}function xe(fe){return function(){var le=Ae({rethrow:!1,handler:fe})();return te===$&&se(K),le}}return{kill:ee,join:xe,onComplete:Ae,isSuspended:function(){return te===$},run:function(){te===$&&(L.isDraining()?se(K):L.enqueue(function(){se(K)}))}}}function j(M,T,Q,K){var te=0,S={},y=0,N={},U=new Error("[ParAff] Early exit"),De=null,Ee=t;function X(Ae,ee,xe){var fe=ee,le=null,he=null,_e=0,Oe={},Ie,Ge;e:for(;;)switch(Ie=null,fe.tag){case W:if(fe._3===t&&(Ie=S[fe._1],Oe[_e++]=Ie.kill(Ae,function(Te){return function(){_e--,_e===0&&xe(Te)()}})),le===null)break e;fe=le._2,he===null?le=null:(le=he._1,he=he._2);break;case p:fe=fe._2;break;case m:case x:le&&(he=new u(D,le,he)),le=fe,fe=fe._1;break}if(_e===0)xe(M.right(void 0))();else for(Ge=0,Ie=_e;Ge<Ie;Ge++)Oe[Ge]=Oe[Ge]();return Oe}function we(Ae,ee,xe){var fe,le,he,_e,Oe,Ie;M.isLeft(Ae)?(fe=Ae,le=null):(le=Ae,fe=null);e:for(;;){if(he=null,_e=null,Oe=null,Ie=null,De!==null)return;if(ee===null){K(fe||le)();return}if(ee._3!==t)return;switch(ee.tag){case p:fe===null?(ee._3=M.right(ee._1(M.fromRight(le))),le=ee._3):ee._3=fe;break;case m:if(he=ee._1._3,_e=ee._2._3,fe){if(ee._3=fe,Oe=!0,Ie=y++,N[Ie]=X(U,fe===he?ee._2:ee._1,function(){return function(){delete N[Ie],Oe?Oe=!1:xe===null?we(fe,null,null):we(fe,xe._1,xe._2)}}),Oe){Oe=!1;return}}else{if(he===t||_e===t)return;le=M.right(M.fromRight(he)(M.fromRight(_e))),ee._3=le}break;case x:if(he=ee._1._3,_e=ee._2._3,he===t&&M.isLeft(_e)||_e===t&&M.isLeft(he))return;if(he!==t&&M.isLeft(he)&&_e!==t&&M.isLeft(_e))fe=le===he?_e:he,le=null,ee._3=fe;else if(ee._3=le,Oe=!0,Ie=y++,N[Ie]=X(U,le===he?ee._2:ee._1,function(){return function(){delete N[Ie],Oe?Oe=!1:xe===null?we(le,null,null):we(le,xe._1,xe._2)}}),Oe){Oe=!1;return}break}xe===null?ee=null:(ee=xe._1,xe=xe._2)}}function ge(Ae){return function(ee){return function(){delete S[Ae._1],Ae._3=ee,we(ee,Ae._2._1,Ae._2._2)}}}function ne(){var Ae=Z,ee=Q,xe=null,fe=null,le,he;e:for(;;)switch(le=null,he=null,Ae){case Z:switch(ee.tag){case p:xe&&(fe=new u(D,xe,fe)),xe=new u(p,ee._1,t,t),ee=ee._2;break;case m:xe&&(fe=new u(D,xe,fe)),xe=new u(m,t,ee._2,t),ee=ee._1;break;case x:xe&&(fe=new u(D,xe,fe)),xe=new u(x,t,ee._2,t),ee=ee._1;break;default:he=te++,Ae=I,le=ee,ee=new u(W,he,new u(D,xe,fe),t),le=q(M,T,le),le.onComplete({rethrow:!1,handler:ge(ee)})(),S[he]=le,T&&T.register(le)}break;case I:if(xe===null)break e;xe._1===t?(xe._1=ee,Ae=Z,ee=xe._2,xe._2=t):(xe._2=ee,ee=xe,fe===null?xe=null:(xe=fe._1,fe=fe._2))}for(Ee=ee,he=0;he<te;he++)S[he].run()}function se(Ae,ee){De=M.left(Ae);var xe;for(var fe in N)if(N.hasOwnProperty(fe)){xe=N[fe];for(fe in xe)xe.hasOwnProperty(fe)&&xe[fe]()}N=null;var le=X(Ae,Ee,ee);return function(he){return new u(c,function(_e){return function(){for(var Oe in le)le.hasOwnProperty(Oe)&&le[Oe]();return f}})}}return ne(),function(Ae){return new u(c,function(ee){return function(){return se(Ae,ee)}})}}function re(M,T,Q){return new u(c,function(K){return function(){return j(M,T,Q,K)}})}return u.EMPTY=t,u.Pure=a(r),u.Throw=a(i),u.Catch=a(o),u.Sync=a(l),u.Async=a(c),u.Bind=a(v),u.Bracket=a(s),u.Fork=a(d),u.Seq=a(h),u.ParMap=a(p),u.ParApply=a(m),u.ParAlt=a(x),u.Fiber=q,u.Supervisor=F,u.Scheduler=L,u.nonCanceler=f,u}();e._pure=n.Pure,e._map=function(t){return function(r){return r.tag===n.Pure.tag?n.Pure(t(r._1)):n.Bind(r,function(i){return n.Pure(t(i))})}},e._bind=function(t){return function(r){return n.Bind(t,r)}},e._liftEffect=n.Sync,e._parAffMap=function(t){return function(r){return n.ParMap(t,r)}},e._parAffApply=function(t){return function(r){return n.ParApply(t,r)}},e._parAffAlt=function(t){return function(r){return n.ParAlt(t,r)}},e.makeAff=n.Async,e.generalBracket=function(t){return function(r){return function(i){return n.Bracket(t,r,i)}}},e._makeFiber=function(t,r){return function(){return n.Fiber(t,null,r)}},e._sequential=n.Seq})(C["Effect.Aff"]=C["Effect.Aff"]||{});(function(e){"use strict";e["Effect.Class"]=e["Effect.Class"]||{};var n=e["Effect.Class"],t=function(r){return r.liftEffect};n.liftEffect=t})(C);(function(e){"use strict";e._unsafePartial=function(n){return n()}})(C["Partial.Unsafe"]=C["Partial.Unsafe"]||{});(function(e){"use strict";e._crashWith=function(n){throw new Error(n)}})(C.Partial=C.Partial||{});(function(e){"use strict";e.Partial=e.Partial||{};var n=e.Partial,t=e.Partial,r=function(i){return t._crashWith};n.crashWith=r})(C);(function(e){"use strict";e["Partial.Unsafe"]=e["Partial.Unsafe"]||{};var n=e["Partial.Unsafe"],t=e["Partial.Unsafe"],r=e.Partial,i=t._unsafePartial,o=function(l){return i(function(c){return r.crashWith()(l)})};n.unsafeCrashWith=o})(C);(function(e){"use strict";e["Effect.Aff"]=e["Effect.Aff"]||{};var n=e["Effect.Aff"],t=e["Effect.Aff"],r=e["Control.Applicative"],i=e["Control.Bind"],o=e["Control.Monad"],l=e["Control.Parallel"],c=e["Control.Parallel.Class"],v=e["Data.Either"],s=e["Data.Foldable"],d=e["Data.Function"],h=e["Data.Functor"],p=e["Data.Unit"],m=e.Effect,x=e["Effect.Class"],D=e["Partial.Unsafe"],b=e["Unsafe.Coerce"],g=function(re){return re},E={map:t._parAffMap},k={map:t._map},W=function(){var re=function(Q){if(Q instanceof v.Right)return Q.value0;if(Q instanceof v.Left)return D.unsafeCrashWith("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 404, column 21 - line 406, column 54): "+[Q.constructor.name])},M=function(Q){if(Q instanceof v.Left)return Q.value0;if(Q instanceof v.Right)return D.unsafeCrashWith("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 399, column 20 - line 401, column 54): "+[Q.constructor.name])},T=function(Q){if(Q instanceof v.Left)return!0;if(Q instanceof v.Right)return!1;throw new Error("Failed pattern match at Effect.Aff (line 394, column 12 - line 396, column 20): "+[Q.constructor.name])};return{isLeft:T,fromLeft:M,fromRight:re,left:v.Left.create,right:v.Right.create}}(),G=function(re){return t._makeFiber(W,re)},_=function(re){return function(){var T=G(re)();return T.run(),T}},u=function(){var re=h.void(m.functorEffect);return function(M){return re(_(M))}}(),a=function(re){return function(M){return t.generalBracket(re)({killed:d.const(M),failed:d.const(M),completed:d.const(M)})}},f={apply:t._parAffApply,Functor0:function(){return E}},O={Applicative0:function(){return L},Bind1:function(){return R}},R={bind:t._bind,Apply0:function(){return B}},B={apply:o.ap(O),Functor0:function(){return k}},L={pure:t._pure,Apply0:function(){return B}},F={liftEffect:t._liftEffect,Monad0:function(){return O}},$=function(){var re=x.liftEffect(F);return function(M){return g(d.const(re(M)))}}(),Z=function(re){return t.makeAff(function(M){return h.map(m.functorEffect)($)(re.join(M))})},H=function(re){return function(M){return i.bind(R)(x.liftEffect(F)(M.isSuspended))(function(T){return T?x.liftEffect(F)(h.void(m.functorEffect)(M.kill(re,d.const(r.pure(m.applicativeEffect)(p.unit))))):t.makeAff(function(Q){return h.map(m.functorEffect)($)(M.kill(re,Q))})})}},V={parallel:b.unsafeCoerce,sequential:t._sequential,Monad0:function(){return O},Applicative1:function(){return J}},J={pure:function(){var re=c.parallel(V),M=r.pure(L);return function(T){return re(M(T))}}(),Apply0:function(){return f}},I={append:function(re){return function(M){return function(T){return l.parSequence_(V)(s.foldableArray)([re(T),M(T)])}}}},A=d.const(r.pure(L)(p.unit)),q={mempty:A,Semigroup0:function(){return I}},j={alt:t._parAffAlt,Functor0:function(){return E}};n.launchAff=_,n.launchAff_=u,n.killFiber=H,n.joinFiber=Z,n.bracket=a,n.functorAff=k,n.applyAff=B,n.applicativeAff=L,n.bindAff=R,n.monadEffectAff=F,n.functorParAff=E,n.applyParAff=f,n.altParAff=j,n.parallelAff=V,n.monoidCanceler=q,n.makeAff=t.makeAff})(C);(function(e){"use strict";e.tagOf=function(n){return Object.prototype.toString.call(n).slice(8,-1)}})(C.Foreign=C.Foreign||{});(function(e){"use strict";e["Data.Boolean"]=e["Data.Boolean"]||{};var n=e["Data.Boolean"],t=!0;n.otherwise=t})(C);(function(e){"use strict";e["Data.List.NonEmpty"]=e["Data.List.NonEmpty"]||{};var n=e["Data.List.NonEmpty"],t=e["Data.List.Types"],r=e["Data.NonEmpty"],i=function(){var o=r.singleton(t.plusList);return function(l){return t.NonEmptyList(o(l))}}();n.singleton=i})(C);(function(e){"use strict";e.Foreign=e.Foreign||{};var n=e.Foreign,t=e.Foreign,r=e["Control.Applicative"],i=e["Control.Monad.Error.Class"],o=e["Control.Monad.Except.Trans"],l=e["Data.Boolean"],c=e["Data.List.NonEmpty"],v=e["Unsafe.Coerce"],s=function(){function x(D,b){this.value0=D,this.value1=b}return x.create=function(D){return function(b){return new x(D,b)}},x}(),d=v.unsafeCoerce,h=function(x){var D=i.throwError(o.monadThrowExceptT(x));return function(b){return D(c.singleton(b))}},p=function(x){return function(D){return function(b){if(t.tagOf(b)===D)return r.pure(o.applicativeExceptT(x))(d(b));if(l.otherwise)return h(x)(new s(D,t.tagOf(b)));throw new Error("Failed pattern match at Foreign (line 110, column 1 - line 110, column 71): "+[D.constructor.name,b.constructor.name])}}},m=function(x){return p(x)("String")};n.unsafeReadTagged=p,n.readString=m})(C);(function(e){"use strict";e["Control.Promise"]=e["Control.Promise"]||{};var n=e["Control.Promise"],t=e["Control.Promise"],r=e["Control.Alt"],i=e["Control.Bind"],o=e["Control.Category"],l=e["Control.Monad.Except"],c=e["Control.Monad.Except.Trans"],v=e["Data.Either"],s=e["Data.Functor"],d=e["Data.Identity"],h=e["Data.List.Types"],p=e["Data.Monoid"],m=e.Effect,x=e["Effect.Aff"],D=e["Effect.Class"],b=e["Effect.Exception"],g=e.Foreign,E=function(_){return function(u){return x.makeAff(function(a){return s.voidRight(m.functorEffect)(p.mempty(x.monoidCanceler))(t.thenImpl(u)(function(f){return a(v.Left.create(_(f)))()})(function(f){return a(v.Right.create(f))()}))})}},k=function(_){return v.either(function(u){return b.error("Promise failed, couldn't extract JS Error or String")})(o.identity(o.categoryFn))(l.runExcept(r.alt(c.altExceptT(h.semigroupNonEmptyList)(d.monadIdentity))(g.unsafeReadTagged(d.monadIdentity)("Error")(_))(s.map(c.functorExceptT(d.functorIdentity))(b.error)(g.readString(d.monadIdentity)(_)))))},W=E(k),G=function(_){return i.bind(x.bindAff)(D.liftEffect(x.monadEffectAff)(_))(W)};n.toAffE=G})(C);(function(e){"use strict";e["Data.Symbol"]=e["Data.Symbol"]||{};var n=e["Data.Symbol"],t=function(r){return r.reflectSymbol};n.reflectSymbol=t})(C);(function(e){"use strict";e.unsafeHas=function(n){return function(t){return{}.hasOwnProperty.call(t,n)}},e.unsafeGet=function(n){return function(t){return t[n]}},e.unsafeSet=function(n){return function(t){return function(r){var i={};for(var o in r)({}).hasOwnProperty.call(r,o)&&(i[o]=r[o]);return i[n]=t,i}}}})(C["Record.Unsafe"]=C["Record.Unsafe"]||{});(function(e){"use strict";e["Record.Unsafe"]=e["Record.Unsafe"]||{};var n=e["Record.Unsafe"],t=e["Record.Unsafe"];n.unsafeHas=t.unsafeHas,n.unsafeGet=t.unsafeGet,n.unsafeSet=t.unsafeSet})(C);(function(e){"use strict";e.unsafeUnionFn=function(n,t){var r={};for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i]);for(var o in n)({}).hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}})(C["Record.Unsafe.Union"]=C["Record.Unsafe.Union"]||{});(function(e){"use strict";e["Record.Unsafe.Union"]=e["Record.Unsafe.Union"]||{};var n=e["Record.Unsafe.Union"],t=e["Record.Unsafe.Union"];n.unsafeUnionFn=t.unsafeUnionFn})(C);(function(e){"use strict";e.Record=e.Record||{};var n=e.Record,t=e["Data.Symbol"],r=e["Record.Unsafe"],i=e["Record.Unsafe.Union"],o=function(s){return function(d){return function(h){return function(p){return function(m){return function(x){return r.unsafeSet(t.reflectSymbol(s)(p))(m)(x)}}}}}},l=function(s){return function(d){return function(h){return function(p){return i.unsafeUnionFn(h,p)}}}},c=function(s){return function(d){return function(h){return function(p){return function(m){return function(x){return r.unsafeSet(t.reflectSymbol(s)(p))(m)(x)}}}}}},v=function(s){return function(d){return function(h){return function(p){return r.unsafeGet(t.reflectSymbol(s)(h))(p)}}}};n.get=v,n.set=o,n.insert=c,n.merge=l})(C);(function(e){"use strict";e.copyRecord=function(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},e.unsafeInsert=function(n){return function(t){return function(r){return r[n]=t,r}}}})(C["Record.Builder"]=C["Record.Builder"]||{});(function(e){"use strict";e["Record.Builder"]=e["Record.Builder"]||{};var n=e["Record.Builder"],t=e["Record.Builder"],r=e["Control.Category"],i=e["Control.Semigroupoid"],o=e["Data.Function"],l=e["Data.Symbol"],c=i.semigroupoidFn,v=function(m){return function(x){return function(D){return function(b){return function(g){return function(E){return t.unsafeInsert(l.reflectSymbol(D)(b))(g)(E)}}}}}},s=r.categoryFn,d=function(m){return function(x){return m(t.copyRecord(x))}},h=o.flip(d)({}),p=function(m){return function(x){return function(D){return d(m(D))(x)}}};n.buildFromScratch=h,n.insert=v,n.semigroupoidBuilder=c,n.categoryBuilder=s})(C);(function(e){"use strict";e["Type.Proxy"]=e["Type.Proxy"]||{};var n=e["Type.Proxy"],t=function(){function r(){}return r.value=new r,r}();n.Proxy=t})(C);(function(e){"use strict";e.ConvertableOptions=e.ConvertableOptions||{};var n=e.ConvertableOptions,t=e["Control.Category"],r=e["Control.Semigroupoid"],i=e["Data.Function"],o=e.Record,l=e["Record.Builder"],c=e["Type.Proxy"],v=function(E){return function(k){return{defaults:i.flip(o.merge()())}}},s=function(E){return E.defaults},d={convertRecordOptions:function(E){return function(k){return function(W){return t.identity(l.categoryBuilder)}}}},h=function(E){return E.convertRecordOptions},p=function(E){return E.convertOptionsWithDefaults},m=function(E){return function(k){return{convertOptions:function(W){return function(G){return l.buildFromScratch(h(k)(W)(c.Proxy.value)(G))}}}}},x=function(E){return E.convertOptions},D=function(E){return function(k){return{convertOptionsWithDefaults:function(W){return function(G){var _=s(k)(G),u=x(E)(W);return function(a){return _(u(a))}}}}}},b=function(E){return E.convertOption},g=function(E){return function(k){return function(W){return function(G){return function(_){return function(u){return{convertRecordOptions:function(a){return function(f){return function(O){return r.compose(l.semigroupoidBuilder)(l.insert()()(u)(c.Proxy.value)(b(k)(a)(c.Proxy.value)(o.get(u)()(c.Proxy.value)(O))))(h(E)(a)(c.Proxy.value)(O))}}}}}}}}}};n.convertOptionsWithDefaults=p,n.convertOptionsWithDefaultsRecord=D,n.convertRecordOptionsNil=d,n.convertRecordOptionsCons=g,n.convertOptionsRecord=m,n.defaultsRecord=v})(C);(function(e){"use strict";e.range=function(n){return function(t){for(var r=n>t?-1:1,i=new Array(r*(t-n)+1),o=n,l=0;o!==t;)i[l++]=o,o+=r;return i[l]=o,i}},e.length=function(n){return n.length},e.findIndexImpl=function(n){return function(t){return function(r){return function(i){for(var o=0,l=i.length;o<l;o++)if(r(i[o]))return n(o);return t}}}},e._deleteAt=function(n){return function(t){return function(r){return function(i){if(r<0||r>=i.length)return t;var o=i.slice();return o.splice(r,1),n(o)}}}},e.zipWith=function(n){return function(t){return function(r){for(var i=t.length<r.length?t.length:r.length,o=new Array(i),l=0;l<i;l++)o[l]=n(t[l])(r[l]);return o}}},e.unsafeIndexImpl=function(n){return function(t){return n[t]}}})(C["Data.Array"]=C["Data.Array"]||{});(function(e){"use strict";e["Data.Array"]=e["Data.Array"]||{};var n=e["Data.Array"],t=e["Data.Array"],r=e["Data.Maybe"],i=e["Data.Semigroup"],o=e["Data.Tuple"],l=t.zipWith(o.Tuple.create),c=function(m){return t.unsafeIndexImpl},v=function(m){return[m]},s=t.findIndexImpl(r.Just.create)(r.Nothing.value),d=t._deleteAt(r.Just.create)(r.Nothing.value),h=function(m){return function(x){return function(D){return D.length===0?[]:r.maybe(D)(function(b){return r.fromJust()(d(b)(D))})(s(m(x))(D))}}},p=function(m){return function(x){return i.append(i.semigroupArray)([m])(x)}};n.singleton=v,n.cons=p,n.deleteBy=h,n.zip=l,n.unsafeIndex=c,n.range=t.range,n.length=t.length})(C);(function(e){"use strict";e["Data.Array.NonEmpty.Internal"]=e["Data.Array.NonEmpty.Internal"]||{};var n=e["Data.Array.NonEmpty.Internal"],t=function(r){return r};n.NonEmptyArray=t})(C);(function(e){"use strict";e["Data.Array.NonEmpty"]=e["Data.Array.NonEmpty"]||{};var n=e["Data.Array.NonEmpty"],t=e["Data.Array"],r=e["Data.Array.NonEmpty.Internal"],i=e["Data.Boolean"],o=e["Data.Maybe"],l=r.NonEmptyArray,c=function(m){return m},v=function(m){return l(t.singleton(m))},s=function(m){if(t.length(m)>0)return new o.Just(l(m));if(i.otherwise)return o.Nothing.value;throw new Error("Failed pattern match at Data.Array.NonEmpty (line 159, column 1 - line 159, column 58): "+[m.constructor.name])},d=function(m){return function(x){return m(c(x))}},h=d(t.length),p=function(m){return d(t.unsafeIndex())};n.fromArray=s,n.singleton=v,n.length=h,n.unsafeIndex=p})(C);(function(e){"use strict";function n(t){return function(i,o,l){if(o===null)return new t(i);var c=i.byteLength,v=t.BYTES_PER_ELEMENT,s=Math.min(c,o>>>0);if(l===null)return new t(i,s);var d=Math.min((c-s)/v,l);return new t(i,s,d)}}e.newUint8Array=n(Uint8Array),e.toArrayImpl=function(t){for(var r=t.length,i=new Array(r),o=0;o<r;o++)i[o]=t[o];return i}})(C["Data.ArrayBuffer.Typed"]=C["Data.ArrayBuffer.Typed"]||{});(function(e){"use strict";e["Data.ArrayBuffer.Typed"]=e["Data.ArrayBuffer.Typed"]||{};var n=e["Data.ArrayBuffer.Typed"],t=e["Data.ArrayBuffer.Typed"],r={create:t.newUint8Array,BinaryValue0:function(){}},i=function(o){return function(l){return function(){return t.toArrayImpl(l)}}};n.toArray=i,n.typedArrayUint8=r})(C);(function(e){"use strict";e.topInt=2147483647,e.bottomInt=-2147483648})(C["Data.Bounded"]=C["Data.Bounded"]||{});(function(e){"use strict";var n=function(t){return function(r){return function(i){return function(o){return function(l){return o<l?t:o===l?r:i}}}}};e.ordIntImpl=n,e.ordNumberImpl=n})(C["Data.Ord"]=C["Data.Ord"]||{});(function(e){"use strict";e["Data.Ordering"]=e["Data.Ordering"]||{};var n=e["Data.Ordering"],t=function(){function o(){}return o.value=new o,o}(),r=function(){function o(){}return o.value=new o,o}(),i=function(){function o(){}return o.value=new o,o}();n.LT=t,n.GT=r,n.EQ=i})(C);(function(e){"use strict";e.intSub=function(n){return function(t){return n-t|0}},e.numSub=function(n){return function(t){return n-t}}})(C["Data.Ring"]=C["Data.Ring"]||{});(function(e){"use strict";e.intAdd=function(n){return function(t){return n+t|0}},e.intMul=function(n){return function(t){return n*t|0}},e.numAdd=function(n){return function(t){return n+t}},e.numMul=function(n){return function(t){return n*t}}})(C["Data.Semiring"]=C["Data.Semiring"]||{});(function(e){"use strict";e["Data.Semiring"]=e["Data.Semiring"]||{};var n=e["Data.Semiring"],t=e["Data.Semiring"],r=function(s){return s.zero},i={add:t.numAdd,zero:0,mul:t.numMul,one:1},o={add:t.intAdd,zero:0,mul:t.intMul,one:1},l=function(s){return s.one},c=function(s){return s.mul},v=function(s){return s.add};n.add=v,n.zero=r,n.mul=c,n.one=l,n.semiringInt=o,n.semiringNumber=i})(C);(function(e){"use strict";e["Data.Ring"]=e["Data.Ring"]||{};var n=e["Data.Ring"],t=e["Data.Ring"],r=e["Data.Semiring"],i=function(v){return v.sub},o={sub:t.numSub,Semiring0:function(){return r.semiringNumber}},l={sub:t.intSub,Semiring0:function(){return r.semiringInt}},c=function(v){return function(s){return i(v)(r.zero(v.Semiring0()))(s)}};n.sub=i,n.negate=c,n.ringInt=l,n.ringNumber=o})(C);(function(e){"use strict";e["Data.Ord"]=e["Data.Ord"]||{};var n=e["Data.Ord"],t=e["Data.Ord"],r=e["Data.Eq"],i=e["Data.Ordering"],o=e["Data.Ring"],l=e["Data.Semiring"],c={compare:t.ordNumberImpl(i.LT.value)(i.EQ.value)(i.GT.value),Eq0:function(){return r.eqNumber}},v={compare:t.ordIntImpl(i.LT.value)(i.EQ.value)(i.GT.value),Eq0:function(){return r.eqInt}},s=function(m){return m.compare},d=function(m){return function(x){return function(D){var b=s(m)(x)(D);return!(b instanceof i.LT)}}},h=function(m){return function(x){return function(D){var b=s(m)(x)(D);if(b instanceof i.LT)return D;if(b instanceof i.EQ||b instanceof i.GT)return x;throw new Error("Failed pattern match at Data.Ord (line 176, column 3 - line 179, column 12): "+[b.constructor.name])}}},p=function(m){return function(x){return function(D){var b=d(m)(D)(l.zero(x.Semiring0()));return b?D:o.negate(x)(D)}}};n.compare=s,n.max=h,n.abs=p,n.ordInt=v,n.ordNumber=c})(C);(function(e){"use strict";e["Data.Bounded"]=e["Data.Bounded"]||{};var n=e["Data.Bounded"],t=e["Data.Bounded"],r=e["Data.Ord"],i=function(c){return c.top},o={top:t.topInt,bottom:t.bottomInt,Ord0:function(){return r.ordInt}},l=function(c){return c.bottom};n.bottom=l,n.top=i,n.boundedInt=o})(C);(function(e){"use strict";e["Data.CommutativeRing"]=e["Data.CommutativeRing"]||{};var n=e["Data.CommutativeRing"],t=e["Data.Ring"],r={Ring0:function(){return t.ringNumber}},i={Ring0:function(){return t.ringInt}};n.commutativeRingInt=i,n.commutativeRingNumber=r})(C);(function(e){"use strict";e["Data.DateTime.Instant"]=e["Data.DateTime.Instant"]||{};var n=e["Data.DateTime.Instant"],t=function(r){return r};n.unInstant=t})(C);(function(e){"use strict";e["Data.Distributive"]=e["Data.Distributive"]||{};var n=e["Data.Distributive"],t=e["Data.Functor"],r=function(o){return o.distribute},i={distribute:function(o){return function(l){return function(c){return t.map(o)(function(v){return v(c)})(l)}}},collect:function(o){return function(l){var c=r(i)(o),v=t.map(o)(l);return function(s){return c(v(s))}}},Functor0:function(){return t.functorFn}};n.distribute=r,n.distributiveFunction=i})(C);(function(e){"use strict";e["Data.DivisionRing"]=e["Data.DivisionRing"]||{};var n=e["Data.DivisionRing"],t=e["Data.Ring"],r={recip:function(i){return 1/i},Ring0:function(){return t.ringNumber}};n.divisionringNumber=r})(C);(function(e){"use strict";e.intDegree=function(n){return Math.min(Math.abs(n),2147483647)},e.intDiv=function(n){return function(t){return t===0?0:t>0?Math.floor(n/t):-Math.floor(n/-t)}},e.intMod=function(n){return function(t){if(t===0)return 0;var r=Math.abs(t);return(n%r+r)%r}},e.numDiv=function(n){return function(t){return n/t}}})(C["Data.EuclideanRing"]=C["Data.EuclideanRing"]||{});(function(e){"use strict";e["Data.EuclideanRing"]=e["Data.EuclideanRing"]||{};var n=e["Data.EuclideanRing"],t=e["Data.EuclideanRing"],r=e["Data.CommutativeRing"],i=function(v){return v.mod},o={degree:function(v){return 1},div:t.numDiv,mod:function(v){return function(s){return 0}},CommutativeRing0:function(){return r.commutativeRingNumber}},l={degree:t.intDegree,div:t.intDiv,mod:t.intMod,CommutativeRing0:function(){return r.commutativeRingInt}},c=function(v){return v.div};n.div=c,n.mod=i,n.euclideanRingInt=l,n.euclideanRingNumber=o})(C);(function(e){"use strict";e["Data.Exists"]=e["Data.Exists"]||{};var n=e["Data.Exists"],t=e["Unsafe.Coerce"],r=t.unsafeCoerce,i=t.unsafeCoerce;n.mkExists=i,n.runExists=r})(C);(function(e){"use strict";e["Data.Field"]=e["Data.Field"]||{};var n=e["Data.Field"],t=function(r){return function(i){return{EuclideanRing0:function(){return r},DivisionRing1:function(){return i}}}};n.field=t})(C);(function(e){"use strict";e["Data.Filterable"]=e["Data.Filterable"]||{};var n=e["Data.Filterable"],t=function(o){return o.partitionMap},r=function(o){return o.filterMap},i=function(o){return o.filter};n.partitionMap=t,n.filterMap=r,n.filter=i})(C);(function(e){"use strict";e.mapWithIndexArray=function(n){return function(t){for(var r=t.length,i=Array(r),o=0;o<r;o++)i[o]=n(o)(t[o]);return i}}})(C["Data.FunctorWithIndex"]=C["Data.FunctorWithIndex"]||{});(function(e){"use strict";e["Data.FunctorWithIndex"]=e["Data.FunctorWithIndex"]||{};var n=e["Data.FunctorWithIndex"],t=e["Data.FunctorWithIndex"],r=e["Data.Functor"],i=function(l){return l.mapWithIndex},o={mapWithIndex:t.mapWithIndexArray,Functor0:function(){return r.functorArray}};n.mapWithIndex=i,n.functorWithIndexArray=o})(C);(function(e){"use strict";e["Data.Generic.Rep"]=e["Data.Generic.Rep"]||{};var n=e["Data.Generic.Rep"],t=function(){function l(c){this.value0=c}return l.create=function(c){return new l(c)},l}(),r=function(){function l(c){this.value0=c}return l.create=function(c){return new l(c)},l}(),i=function(){function l(){}return l.value=new l,l}(),o=function(l){return l.from};n.from=o,n.NoArguments=i,n.Inl=t,n.Inr=r})(C);(function(e){"use strict";e.hashNumber=function(n){if(n!==n||n===1/0)return 0;var t=n|0;for(t!==n&&(t^=n*4294967295);n>4294967295;)n/=4294967295,t^=n;return t},e.hashString=function(n){for(var t=0,r=0;r<n.length;r++)t=31*t+n.charCodeAt(r)|0;return t}})(C["Data.Hashable"]=C["Data.Hashable"]||{});(function(e){"use strict";e["Data.Hashable"]=e["Data.Hashable"]||{};var n=e["Data.Hashable"],t=e["Data.Hashable"],r=e["Data.Eq"],i=e["Data.Tuple"],o={hash:function(h){return 1},Eq0:function(){return r.eqUnit}},l={hash:t.hashString,Eq0:function(){return r.eqString}},c={hash:t.hashNumber,Eq0:function(){return r.eqNumber}},v={hash:function(h){return h},Eq0:function(){return r.eqInt}},s=function(h){return h.hash},d=function(h){return function(p){return{hash:function(m){return(s(h)(m.value0)*31|0)+s(p)(m.value1)|0},Eq0:function(){return i.eqTuple(h.Eq0())(p.Eq0())}}}};n.hash=s,n.hashableInt=v,n.hashableNumber=c,n.hashableString=l,n.hashableTuple=d,n.hashableUnit=o})(C);(function(e){"use strict";e.boolConj=function(n){return function(t){return n&&t}},e.boolDisj=function(n){return function(t){return n||t}},e.boolNot=function(n){return!n}})(C["Data.HeytingAlgebra"]=C["Data.HeytingAlgebra"]||{});(function(e){"use strict";e["Data.HeytingAlgebra"]=e["Data.HeytingAlgebra"]||{};var n=e["Data.HeytingAlgebra"],t=e["Data.HeytingAlgebra"],r=function(l){return l.not},i=function(l){return l.disj},o={ff:!1,tt:!0,implies:function(l){return function(c){return i(o)(r(o)(l))(c)}},conj:t.boolConj,disj:t.boolDisj,not:t.boolNot};n.not=r,n.heytingAlgebraBoolean=o})(C);(function(e){"use strict";e._copyST=function(t){return function(){var r={};for(var i in t)hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},e.empty={},e.runST=function(t){return t()},e._fmapObject=function(t,r){var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=r(t[o]));return i},e._mapWithKey=function(t,r){var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=r(o)(t[o]));return i},e._foldM=function(t){return function(r){return function(i){return function(o){var l=i;function c(s){return function(d){return r(d)(s)(o[s])}}for(var v in o)hasOwnProperty.call(o,v)&&(l=t(l)(c(v)));return l}}}};function n(t){return function(r){var i=[];for(var o in r)hasOwnProperty.call(r,o)&&i.push(t(o)(r[o]));return i}}e.toArrayWithKey=n})(C["Foreign.Object"]=C["Foreign.Object"]||{});(function(e){"use strict";e["Data.TraversableWithIndex"]=e["Data.TraversableWithIndex"]||{};var n=e["Data.TraversableWithIndex"],t=function(r){return r.traverseWithIndex};n.traverseWithIndex=t})(C);(function(e){"use strict";e.poke=function(n){return function(t){return function(r){return function(){return r[n]=t,r}}}}})(C["Foreign.Object.ST"]=C["Foreign.Object.ST"]||{});(function(e){"use strict";e["Foreign.Object.ST"]=e["Foreign.Object.ST"]||{};var n=e["Foreign.Object.ST"],t=e["Foreign.Object.ST"];n.poke=t.poke})(C);(function(e){"use strict";e["Foreign.Object"]=e["Foreign.Object"]||{};var n=e["Foreign.Object"],t=e["Foreign.Object"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Category"],l=e["Data.Foldable"],c=e["Data.Function"],v=e["Data.Functor"],s=e["Data.Monoid"],d=e["Data.Semigroup"],h=e["Data.Traversable"],p=e["Data.TraversableWithIndex"],m=e["Data.Tuple"],x=e["Foreign.Object.ST"],D=e["Unsafe.Coerce"],b=t.toArrayWithKey(function(F){return function($){return $}}),g=t._copyST,E=function(F){return function($){return t.runST(function(){var H=g($)();return F(H)(),H})}},k=function(F){return function($){return t._mapWithKey($,F)}},W=function(F){return function($){return E(x.poke(F)($))}},G={map:function(F){return function($){return t._fmapObject($,F)}}},_={mapWithIndex:k,Functor0:function(){return G}},u=function(F){return D.unsafeCoerce},a=t._foldM(c.applyFlipped),f=function(F){return function($){return a(function(Z){return function(H){return function(V){return d.append(F.Semigroup0())(Z)($(H)(V))}}})(s.mempty(F))}},O={foldl:function(F){return a(function($){return function(Z){return F($)}})},foldr:function(F){return function($){return function(Z){return l.foldr(l.foldableArray)(F)($)(b(Z))}}},foldMap:function(F){return function($){return f(F)(c.const($))}}},R={foldlWithIndex:function(F){return a(c.flip(F))},foldrWithIndex:function(F){return function($){return function(Z){return l.foldr(l.foldableArray)(m.uncurry(F))($)(t.toArrayWithKey(m.Tuple.create)(Z))}}},foldMapWithIndex:function(F){return f(F)},Foldable0:function(){return O}},B={traverseWithIndex:function(F){return function($){return function(Z){return a(function(H){return function(V){return function(J){return i.apply(F.Apply0())(v.map(F.Apply0().Functor0())(c.flip(W(V)))(H))($(V)(J))}}})(r.pure(F)(t.empty))(Z)}}},FunctorWithIndex0:function(){return _},FoldableWithIndex1:function(){return R},Traversable2:function(){return L}},L={traverse:function(F){var $=p.traverseWithIndex(B)(F);return function(Z){return $(c.const(Z))}},sequence:function(F){return h.traverse(L)(F)(o.identity(o.categoryFn))},Functor0:function(){return G},Foldable1:function(){return O}};n.insert=W,n.fromHomogeneous=u,n.values=b,n.traversableObject=L,n.empty=t.empty})(C);(function(e){"use strict";e["Data.Homogeneous.Record"]=e["Data.Homogeneous.Record"]||{};var n=e["Data.Homogeneous.Record"],t=e["Foreign.Object"],r=t.traversableObject,i=function(l){return function(c){return c}},o=function(l){return function(c){return c}};n.homogeneous=i,n.fromHomogeneous=o,n.traversableHomogeneous=r})(C);(function(e){"use strict";e.fromNumberImpl=function(n){return function(t){return function(r){return(r|0)===r?n(r):t}}},e.toNumber=function(n){return n},e.pow=function(n){return function(t){return Math.pow(n,t)|0}}})(C["Data.Int"]=C["Data.Int"]||{});(function(e){"use strict";e.isFinite=isFinite})(C["Data.Number"]=C["Data.Number"]||{});(function(e){"use strict";e["Data.Number"]=e["Data.Number"]||{};var n=e["Data.Number"],t=e["Data.Number"];n.isFinite=t.isFinite})(C);(function(e){"use strict";e.floor=Math.floor,e.pow=function(n){return function(t){return Math.pow(n,t)}},e.remainder=function(n){return function(t){return n%t}},e.round=Math.round,e.sin=Math.sin,e.pi=Math.PI})(C.Math=C.Math||{});(function(e){"use strict";e.Math=e.Math||{};var n=e.Math,t=e.Math;n.floor=t.floor,n.pow=t.pow,n.round=t.round,n.sin=t.sin,n.remainder=t.remainder,n.pi=t.pi})(C);(function(e){"use strict";e["Data.Int"]=e["Data.Int"]||{};var n=e["Data.Int"],t=e["Data.Int"],r=e["Data.Boolean"],i=e["Data.Bounded"],o=e["Data.Maybe"],l=e["Data.Number"],c=e.Math,v=t.fromNumberImpl(o.Just.create)(o.Nothing.value),s=function(p){if(!l.isFinite(p))return 0;if(p>=t.toNumber(i.top(i.boundedInt)))return i.top(i.boundedInt);if(p<=t.toNumber(i.bottom(i.boundedInt)))return i.bottom(i.boundedInt);if(r.otherwise)return o.fromMaybe(0)(v(p));throw new Error("Failed pattern match at Data.Int (line 66, column 1 - line 66, column 29): "+[p.constructor.name])},d=function(p){return s(c.round(p))},h=function(p){return s(c.floor(p))};n.fromNumber=v,n.floor=h,n.round=d,n.toNumber=t.toNumber,n.pow=t.pow})(C);(function(e){"use strict";e["Data.Profunctor"]=e["Data.Profunctor"]||{};var n=e["Data.Profunctor"],t=e["Control.Category"],r={dimap:function(l){return function(c){return function(v){return function(s){return c(v(l(s)))}}}}},i=function(l){return l.dimap},o=function(l){return function(c){return i(l)(c)(t.identity(t.categoryFn))}};n.dimap=i,n.lcmap=o,n.profunctorFn=r})(C);(function(e){"use strict";e["Data.Lens.Iso"]=e["Data.Lens.Iso"]||{};var n=e["Data.Lens.Iso"],t=e["Data.Profunctor"],r=function(i){return function(o){return function(l){return function(c){return t.dimap(l)(i)(o)(c)}}}};n.iso=r})(C);(function(e){"use strict";e["Data.Lens.Iso.Newtype"]=e["Data.Lens.Iso.Newtype"]||{};var n=e["Data.Lens.Iso.Newtype"],t=e["Data.Lens.Iso"],r=e["Data.Newtype"],i=function(o){return function(l){return function(c){return t.iso(r.unwrap())(r.wrap())(c)}}};n._Newtype=i})(C);(function(e){"use strict";e["Data.Profunctor.Strong"]=e["Data.Profunctor.Strong"]||{};var n=e["Data.Profunctor.Strong"],t=e["Data.Functor"],r=e["Data.Profunctor"],i=e["Data.Tuple"],o={first:function(v){return function(s){return new i.Tuple(v(s.value0),s.value1)}},second:t.map(i.functorTuple),Profunctor0:function(){return r.profunctorFn}},l=function(v){return v.second},c=function(v){return v.first};n.first=c,n.second=l,n.strongFn=o})(C);(function(e){"use strict";e["Data.Lens.Lens"]=e["Data.Lens.Lens"]||{};var n=e["Data.Lens.Lens"],t=e["Data.Profunctor"],r=e["Data.Profunctor.Strong"],i=e["Data.Tuple"],o=function(c){return function(v){return function(s){return t.dimap(v.Profunctor0())(c)(function(d){return d.value1(d.value0)})(r.first(v)(s))}}},l=function(c){return function(v){return function(s){return o(function(d){return new i.Tuple(c(d),function(h){return v(d)(h)})})(s)}}};n.lens=l})(C);(function(e){"use strict";e["Data.Lens.Record"]=e["Data.Lens.Record"]||{};var n=e["Data.Lens.Record"],t=e["Data.Function"],r=e["Data.Lens.Lens"],i=e.Record,o=function(l){return function(c){return function(v){return function(s){return function(d){return r.lens(i.get(l)()(s))(t.flip(i.set(l)()()(s)))(d)}}}}};n.prop=o})(C);(function(e){"use strict";e["Data.Lens.Setter"]=e["Data.Lens.Setter"]||{};var n=e["Data.Lens.Setter"],t=function(r){return r};n.over=t})(C);(function(e){"use strict";e["Data.Unfoldable"]=e["Data.Unfoldable"]||{};var n=e["Data.Unfoldable"],t=function(r){return r.unfoldr};n.unfoldr=t})(C);(function(e){"use strict";e["Data.Map.Internal"]=e["Data.Map.Internal"]||{};var n=e["Data.Map.Internal"],t=e["Control.Applicative"],r=e["Data.Foldable"],i=e["Data.Function"],o=e["Data.List.Types"],l=e["Data.Maybe"],c=e["Data.Ord"],v=e["Data.Ordering"],s=e["Data.Semigroup"],d=e["Data.Tuple"],h=e["Data.Unfoldable"],p=function(){function V(){}return V.value=new V,V}(),m=function(){function V(J,I,A,q){this.value0=J,this.value1=I,this.value2=A,this.value3=q}return V.create=function(J){return function(I){return function(A){return function(q){return new V(J,I,A,q)}}}},V}(),x=function(){function V(J,I,A,q,j,re,M){this.value0=J,this.value1=I,this.value2=A,this.value3=q,this.value4=j,this.value5=re,this.value6=M}return V.create=function(J){return function(I){return function(A){return function(q){return function(j){return function(re){return function(M){return new V(J,I,A,q,j,re,M)}}}}}}},V}(),D=function(){function V(J,I,A){this.value0=J,this.value1=I,this.value2=A}return V.create=function(J){return function(I){return function(A){return new V(J,I,A)}}},V}(),b=function(){function V(J,I,A){this.value0=J,this.value1=I,this.value2=A}return V.create=function(J){return function(I){return function(A){return new V(J,I,A)}}},V}(),g=function(){function V(J,I,A,q,j,re){this.value0=J,this.value1=I,this.value2=A,this.value3=q,this.value4=j,this.value5=re}return V.create=function(J){return function(I){return function(A){return function(q){return function(j){return function(re){return new V(J,I,A,q,j,re)}}}}}},V}(),E=function(){function V(J,I,A,q,j,re){this.value0=J,this.value1=I,this.value2=A,this.value3=q,this.value4=j,this.value5=re}return V.create=function(J){return function(I){return function(A){return function(q){return function(j){return function(re){return new V(J,I,A,q,j,re)}}}}}},V}(),k=function(){function V(J,I,A,q,j,re){this.value0=J,this.value1=I,this.value2=A,this.value3=q,this.value4=j,this.value5=re}return V.create=function(J){return function(I){return function(A){return function(q){return function(j){return function(re){return new V(J,I,A,q,j,re)}}}}}},V}(),W=function(){function V(J,I,A,q){this.value0=J,this.value1=I,this.value2=A,this.value3=q}return V.create=function(J){return function(I){return function(A){return function(q){return new V(J,I,A,q)}}}},V}(),G=function(V){return function(J){return new m(p.value,V,J,p.value)}},_=function(V){return function(J){var I=function(A){var q=!1,j;function re(M){if(M instanceof o.Nil)return q=!0,l.Nothing.value;if(M instanceof o.Cons){if(M.value0 instanceof p){A=M.value1;return}if(M.value0 instanceof m&&M.value0.value0 instanceof p&&M.value0.value3 instanceof p)return q=!0,l.Just.create(new d.Tuple(new d.Tuple(M.value0.value1,M.value0.value2),M.value1));if(M.value0 instanceof m&&M.value0.value0 instanceof p)return q=!0,l.Just.create(new d.Tuple(new d.Tuple(M.value0.value1,M.value0.value2),new o.Cons(M.value0.value3,M.value1)));if(M.value0 instanceof m){A=new o.Cons(M.value0.value0,new o.Cons(G(M.value0.value1)(M.value0.value2),new o.Cons(M.value0.value3,M.value1)));return}if(M.value0 instanceof x){A=new o.Cons(M.value0.value0,new o.Cons(G(M.value0.value1)(M.value0.value2),new o.Cons(M.value0.value3,new o.Cons(G(M.value0.value4)(M.value0.value5),new o.Cons(M.value0.value6,M.value1)))));return}throw new Error("Failed pattern match at Data.Map.Internal (line 591, column 18 - line 600, column 71): "+[M.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 590, column 3 - line 590, column 19): "+[M.constructor.name])}for(;!q;)j=re(A);return j};return h.unfoldr(V)(I)(new o.Cons(J,o.Nil.value))}},u=function(V){return function(J){var I=c.compare(V),A=function(q){var j=!1,re;function M(T){if(T instanceof p)return j=!0,l.Nothing.value;if(T instanceof m){var Q=I(J)(T.value1);if(Q instanceof v.EQ)return j=!0,new l.Just(T.value2);if(Q instanceof v.LT){q=T.value0;return}q=T.value3;return}if(T instanceof x){var K=I(J)(T.value1);if(K instanceof v.EQ)return j=!0,new l.Just(T.value2);var te=I(J)(T.value4);if(te instanceof v.EQ)return j=!0,new l.Just(T.value5);if(K instanceof v.LT){q=T.value0;return}if(te instanceof v.GT){q=T.value6;return}q=T.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 211, column 5 - line 211, column 22): "+[T.constructor.name])}for(;!j;)re=M(q);return re};return A}},a=function(V){if(V instanceof p)return o.Nil.value;if(V instanceof m)return s.append(o.semigroupList)(a(V.value0))(s.append(o.semigroupList)(t.pure(o.applicativeList)(V.value1))(a(V.value3)));if(V instanceof x)return s.append(o.semigroupList)(a(V.value0))(s.append(o.semigroupList)(t.pure(o.applicativeList)(V.value1))(s.append(o.semigroupList)(a(V.value3))(s.append(o.semigroupList)(t.pure(o.applicativeList)(V.value4))(a(V.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 620, column 1 - line 620, column 38): "+[V.constructor.name])},f=function(V){return V instanceof p},O=function(V){return function(J){return function(I){var A=V,q=J,j=!1,re;function M(T,Q,K){if(Q instanceof o.Nil)return j=!0,K;if(Q instanceof o.Cons){if(Q.value0 instanceof D){A=T,q=Q.value1,I=new m(K,Q.value0.value0,Q.value0.value1,Q.value0.value2);return}if(Q.value0 instanceof b){A=T,q=Q.value1,I=new m(Q.value0.value0,Q.value0.value1,Q.value0.value2,K);return}if(Q.value0 instanceof g){A=T,q=Q.value1,I=new x(K,Q.value0.value0,Q.value0.value1,Q.value0.value2,Q.value0.value3,Q.value0.value4,Q.value0.value5);return}if(Q.value0 instanceof E){A=T,q=Q.value1,I=new x(Q.value0.value0,Q.value0.value1,Q.value0.value2,K,Q.value0.value3,Q.value0.value4,Q.value0.value5);return}if(Q.value0 instanceof k){A=T,q=Q.value1,I=new x(Q.value0.value0,Q.value0.value1,Q.value0.value2,Q.value0.value3,Q.value0.value4,Q.value0.value5,K);return}throw new Error("Failed pattern match at Data.Map.Internal (line 432, column 3 - line 437, column 88): "+[Q.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 429, column 1 - line 429, column 80): "+[Q.constructor.name,K.constructor.name])}for(;!j;)re=M(A,q,I);return re}}},R=function(V){return function(J){return function(I){var A=function(re){return function(M){var T=re,Q=!1,K;function te(S,y){if(S instanceof o.Nil)return Q=!0,new m(y.value0,y.value1,y.value2,y.value3);if(S instanceof o.Cons){if(S.value0 instanceof D)return Q=!0,O(V)(S.value1)(new x(y.value0,y.value1,y.value2,y.value3,S.value0.value0,S.value0.value1,S.value0.value2));if(S.value0 instanceof b)return Q=!0,O(V)(S.value1)(new x(S.value0.value0,S.value0.value1,S.value0.value2,y.value0,y.value1,y.value2,y.value3));if(S.value0 instanceof g){T=S.value1,M=new W(new m(y.value0,y.value1,y.value2,y.value3),S.value0.value0,S.value0.value1,new m(S.value0.value2,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof E){T=S.value1,M=new W(new m(S.value0.value0,S.value0.value1,S.value0.value2,y.value0),y.value1,y.value2,new m(y.value3,S.value0.value3,S.value0.value4,S.value0.value5));return}if(S.value0 instanceof k){T=S.value1,M=new W(new m(S.value0.value0,S.value0.value1,S.value0.value2,S.value0.value3),S.value0.value4,S.value0.value5,new m(y.value0,y.value1,y.value2,y.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 468, column 5 - line 473, column 108): "+[S.value0.constructor.name,y.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 465, column 3 - line 465, column 56): "+[S.constructor.name,y.constructor.name])}for(;!Q;)K=te(T,M);return K}},q=c.compare(V),j=function(re){return function(M){var T=re,Q=!1,K;function te(S,y){if(y instanceof p)return Q=!0,A(S)(new W(p.value,J,I,p.value));if(y instanceof m){var N=q(J)(y.value1);if(N instanceof v.EQ)return Q=!0,O(V)(S)(new m(y.value0,J,I,y.value3));if(N instanceof v.LT){T=new o.Cons(new D(y.value1,y.value2,y.value3),S),M=y.value0;return}T=new o.Cons(new b(y.value0,y.value1,y.value2),S),M=y.value3;return}if(y instanceof x){var U=q(J)(y.value1);if(U instanceof v.EQ)return Q=!0,O(V)(S)(new x(y.value0,J,I,y.value3,y.value4,y.value5,y.value6));var De=q(J)(y.value4);if(De instanceof v.EQ)return Q=!0,O(V)(S)(new x(y.value0,y.value1,y.value2,y.value3,J,I,y.value6));if(U instanceof v.LT){T=new o.Cons(new g(y.value1,y.value2,y.value3,y.value4,y.value5,y.value6),S),M=y.value0;return}if(U instanceof v.GT&&De instanceof v.LT){T=new o.Cons(new E(y.value0,y.value1,y.value2,y.value4,y.value5,y.value6),S),M=y.value3;return}T=new o.Cons(new k(y.value0,y.value1,y.value2,y.value3,y.value4,y.value5),S),M=y.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 448, column 3 - line 448, column 55): "+[S.constructor.name,y.constructor.name])}for(;!Q;)K=te(T,M);return K}};return j(o.Nil.value)}}},B=function(V){return function(J){var I=function(M){return function(T){var Q=M,K=!1,te;function S(y,N){if(y instanceof o.Nil)return K=!0,N;if(y instanceof o.Cons){if(y.value0 instanceof D&&y.value0.value2 instanceof p&&N instanceof p)return K=!0,O(V)(y.value1)(new m(p.value,y.value0.value0,y.value0.value1,p.value));if(y.value0 instanceof b&&y.value0.value0 instanceof p&&N instanceof p)return K=!0,O(V)(y.value1)(new m(p.value,y.value0.value1,y.value0.value2,p.value));if(y.value0 instanceof D&&y.value0.value2 instanceof m){Q=y.value1,T=new x(N,y.value0.value0,y.value0.value1,y.value0.value2.value0,y.value0.value2.value1,y.value0.value2.value2,y.value0.value2.value3);return}if(y.value0 instanceof b&&y.value0.value0 instanceof m){Q=y.value1,T=new x(y.value0.value0.value0,y.value0.value0.value1,y.value0.value0.value2,y.value0.value0.value3,y.value0.value1,y.value0.value2,N);return}if(y.value0 instanceof D&&y.value0.value2 instanceof x)return K=!0,O(V)(y.value1)(new m(new m(N,y.value0.value0,y.value0.value1,y.value0.value2.value0),y.value0.value2.value1,y.value0.value2.value2,new m(y.value0.value2.value3,y.value0.value2.value4,y.value0.value2.value5,y.value0.value2.value6)));if(y.value0 instanceof b&&y.value0.value0 instanceof x)return K=!0,O(V)(y.value1)(new m(new m(y.value0.value0.value0,y.value0.value0.value1,y.value0.value0.value2,y.value0.value0.value3),y.value0.value0.value4,y.value0.value0.value5,new m(y.value0.value0.value6,y.value0.value1,y.value0.value2,N)));if(y.value0 instanceof g&&y.value0.value2 instanceof p&&y.value0.value5 instanceof p&&N instanceof p)return K=!0,O(V)(y.value1)(new x(p.value,y.value0.value0,y.value0.value1,p.value,y.value0.value3,y.value0.value4,p.value));if(y.value0 instanceof E&&y.value0.value0 instanceof p&&y.value0.value5 instanceof p&&N instanceof p)return K=!0,O(V)(y.value1)(new x(p.value,y.value0.value1,y.value0.value2,p.value,y.value0.value3,y.value0.value4,p.value));if(y.value0 instanceof k&&y.value0.value0 instanceof p&&y.value0.value3 instanceof p&&N instanceof p)return K=!0,O(V)(y.value1)(new x(p.value,y.value0.value1,y.value0.value2,p.value,y.value0.value4,y.value0.value5,p.value));if(y.value0 instanceof g&&y.value0.value2 instanceof m)return K=!0,O(V)(y.value1)(new m(new x(N,y.value0.value0,y.value0.value1,y.value0.value2.value0,y.value0.value2.value1,y.value0.value2.value2,y.value0.value2.value3),y.value0.value3,y.value0.value4,y.value0.value5));if(y.value0 instanceof E&&y.value0.value0 instanceof m)return K=!0,O(V)(y.value1)(new m(new x(y.value0.value0.value0,y.value0.value0.value1,y.value0.value0.value2,y.value0.value0.value3,y.value0.value1,y.value0.value2,N),y.value0.value3,y.value0.value4,y.value0.value5));if(y.value0 instanceof E&&y.value0.value5 instanceof m)return K=!0,O(V)(y.value1)(new m(y.value0.value0,y.value0.value1,y.value0.value2,new x(N,y.value0.value3,y.value0.value4,y.value0.value5.value0,y.value0.value5.value1,y.value0.value5.value2,y.value0.value5.value3)));if(y.value0 instanceof k&&y.value0.value3 instanceof m)return K=!0,O(V)(y.value1)(new m(y.value0.value0,y.value0.value1,y.value0.value2,new x(y.value0.value3.value0,y.value0.value3.value1,y.value0.value3.value2,y.value0.value3.value3,y.value0.value4,y.value0.value5,N)));if(y.value0 instanceof g&&y.value0.value2 instanceof x)return K=!0,O(V)(y.value1)(new x(new m(N,y.value0.value0,y.value0.value1,y.value0.value2.value0),y.value0.value2.value1,y.value0.value2.value2,new m(y.value0.value2.value3,y.value0.value2.value4,y.value0.value2.value5,y.value0.value2.value6),y.value0.value3,y.value0.value4,y.value0.value5));if(y.value0 instanceof E&&y.value0.value0 instanceof x)return K=!0,O(V)(y.value1)(new x(new m(y.value0.value0.value0,y.value0.value0.value1,y.value0.value0.value2,y.value0.value0.value3),y.value0.value0.value4,y.value0.value0.value5,new m(y.value0.value0.value6,y.value0.value1,y.value0.value2,N),y.value0.value3,y.value0.value4,y.value0.value5));if(y.value0 instanceof E&&y.value0.value5 instanceof x)return K=!0,O(V)(y.value1)(new x(y.value0.value0,y.value0.value1,y.value0.value2,new m(N,y.value0.value3,y.value0.value4,y.value0.value5.value0),y.value0.value5.value1,y.value0.value5.value2,new m(y.value0.value5.value3,y.value0.value5.value4,y.value0.value5.value5,y.value0.value5.value6)));if(y.value0 instanceof k&&y.value0.value3 instanceof x)return K=!0,O(V)(y.value1)(new x(y.value0.value0,y.value0.value1,y.value0.value2,new m(y.value0.value3.value0,y.value0.value3.value1,y.value0.value3.value2,y.value0.value3.value3),y.value0.value3.value4,y.value0.value3.value5,new m(y.value0.value3.value6,y.value0.value4,y.value0.value5,N)));throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 9 - line 542, column 136): "+[y.value0.constructor.name,N.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 522, column 5 - line 542, column 136): "+[y.constructor.name])}for(;!K;)te=S(Q,T);return te}},A=function(M){return function(T){var Q=M,K=!1,te;function S(y,N){if(N instanceof m&&N.value0 instanceof p&&N.value3 instanceof p)return K=!0,I(y)(p.value);if(N instanceof m){Q=new o.Cons(new b(N.value0,N.value1,N.value2),y),T=N.value3;return}if(N instanceof x&&N.value0 instanceof p&&N.value3 instanceof p&&N.value6 instanceof p)return K=!0,I(new o.Cons(new b(p.value,N.value1,N.value2),y))(p.value);if(N instanceof x){Q=new o.Cons(new k(N.value0,N.value1,N.value2,N.value3,N.value4,N.value5),y),T=N.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 554, column 5 - line 558, column 107): "+[N.constructor.name])}for(;!K;)te=S(Q,T);return te}},q=function(M){var T=!1,Q;function K(te){if(te instanceof m&&te.value3 instanceof p)return T=!0,{key:te.value1,value:te.value2};if(te instanceof m){M=te.value3;return}if(te instanceof x&&te.value6 instanceof p)return T=!0,{key:te.value4,value:te.value5};if(te instanceof x){M=te.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 545, column 33 - line 549, column 45): "+[te.constructor.name])}for(;!T;)Q=K(M);return Q},j=c.compare(V),re=function(M){return function(T){var Q=M,K=!1,te;function S(y,N){if(N instanceof p)return K=!0,l.Nothing.value;if(N instanceof m){var U=j(J)(N.value1);if(N.value3 instanceof p&&U instanceof v.EQ)return K=!0,new l.Just(new d.Tuple(N.value2,I(y)(p.value)));if(U instanceof v.EQ){var De=q(N.value0);return K=!0,new l.Just(new d.Tuple(N.value2,A(new o.Cons(new D(De.key,De.value,N.value3),y))(N.value0)))}if(U instanceof v.LT){Q=new o.Cons(new D(N.value1,N.value2,N.value3),y),T=N.value0;return}Q=new o.Cons(new b(N.value0,N.value1,N.value2),y),T=N.value3;return}if(N instanceof x){var Ee=function(){return N.value0 instanceof p&&N.value3 instanceof p&&N.value6 instanceof p}(),U=j(J)(N.value4),X=j(J)(N.value1);if(Ee&&X instanceof v.EQ)return K=!0,new l.Just(new d.Tuple(N.value2,O(V)(y)(new m(p.value,N.value4,N.value5,p.value))));if(Ee&&U instanceof v.EQ)return K=!0,new l.Just(new d.Tuple(N.value5,O(V)(y)(new m(p.value,N.value1,N.value2,p.value))));if(X instanceof v.EQ){var De=q(N.value0);return K=!0,new l.Just(new d.Tuple(N.value2,A(new o.Cons(new g(De.key,De.value,N.value3,N.value4,N.value5,N.value6),y))(N.value0)))}if(U instanceof v.EQ){var De=q(N.value3);return K=!0,new l.Just(new d.Tuple(N.value5,A(new o.Cons(new E(N.value0,N.value1,N.value2,De.key,De.value,N.value6),y))(N.value3)))}if(X instanceof v.LT){Q=new o.Cons(new g(N.value1,N.value2,N.value3,N.value4,N.value5,N.value6),y),T=N.value0;return}if(X instanceof v.GT&&U instanceof v.LT){Q=new o.Cons(new E(N.value0,N.value1,N.value2,N.value4,N.value5,N.value6),y),T=N.value3;return}Q=new o.Cons(new k(N.value0,N.value1,N.value2,N.value3,N.value4,N.value5),y),T=N.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 34 - line 518, column 80): "+[N.constructor.name])}for(;!K;)te=S(Q,T);return te}};return re(o.Nil.value)}},L=p.value,F=function(V){return function(J){return function(I){return l.maybe(I)(d.snd)(B(V)(J)(I))}}},$=function(V){return function(J){return function(I){return function(A){var q=J(u(V)(I)(A));if(q instanceof l.Nothing)return F(V)(I)(A);if(q instanceof l.Just)return R(V)(I)(q.value0)(A);throw new Error("Failed pattern match at Data.Map.Internal (line 563, column 15 - line 565, column 25): "+[q.constructor.name])}}}},Z=function(V){return function(J){return function(I){return function(A){var q=function(j){return function(re){return $(V)(function(){var M=l.maybe(re.value1)(J(re.value1));return function(T){return l.Just.create(M(T))}}())(re.value0)(j)}};return r.foldl(o.foldableList)(q)(A)(_(o.unfoldableList)(I))}}}},H=function(V){return Z(V)(i.const)};n.empty=L,n.isEmpty=f,n.singleton=G,n.insert=R,n.delete=F,n.keys=a,n.union=H})(C);(function(e){"use strict";e.nullable=function(n,t,r){return n==null?t:r(n)}})(C["Data.Nullable"]=C["Data.Nullable"]||{});(function(e){"use strict";e["Data.Nullable"]=e["Data.Nullable"]||{};var n=e["Data.Nullable"],t=e["Data.Nullable"],r=e["Data.Maybe"],i=function(o){return t.nullable(o,r.Nothing.value,r.Just.create)};n.toMaybe=i})(C);(function(e){"use strict";e["Data.Set"]=e["Data.Set"]||{};var n=e["Data.Set"],t=e["Data.Foldable"],r=e["Data.List.Types"],i=e["Data.Map.Internal"],o=e["Data.Unit"],l=function(b){return function(g){return function(E){return i.union(b)(g)(E)}}},c=function(b){return i.keys(b)},v=function(b){return i.singleton(b)(o.unit)},s=function(b){return{append:l(b)}},d=function(b){return i.isEmpty(b)},h=function(b){return function(g){return function(E){return i.insert(b)(g)(o.unit)(E)}}},p={foldMap:function(b){return function(g){var E=t.foldMap(r.foldableList)(b)(g);return function(k){return E(c(k))}}},foldl:function(b){return function(g){var E=t.foldl(r.foldableList)(b)(g);return function(k){return E(c(k))}}},foldr:function(b){return function(g){var E=t.foldr(r.foldableList)(b)(g);return function(k){return E(c(k))}}}},m=i.empty,x=function(b){return{mempty:m,Semigroup0:function(){return s(b)}}},D=function(b){return function(g){return function(E){return i.delete(b)(g)(E)}}};n.empty=m,n.isEmpty=d,n.singleton=v,n.insert=h,n.delete=D,n.monoidSet=x,n.semigroupSet=s,n.foldableSet=p})(C);(function(e){"use strict";e.showIntImpl=function(n){return n.toString()},e.showNumberImpl=function(n){var t=n.toString();return isNaN(t+".0")?t:t+".0"}})(C["Data.Show"]=C["Data.Show"]||{});(function(e){"use strict";e["Data.Show"]=e["Data.Show"]||{};var n=e["Data.Show"],t=e["Data.Show"],r={show:t.showNumberImpl},i={show:t.showIntImpl},o=function(l){return l.show};n.show=o,n.showInt=i,n.showNumber=r})(C);(function(e){"use strict";e.intercalate=function(n){return function(t){var r=t.length;if(r===0)return"";for(var i=t[0],o=1;o<r;o++)i=i+n+t[o];return i}}})(C["Data.Show.Generic"]=C["Data.Show.Generic"]||{});(function(e){"use strict";e["Data.Show.Generic"]=e["Data.Show.Generic"]||{};var n=e["Data.Show.Generic"],t=e["Data.Show.Generic"],r=e["Data.Generic.Rep"],i=e["Data.Semigroup"],o=e["Data.Symbol"],l=e["Type.Proxy"],c={genericShowArgs:function(m){return[]}},v=function(m){return m.genericShowArgs},s=function(m){return function(x){return{"genericShow'":function(D){var b=o.reflectSymbol(x)(l.Proxy.value),g=v(m)(D);return g.length===0?b:"("+(t.intercalate(" ")(i.append(i.semigroupArray)([b])(g))+")")}}}},d=function(m){return m["genericShow'"]},h=function(m){return function(x){return{"genericShow'":function(D){if(D instanceof r.Inl)return d(m)(D.value0);if(D instanceof r.Inr)return d(x)(D.value0);throw new Error("Failed pattern match at Data.Show.Generic (line 26, column 1 - line 28, column 40): "+[D.constructor.name])}}}},p=function(m){return function(x){return function(D){return d(x)(r.from(m)(D))}}};n.genericShow=p,n.genericShowArgsNoArguments=c,n.genericShowSum=h,n.genericShowConstructor=s})(C);(function(e){"use strict";e["Data.Time.Duration"]=e["Data.Time.Duration"]||{};var n=e["Data.Time.Duration"],t=e["Data.Newtype"],r=function(c){return c},i=function(c){return c},o=function(c){return c.toDuration},l={fromDuration:t.over()()(r)(function(c){return c*1e3}),toDuration:t.over()()(i)(function(c){return c/1e3})};n.toDuration=o,n.durationSeconds=l})(C);(function(e){"use strict";e["Data.Typelevel.Undefined"]=e["Data.Typelevel.Undefined"]||{};var n=e["Data.Typelevel.Undefined"],t=e["Data.Unit"],r=t.unit;n.undefined=r})(C);(function(e){"use strict";e["Data.Typelevel.Num.Sets"]=e["Data.Typelevel.Num.Sets"]||{};var n=e["Data.Typelevel.Num.Sets"],t=e["Data.Typelevel.Undefined"],r=function(_){return _.toInt},i=function(_){return function(u){return r(_)(t.undefined)}},o={toInt:function(_){return 8}},l={Nat0:function(){return o}},c={toInt:function(_){return 7}},v={Nat0:function(){return c}},s={toInt:function(_){return 6}},d={Nat0:function(){return s}},h={toInt:function(_){return 5}},p={Nat0:function(){return h}},m={toInt:function(_){return 4}},x={Nat0:function(){return m}},D={toInt:function(_){return 3}},b={Nat0:function(){return D}},g={toInt:function(_){return 2}},E={Nat0:function(){return g}},k={toInt:function(_){return 1}},W={Nat0:function(){return k}},G={toInt:function(_){return 0}};n.toInt=r,n["toInt'"]=i,n.natD0=G,n.natD1=k,n.natD2=g,n.natD3=D,n.natD4=m,n.natD5=h,n.natD6=s,n.natD7=c,n.natD8=o,n.posD1=W,n.posD2=E,n.posD3=b,n.posD4=x,n.posD5=p,n.posD6=d,n.posD7=v,n.posD8=l})(C);(function(e){"use strict";e["Data.Typelevel.Num.Ops"]=e["Data.Typelevel.Num.Ops"]||{};var n=e["Data.Typelevel.Num.Ops"],t=e["Data.Typelevel.Num.Sets"],r=function(O){return function(R){return function(B){return function(L){return function(F){return{Nat0:B.Nat1,Pos1:function(){return O}}}}}}},i={Nat0:function(){return t.natD7},Nat1:function(){return t.natD8}},o={Nat0:function(){return t.natD6},Nat1:function(){return t.natD8}},l={Nat0:function(){return t.natD5},Nat1:function(){return t.natD8}},c={Nat0:function(){return t.natD4},Nat1:function(){return t.natD8}},v={Nat0:function(){return t.natD4},Nat1:function(){return t.natD5}},s={Nat0:function(){return t.natD3},Nat1:function(){return t.natD8}},d={Nat0:function(){return t.natD3},Nat1:function(){return t.natD5}},h={Nat0:function(){return t.natD2},Nat1:function(){return t.natD8}},p={Nat0:function(){return t.natD2},Nat1:function(){return t.natD5}},m={Nat0:function(){return t.natD1},Nat1:function(){return t.natD8}},x={Nat0:function(){return t.natD1},Nat1:function(){return t.natD5}},D={Nat0:function(){return t.natD0},Nat1:function(){return t.natD8}},b={Nat0:function(){return t.natD0},Nat1:function(){return t.natD5}},g={Nat0:function(){return t.natD0},Nat1:function(){return t.natD8}},E={Nat0:function(){return t.natD0},Nat1:function(){return t.natD7}},k={Nat0:function(){return t.natD0},Nat1:function(){return t.natD6}},W={Nat0:function(){return t.natD0},Nat1:function(){return t.natD5}},G={Nat0:function(){return t.natD0},Nat1:function(){return t.natD4}},_={Nat0:function(){return t.natD0},Nat1:function(){return t.natD3}},u={Nat0:function(){return t.natD0},Nat1:function(){return t.natD2}},a={Nat0:function(){return t.natD0},Nat1:function(){return t.natD1}},f={Nat0:function(){return t.natD0},Nat1:function(){return t.natD0}};n.typelevelSucc=r,n.divMod10D0D0=f,n.divMod10D1D0=a,n.divMod10D2D0=u,n.divMod10D3D0=_,n.divMod10D4D0=G,n.divMod10D5D0=W,n.divMod10D6D0=k,n.divMod10D7D0=E,n.divMod10D8D0=g,n.trichD0D5=b,n.trichD0D8=D,n.trichD1D5=x,n.trichD1D8=m,n.trichD2D5=p,n.trichD2D8=h,n.trichD3D5=d,n.trichD3D8=s,n.trichD4D5=v,n.trichD4D8=c,n.trichD5D8=l,n.trichD6D8=o,n.trichD7D8=i})(C);(function(e){"use strict";e["Data.Typelevel.Num.Reps"]=e["Data.Typelevel.Num.Reps"]||{};var n=e["Data.Typelevel.Num.Reps"],t=e["Data.Typelevel.Undefined"],r=t.undefined,i=t.undefined,o=t.undefined,l=t.undefined,c=t.undefined,v=t.undefined,s=t.undefined,d=t.undefined;n.d0=d,n.d1=s,n.d2=v,n.d3=c,n.d4=l,n.d5=o,n.d6=i,n.d7=r})(C);(function(e){"use strict";e.toInt=function(n){return n|0},e.toNumber=function(n){return n}})(C["Data.UInt"]=C["Data.UInt"]||{});(function(e){"use strict";e["Data.UInt"]=e["Data.UInt"]||{};var n=e["Data.UInt"],t=e["Data.UInt"];n.toInt=t.toInt,n.toNumber=t.toNumber})(C);(function(e){"use strict";e["Data.Variant"]=e["Data.Variant"]||{};var n=e["Data.Variant"],t=e["Control.Applicative"],r=e["Control.Plus"],i=e["Data.Function"],o=e["Data.Symbol"],l=e["Partial.Unsafe"],c=e["Record.Unsafe"],v=function(x){return function(D){return function(b){return function(g){return function(E){return function(k){return c.unsafeHas(k.type)(g)?c.unsafeGet(k.type)(g)(k.value):E(k)}}}}}},s=function(x){return function(D){return function(b){return function(g){return function(E){return function(k){return k.type===o.reflectSymbol(D)(b)?g(k.value):E(k)}}}}}},d=function(x){return function(D){return function(b){return function(g){return s()(D)(g)(t.pure(b.Applicative0()))(i.const(r.empty(b.Plus1())))}}}},h=function(x){return function(D){return function(b){return function(g){return{type:o.reflectSymbol(D)(b),value:g}}}}},p=function(x){return l.unsafeCrashWith("Data.Variant: pattern match failure ["+(x.type+"]"))},m=function(x){return function(D){return function(b){return function(g){return v()()()(g)(p)}}}};n.inj=h,n.prj=d,n.match=m})(C);(function(e){"use strict";e["Data.Variant.Maybe"]=e["Data.Variant.Maybe"]||{};var n=e["Data.Variant.Maybe"],t=e["Data.Unit"],r=e["Data.Variant"],i=e["Type.Proxy"],o=function(v){return v},l=o(r.inj()({reflectSymbol:function(){return"nothing"}})(i.Proxy.value)(t.unit)),c=function(){var v=r.inj()({reflectSymbol:function(){return"just"}})(i.Proxy.value);return function(s){return o(v(s))}}();n.just=c,n.nothing=l})(C);(function(e){"use strict";e["Data.Vec"]=e["Data.Vec"]||{};var n=e["Data.Vec"],t=e["Data.Array"],r=e["Data.Functor"],i=e["Data.Traversable"],o=e["Data.Typelevel.Num.Sets"],l=e["Type.Proxy"],c=i.traversableArray,v=function(x){return x},s=function(x){return function(D){return function(b){return function(g){return function(E){return function(k){return function(W){return function(G){return t.range(o.toInt(x)(W))(o.toInt(D)(G))}}}}}}}},d=function(x){return function(D){return function(b){return function(g){return b[o.toInt(x)(g)]}}}},h=function(x){return function(D){var b=o["toInt'"](x)(l.Proxy.value),g=function(){return b===0?[]:t.range(0)(b-1|0)}();return r.map(r.functorArray)(D)(g)}},p=[],m=function(x){return function(D){return function(b){return t.cons(D)(b)}}};n.empty=p,n.cons=m,n.fill=h,n.toArray=v,n.index=d,n.traversableVec=c})(C);(function(e){"use strict";e["Deku.Attribute"]=e["Deku.Attribute"]||{};var n=e["Deku.Attribute"],t=e["Data.Function"],r=e["Data.Functor"],i=e["Data.Variant"],o=e.Effect,l=e["Safe.Coerce"],c=e["Type.Proxy"],v=function(b){return b},s=function(b){return b},d=l.coerce(),h=s,p=i.inj()({reflectSymbol:function(){return"prop"}})(c.Proxy.value),m=i.inj()({reflectSymbol:function(){return"cb"}})(c.Proxy.value),x=function(){var b=r.map(r.functorFn)(r.map(o.functorEffect)(t.const(!0)));return function(g){return v(b(g))}}(),D=function(b){return b.attr};n.attr=D,n.unsafeUnAttribute=d,n.unsafeAttribute=h,n["prop'"]=p,n["cb'"]=m,n.cb=x})(C);(function(e){"use strict";e["Deku.Core"]=e["Deku.Core"]||{};var n=e["Deku.Core"],t=function(r){return r};n.Element=t})(C);(function(e){"use strict";e.new=function(n){return function(){return{value:n}}},e.read=function(n){return function(){return n.value}},e.modifyImpl=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}},e.write=function(n){return function(t){return function(){t.value=n}}}})(C["Effect.Ref"]=C["Effect.Ref"]||{});(function(e){"use strict";e["Effect.Ref"]=e["Effect.Ref"]||{};var n=e["Effect.Ref"],t=e["Effect.Ref"],r=e["Data.Functor"],i=e.Effect,o=t.modifyImpl,l=function(v){return o(function(s){var d=v(s);return{state:d,value:d}})},c=function(v){return function(s){return r.void(i.functorEffect)(l(v)(s))}};n.modify=l,n.modify_=c,n.new=t.new,n.read=t.read,n.write=t.write})(C);(function(e){"use strict";e.unsafePerformEffect=function(n){return n()}})(C["Effect.Unsafe"]=C["Effect.Unsafe"]||{});(function(e){"use strict";e["Effect.Unsafe"]=e["Effect.Unsafe"]||{};var n=e["Effect.Unsafe"],t=e["Effect.Unsafe"];n.unsafePerformEffect=t.unsafePerformEffect})(C);(function(e){"use strict";e.reallyUnsafeRefEq=function(n){return function(t){return n===t}}})(C["Unsafe.Reference"]=C["Unsafe.Reference"]||{});(function(e){"use strict";e["Unsafe.Reference"]=e["Unsafe.Reference"]||{};var n=e["Unsafe.Reference"],t=e["Unsafe.Reference"],r=t.reallyUnsafeRefEq;n.unsafeRefEq=r})(C);(function(e){"use strict";e["FRP.Event"]=e["FRP.Event"]||{};var n=e["FRP.Event"],t=e["Control.Applicative"],r=e["Control.Apply"],i=e["Control.Bind"],o=e["Control.Category"],l=e["Data.Array"],c=e["Data.Either"],v=e["Data.Filterable"],s=e["Data.Foldable"],d=e["Data.Function"],h=e["Data.HeytingAlgebra"],p=e["Data.Maybe"],m=e["Data.Semigroup"],x=e["Data.Unit"],D=e.Effect,b=e["Effect.Ref"],g=e["Effect.Unsafe"],E=e["Unsafe.Reference"],k=function(I){return I},W=function(I){return function(A){return I(A)}},G=function(I){return function(A){return function(q){return function(){var re=b.new(p.Nothing.value)(),M=I(function(Q){return b.write(new p.Just(Q))(re)})(),T=A(function(Q){return i.bind(D.bindEffect)(b.read(re))(s.traverse_(D.applicativeEffect)(s.foldableMaybe)(function(K){return q(Q(K))}))})();return r.applySecond(D.applyEffect)(M)(T)}}}},_=k,u=function(I){return function(A){return function(){var j=b.new(p.Nothing.value)(),re=I(function(M){return function(){i.bind(D.bindEffect)(b.read(j))(s.sequence_(D.applicativeEffect)(s.foldableMaybe))();var Q=W(M)(A)();return b.write(new p.Just(Q))(j)()}})();return function(){return i.bind(D.bindEffect)(b.read(j))(s.sequence_(D.applicativeEffect)(s.foldableMaybe))(),re()}}}},a={map:function(I){return function(A){return function(q){return A(function(j){return q(I(j))})}}}},f=function(I){return function(A){return function(q){return function(j){return function(){var M=b.new(q)();return A(function(T){return i.bind(D.bindEffect)(b.modify(I(T))(M))(j)})()}}}}},O=function(I){return function(A){return function(q){return A(function(j){var re=I(j);if(re instanceof p.Just)return q(re.value0);if(re instanceof p.Nothing)return t.pure(D.applicativeEffect)(x.unit);throw new Error("Failed pattern match at FRP.Event (line 106, column 13 - line 108, column 27): "+[re.constructor.name])})}}},R=function(I){return O(function(A){var q=I(A);if(q)return new p.Just(A);if(!q)return p.Nothing.value;throw new Error("Failed pattern match at FRP.Event (line 64, column 13 - line 66, column 25): "+[q.constructor.name])})},B=function(){var A=b.new([])();return{event:function(q){return function(){return b.modify(function(re){return m.append(m.semigroupArray)(re)([q])})(A)(),function(){return b.modify(l.deleteBy(E.unsafeRefEq)(q))(A)(),x.unit}}},push:function(q){return i.bind(D.bindEffect)(b.read(A))(s.traverse_(D.applicativeEffect)(s.foldableArray)(function(j){return j(q)}))}}},L=function(I){var A=g.unsafePerformEffect(B),q=I(A.event);return function(j){return function(){var M=W(q.input)(A.push)(),T=W(q.output)(j)();return r.applySecond(D.applyEffect)(M)(T)}}},F={compact:O(o.identity(o.categoryFn)),separate:function(I){return{left:O(function(A){if(A instanceof c.Left)return new p.Just(A.value0);if(A instanceof c.Right)return p.Nothing.value;throw new Error("Failed pattern match at FRP.Event (line 47, column 13 - line 49, column 33): "+[A.constructor.name])})(I),right:O(function(A){if(A instanceof c.Right)return new p.Just(A.value0);if(A instanceof c.Left)return p.Nothing.value;throw new Error("Failed pattern match at FRP.Event (line 54, column 13 - line 56, column 32): "+[A.constructor.name])})(I)}}},$={filter:R,filterMap:O,partition:function(I){return function(A){return{yes:R(I)(A),no:R(function(){var q=h.not(h.heytingAlgebraBoolean);return function(j){return q(I(j))}}())(A)}}},partitionMap:function(I){return function(A){return{left:v.filterMap($)(function(){var q=c.either(p.Just.create)(d.const(p.Nothing.value));return function(j){return q(I(j))}}())(A),right:v.filterMap($)(function(q){return c.hush(I(q))})(A)}}},Compactable0:function(){return F},Functor1:function(){return a}},Z=function(I){return function(A){return function(){return A(I)(),t.pure(D.applicativeEffect)(x.unit)}}},H={alt:function(I){return function(A){return function(q){return function(){var re=I(q)(),M=A(q)();return r.applySecond(D.applyEffect)(re)(M)}}}},Functor0:function(){return a}},V={empty:function(I){return t.pure(D.applicativeEffect)(t.pure(D.applicativeEffect)(x.unit))},Alt0:function(){return H}},J={fold:f,keepLatest:u,sampleOn:G,fix:L,bang:Z,Plus0:function(){return V},Filterable1:function(){return $}};n.create=B,n.makeEvent=_,n.subscribe=W,n.functorEvent=a,n.filterableEvent=$,n.altEvent=H,n.plusEvent=V,n.eventIsEvent=J})(C);(function(e){"use strict";e["FRP.Event.Class"]=e["FRP.Event.Class"]||{};var n=e["FRP.Event.Class"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Category"],o=e["Data.Filterable"],l=e["Data.Function"],c=e["Data.Functor"],v=e["Data.Maybe"],s=e["Data.Tuple"],d=function(E){return E.sampleOn},h=function(E){return E.keepLatest},p=function(E){return E.fold},m=function(E){return function(k){return function(W){return function(G){return o.filterMap(E.Filterable1())(s.snd)(p(E)(function(_){return function(u){return c.map(s.functorTuple)(r.pure(v.applicativeMaybe))(k(_)(u.value0))}})(W)(new s.Tuple(G,v.Nothing.value)))}}}},x=function(E){return function(k){var W=function(G){return function(_){if(_ instanceof v.Nothing)return new v.Just({now:G,last:v.Nothing.value});if(_ instanceof v.Just)return new v.Just({now:G,last:new v.Just(_.value0.now)});throw new Error("Failed pattern match at FRP.Event.Class (line 56, column 3 - line 56, column 50): "+[G.constructor.name,_.constructor.name])}};return o.filterMap(E.Filterable1())(i.identity(i.categoryFn))(p(E)(W)(k)(v.Nothing.value))}},D=function(E){return E.fix},b=function(E){return function(k){return function(W){return t.alt(E.Plus0().Alt0())(d(E)(k)(W))(d(E)(W)(c.map(E.Filterable1().Functor1())(l.applyFlipped)(k)))}}},g=function(E){return E.bang};n.fold=p,n.mapAccum=m,n.withLast=x,n.biSampleOn=b,n.sampleOn=d,n.keepLatest=h,n.bang=g,n.fix=D})(C);(function(e){"use strict";e["FRP.Behavior"]=e["FRP.Behavior"]||{};var n=e["FRP.Behavior"],t=e["Control.Alt"],r=e["Control.Semigroupoid"],i=e["Data.Function"],o=e["Data.Functor"],l=e["FRP.Event"],c=e["FRP.Event.Class"],v=function(g){return g},s=function(g){return function(E){return function(k){return c.sampleOn(g)(t.alt(g.Plus0().Alt0())(c.bang(g)(E))(k))}}},d=function(g){return function(E){return g(E)}},h=function(g){return{map:function(E){return function(k){return function(W){return k(o.map(g)(function(G){return function(_){return G(E(_))}})(W))}}}}},p=function(g){return function(E){return function(k){return function(W){return d(o.map(h(g.Filterable1().Functor1()))(E)(k))(o.map(g.Filterable1().Functor1())(i.applyFlipped)(W))}}}},m=function(g){return p(g)(i.const)},x=v,D=function(g){return function(E){return x(function(k){return c.keepLatest(l.eventIsEvent)(t.alt(l.altEvent)(c.bang(l.eventIsEvent)(d(g)(k)))(o.map(l.functorEvent)(function(W){return d(W)(k)})(E)))})}},b=function(g){return{apply:function(E){return function(k){return function(W){return k(E(o.map(g)(r.compose(r.semigroupoidFn))(W)))}}},Functor0:function(){return h(g)}}};n.behavior=x,n.step=s,n.sample=d,n.sampleBy=p,n.sample_=m,n.switcher=D,n.functorABehavior=h,n.applyABehavior=b})(C);(function(e){"use strict";e["Deku.Control"]=e["Deku.Control"]||{};var n=e["Deku.Control"],t=e["Data.Distributive"],r=e["Data.Foldable"],i=e["Data.Functor"],o=e["Data.Semigroup"],l=e["Data.Unit"],c=e["Deku.Attribute"],v=e["Deku.Core"],s=e["FRP.Behavior"],d=e["FRP.Event.Class"],h=function(W){return function(G){return function(_){return W.makeText({id:G,parent:_})}}},p=function(W){return function(G){return function(_){return function(u){return i.map(W)(function(a){return G.setText(function(f){return{id:_,text:f}}(a))})(u)}}}},m=function(W){return function(G){return function(_){return function(u){return i.map(W)(function(a){return G.setAttribute(function(f){return{id:_,key:f.key,value:f.value}}(c.unsafeUnAttribute(a)))})(u)}}}},x=function(W){return function(G){return function(_){return function(u){return W.makeElement({id:G,parent:_,tag:u})}}}},D=function(W){return function(G){var _=function(u){return function(a){return d.keepLatest(W)(i.mapFlipped(W.Filterable1().Functor1())(s.sample_(W)(a.ids)(d.bang(W)(l.unit)))(function(f){return r.oneOf(r.foldableArray)(W.Plus0())([d.bang(W)(h(a)(f)(u)),p(W.Filterable1().Functor1())(a)(f)(G)])}))}};return _}},b=function(W){return function(G){return D(W)(d.bang(W)(G))}},g=function(W){return function(G){return v.Element(i.map(i.functorFn)(i.map(i.functorFn)(r.oneOf(r.foldableArray)(W)))(i.map(i.functorFn)(t.distribute(t.distributiveFunction)(i.functorArray))(t.distribute(t.distributiveFunction)(i.functorArray)(i.map(i.functorArray)(function(_){return _})(G)))))}},E=function(W){return function(G){return function(_){return function(u){var a=function(f){return function(O){return d.keepLatest(W)(i.mapFlipped(W.Filterable1().Functor1())(s.sample_(W)(O.ids)(d.bang(W)(l.unit)))(function(R){return r.oneOf(r.foldableArray)(W.Plus0())(o.append(o.semigroupArray)([d.bang(W)(x(O)(R)(f)(G)),m(W.Filterable1().Functor1())(O)(R)(_)])(i.map(i.functorArray)(function(B){return B(R)(O)})(i.map(i.functorArray)(function(B){return B})(u))))}))}};return a}}}},k=function(W){return function(G){return function(_){return function(u){return d.keepLatest(W)(i.mapFlipped(W.Filterable1().Functor1())(s.sample_(W)(u.ids)(d.bang(W)(l.unit)))(function(a){return r.oneOf(r.foldableArray)(W.Plus0())([d.bang(W)(u.makeRoot({id:a,root:G})),function(f){return f}(_)(a)(u)])}))}}}};n.elementify=E,n.text=D,n.text_=b,n.deku=k,n.flatten=g})(C);(function(e){"use strict";e["Deku.DOM"]=e["Deku.DOM"]||{};var n=e["Deku.DOM"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"@canvas-hack@",value:t["cb'"](l)})}}};n.Draw2D=r,n.attrCanvas_Draw2DContext2=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Checked"]=e["Deku.DOM.Attr.Checked"]||{};var n=e["Deku.DOM.Attr.Checked"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"checked",value:t["prop'"](l)})}}};n.Checked=r,n.attrInput_CheckedString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Controls"]=e["Deku.DOM.Attr.Controls"]||{};var n=e["Deku.DOM.Attr.Controls"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"controls",value:t["prop'"](l)})}}};n.Controls=r,n.attrAudio_ControlsString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Height"]=e["Deku.DOM.Attr.Height"]||{};var n=e["Deku.DOM.Attr.Height"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"height",value:t["prop'"](l)})}}};n.Height=r,n.attrCanvas_HeightString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Max"]=e["Deku.DOM.Attr.Max"]||{};var n=e["Deku.DOM.Attr.Max"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"max",value:t["prop'"](l)})}}};n.Max=r,n.attrInput_MaxString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Min"]=e["Deku.DOM.Attr.Min"]||{};var n=e["Deku.DOM.Attr.Min"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"min",value:t["prop'"](l)})}}};n.Min=r,n.attrInput_MinString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.OnClick"]=e["Deku.DOM.Attr.OnClick"]||{};var n=e["Deku.DOM.Attr.OnClick"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"click",value:t["cb'"](l)})}}};n.OnClick=r,n.attrOnClickCb=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.OnInput"]=e["Deku.DOM.Attr.OnInput"]||{};var n=e["Deku.DOM.Attr.OnInput"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"input",value:t["cb'"](l)})}}};n.OnInput=r,n.attrOnInputCb=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Src"]=e["Deku.DOM.Attr.Src"]||{};var n=e["Deku.DOM.Attr.Src"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"src",value:t["prop'"](l)})}}};n.Src=r,n.attrAudio_SrcString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Step"]=e["Deku.DOM.Attr.Step"]||{};var n=e["Deku.DOM.Attr.Step"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"step",value:t["prop'"](l)})}}};n.Step=r,n.attrInput_StepString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Style"]=e["Deku.DOM.Attr.Style"]||{};var n=e["Deku.DOM.Attr.Style"],t=e["Deku.Attribute"],r=function(){function h(){}return h.value=new h,h}(),i={attr:function(h){return function(p){return t.unsafeAttribute({key:"style",value:t["prop'"](p)})}}},o={attr:function(h){return function(p){return t.unsafeAttribute({key:"style",value:t["prop'"](p)})}}},l={attr:function(h){return function(p){return t.unsafeAttribute({key:"style",value:t["prop'"](p)})}}},c={attr:function(h){return function(p){return t.unsafeAttribute({key:"style",value:t["prop'"](p)})}}},v={attr:function(h){return function(p){return t.unsafeAttribute({key:"style",value:t["prop'"](p)})}}},s={attr:function(h){return function(p){return t.unsafeAttribute({key:"style",value:t["prop'"](p)})}}},d={attr:function(h){return function(p){return t.unsafeAttribute({key:"style",value:t["prop'"](p)})}}};n.Style=r,n.attrA_StyleString=d,n.attrAudio_StyleString=s,n.attrButton_StyleString=v,n.attrCanvas_StyleString=c,n.attrDiv_StyleString=l,n.attrInput_StyleString=o,n.attrSpan_StyleString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Value"]=e["Deku.DOM.Attr.Value"]||{};var n=e["Deku.DOM.Attr.Value"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"value",value:t["prop'"](l)})}}};n.Value=r,n.attrInput_ValueString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Width"]=e["Deku.DOM.Attr.Width"]||{};var n=e["Deku.DOM.Attr.Width"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"width",value:t["prop'"](l)})}}};n.Width=r,n.attrCanvas_WidthString=i})(C);(function(e){"use strict";e["Deku.DOM.Attr.Xtype"]=e["Deku.DOM.Attr.Xtype"]||{};var n=e["Deku.DOM.Attr.Xtype"],t=e["Deku.Attribute"],r=function(){function o(){}return o.value=new o,o}(),i={attr:function(o){return function(l){return t.unsafeAttribute({key:"type",value:t["prop'"](l)})}}};n.Xtype=r,n.attrInput_XtypeString=i})(C);(function(e){"use strict";e["Deku.DOM.Elt.A"]=e["Deku.DOM.Elt.A"]||{};var n=e["Deku.DOM.Elt.A"],t=e["Deku.Control"],r=function(i){return t.elementify(i)("a")};n.a=r})(C);(function(e){"use strict";e["Deku.DOM.Elt.Audio"]=e["Deku.DOM.Elt.Audio"]||{};var n=e["Deku.DOM.Elt.Audio"],t=e["Deku.Control"],r=function(i){return t.elementify(i)("audio")};n.audio=r})(C);(function(e){"use strict";e["Deku.DOM.Elt.Button"]=e["Deku.DOM.Elt.Button"]||{};var n=e["Deku.DOM.Elt.Button"],t=e["Deku.Control"],r=function(i){return t.elementify(i)("button")};n.button=r})(C);(function(e){"use strict";e["Deku.DOM.Elt.Canvas"]=e["Deku.DOM.Elt.Canvas"]||{};var n=e["Deku.DOM.Elt.Canvas"],t=e["Deku.Control"],r=function(i){return t.elementify(i)("canvas")};n.canvas=r})(C);(function(e){"use strict";e["Deku.DOM.Elt.Code"]=e["Deku.DOM.Elt.Code"]||{};var n=e["Deku.DOM.Elt.Code"],t=e["Control.Plus"],r=e["Deku.Control"],i=function(l){return r.elementify(l)("code")},o=function(l){return i(l)(t.empty(l.Plus0()))};n.code_=o})(C);(function(e){"use strict";e["Deku.DOM.Elt.Div"]=e["Deku.DOM.Elt.Div"]||{};var n=e["Deku.DOM.Elt.Div"],t=e["Control.Plus"],r=e["Deku.Control"],i=function(l){return r.elementify(l)("div")},o=function(l){return i(l)(t.empty(l.Plus0()))};n.div=i,n.div_=o})(C);(function(e){"use strict";e["Deku.DOM.Elt.Input"]=e["Deku.DOM.Elt.Input"]||{};var n=e["Deku.DOM.Elt.Input"],t=e["Deku.Control"],r=function(i){return t.elementify(i)("input")};n.input=r})(C);(function(e){"use strict";e["Deku.DOM.Elt.Pre"]=e["Deku.DOM.Elt.Pre"]||{};var n=e["Deku.DOM.Elt.Pre"],t=e["Control.Plus"],r=e["Deku.Control"],i=function(l){return r.elementify(l)("pre")},o=function(l){return i(l)(t.empty(l.Plus0()))};n.pre_=o})(C);(function(e){"use strict";e["Deku.DOM.Elt.Span"]=e["Deku.DOM.Elt.Span"]||{};var n=e["Deku.DOM.Elt.Span"],t=e["Control.Plus"],r=e["Deku.Control"],i=function(l){return r.elementify(l)("span")},o=function(l){return i(l)(t.empty(l.Plus0()))};n.span=i,n.span_=o})(C);(function(e){var n=function(c){for(var v="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=s.length,h=0;h<c;h++)v+=s.charAt(Math.floor(Math.random()*d));return v},t=function(c){return function(v){return function(s){return function(){s.units[v].main.appendChild(s.units[c].main)}}}},r=function(c){return function(v){return function(s){return function(){s.units[v].main.removeChild(s.units[c].main)}}}},i=function(c){return function(v){return function(){var s=c.id;v.units[s]={listeners:{},parent:c.parent,main:document.createElement(c.tag)},c.parent===v.terminus&&v.terminalPtrs.push(c.id),t(s)(c.parent)(v)()}}};e.makeElement=i,e.makeText_=function(c){return function(v){return function(){var s=c.id;v.units[s]={main:document.createTextNode(""),parent:c.parent},t(s)(c.parent)(v)()}}},e.makeFFIDOMSnapshot=function(){return{units:{},portals:{},unqidfr:n(10),terminalPtrs:[]}},e.setAttribute_=function(c){return function(v){return function(){var s=c.id,d=c.value.value;if(c.value.type==="cb")if(c.key==="@canvas-hack@"){let p=v.units[s].main.getContext("2d");d(p)()}else{v.units[s].listeners[c.key]&&v.units[s].main.removeEventListener(c.key,v.units[s].listeners[c.key]);var h=p=>d(p)();v.units[s].main.addEventListener(c.key,h),v.units[s].listeners[c.key]=h}else v.units[s].main.tagName==="INPUT"&&c.key==="value"?v.units[s].main.value=d:v.units[s].main.tagName==="INPUT"&&c.key==="checked"?v.units[s].main.checked=d==="true":v.units[s].main.setAttribute(c.key,d)}}},e.setText_=function(c){return function(v){return function(){var s=c.id;v.units[s].main.nodeValue=c.text}}},e.makeSubgraph=function(c){return function(v){return function(s){return function(d){return function(){var h={},p={};d.units[c]={parent:v,sceneM:s,children:h,unsu:p}}}}}},e.removeSubgraph=function(c){return function(v){return function(){var s=c.id,d=c.pos,h=v.units[s].children,p=v.units[s].unsu;if(h[d]!==void 0){for(var m=0;m<h[d].terminalPtrs.length;m++)r(h[d].terminalPtrs[m])(v.units[s].parent)(h[d])();p[d](),delete h[d],delete p[d]}}}};var o=function(c){return function(v){return function(){var s=c.id,d=c.pos,h=c.index,p=v.units[s].children,m=v.units[s].unsu,x=!1;if(m[d]===void 0){p[d]={units:{},portals:v.portals,terminus:v.units[s].parent,unqidfr:n(10),parent:s,terminalPtrs:[]},p[d].units[v.units[s].parent]=v.units[v.units[s].parent];var D=v.units[s].sceneM(h)();m[d]=D.actualized((g=>E=>()=>E(p[g])())(d))(),x=!0}if(x)for(var b=0;b<p[d].terminalPtrs.length;b++)t(p[d].terminalPtrs[b])(v.units[s].parent)(p[d])()}}},l=function(c){return function(v){return function(){var s=c.id,d=c.html,h=c.verb,p=c.cache,m=c.parent,x=c.scope;c.parent===v.terminus&&v.terminalPtrs.push(c.id);for(var D=Object.entries(p),b=0;b<D.length;b++){var g=D[b][0];D[b][1]===!0?d=d.replace(h+g+h,'data-deku-attr-internal="'+g+'"'):d=d.replace(h+g+h,'<span style="display:contents;" data-deku-elt-internal="'+g+'"></span>')}var E=document.createElement("div");E.innerHTML=d.trim(),v.units[s]={listeners:{},parent:m,main:E.firstChild},E.querySelectorAll("[data-deku-attr-internal]").forEach(function(k){var W=k.getAttribute("data-deku-attr-internal");v.units[W+x]={listeners:{},main:k}}),E.querySelectorAll("[data-deku-elt-internal]").forEach(function(k){var W=k.getAttribute("data-deku-elt-internal");v.units[W+x]={listeners:{},main:k}}),t(s)(m)(v)()}}};e.makePursx_=l,e.insertSubgraph=o,e.sendSubgraphToTop_=function(c){return function(v){return function(){var s=v.units[c.id].children[c.pos];if(s!==void 0)for(var d=s.terminalPtrs.length,h=0;h<s.terminalPtrs.length;h++)v.units[v.units[c.id].parent].main.prepend(s.units[s.terminalPtrs[d-h-1]].main)}}},e.makeRoot_=function(c){return function(v){return function(){var s=c.id;v.units[s]={main:c.root}}}},e.makePortal_=function(c){return function(v){return function(){var s=document.createElement("div");v.portals[c.id]={main:s},v.units[c.id]={main:s},s.setAttribute("style","display:contents;")}}},e.makeGateway_=function(c){return function(v){return function(){var s=document.createElement("div");v.units[c.id]={main:s,portal:c.portal},s.setAttribute("style","display:contents;"),t(c.id)(c.parent)(v)()}}},e.setPortal_=function(c){return function(v){return function(){c.on?v.units[c.id].main.prepend(v.portals[v.units[c.id].portal].main):v.units[c.id].main.innerHTML=""}}}})(C["Deku.Interpret"]=C["Deku.Interpret"]||{});(function(e){"use strict";e.random=Math.random})(C["Effect.Random"]=C["Effect.Random"]||{});(function(e){"use strict";e["Effect.Random"]=e["Effect.Random"]||{};var n=e["Effect.Random"],t=e["Effect.Random"],r=e["Data.Int"],i=function(o){return function(l){return function(){var v=t.random(),s=(r.toNumber(l)-r.toNumber(o)+1)*v+r.toNumber(o);return r.floor(s)}}};n.randomInt=i,n.random=t.random})(C);(function(e){var n=function(r){var i={},o=0,l,c=function(s){return function(){for(let d in i)i[d](s)()}},v=function(s){return function(){var d=o;o+=1;var h=!Object.keys(i).length;return i[d]=s,h?l=r(c)():r(s)()(),function(){delete i[d],Object.keys(i).length||l()}}};return v.p$mmzbl=!0,v.p$mmzd=!0,v};e.memoizeIfMemoizableImpl=function(t){return t.p$mmzbl?n(t):t},e.memoizeImpl=function(t){return function(){return n(t)}},e.unsafeMemoizeImpl=n,e.isMemoizedImpl=function(t){return t.p$mmzd===!0},e.isMemoizableImpl=function(t){return t.p$mmzbl=!0}})(C["FRP.Event.Memoize"]=C["FRP.Event.Memoize"]||{});(function(e){"use strict";e["FRP.Event.Memoize"]=e["FRP.Event.Memoize"]||{};var n=e["FRP.Event.Memoize"],t=e["FRP.Event.Memoize"],r=t.unsafeMemoizeImpl,i=function(l){return l.memoize},o={memoize:t.memoizeImpl,memoizeIfMemoizable:t.memoizeIfMemoizableImpl,isMemoized:t.isMemoizedImpl,isMemoizable:t.isMemoizableImpl};n.memoize=i,n.unsafeMemoize=r,n.memoizableEvent=o})(C);(function(e){"use strict";e["FRP.Event.Memoized"]=e["FRP.Event.Memoized"]||{};var n=e["FRP.Event.Memoized"],t=e["Data.Functor"],r=e.Effect,i=e["FRP.Event"],o=e["FRP.Event.Memoize"],l=function(s){return s},c=function(s){return s},v=t.mapFlipped(r.functorEffect)(i.create)(function(s){return{event:l(o.unsafeMemoize(s.event)),push:s.push}});n.create=v,n.toEvent=c})(C);(function(e){"use strict";e["Deku.Interpret"]=e["Deku.Interpret"]||{};var n=e["Deku.Interpret"],t=e["Deku.Interpret"],r=e["Data.Exists"],i=e["Data.Function"],o=e["Data.Functor"],l=e["Data.Show"],c=e["Effect.Random"],v=e["FRP.Behavior"],s=e["FRP.Event"],d=e["FRP.Event.Memoized"],h={ids:o.map(v.functorABehavior(s.functorEvent))(l.show(l.showNumber))(v.behavior(function(p){return s.makeEvent(function(m){return function(){var D=c.random();return s.subscribe(p)(function(b){return m(b(D))})()}})})),makeElement:t.makeElement,makeRoot:t.makeRoot_,makeText:t.makeText_,makePursx:t.makePursx_,makePortal:t.makePortal_,makeGateway:t.makeGateway_,setPortal:t.setPortal_,makeSubgraph:function(p){return function(m){return i.flip(t.makeSubgraph(p.id)(p.parent))(m)(function(x){return r.runExists(function(D){return function(){var g=d.create(),E=function(){var k=D(g.push)(d.toEvent(g.event));return k(p.parent)(h)}();return{actualized:E}}})(p.scenes(x))})}},setAttribute:t.setAttribute_,setText:t.setText_,sendSubgraphToTop:t.sendSubgraphToTop_,insertSubgraph:t.insertSubgraph,removeSubgraph:t.removeSubgraph};n.effectfulDOMInterpret=h,n.makeFFIDOMSnapshot=t.makeFFIDOMSnapshot})(C);(function(e){"use strict";e["Deku.Pursx"]=e["Deku.Pursx"]||{};var n=e["Deku.Pursx"],t=e["Control.Alt"],r=e["Control.Plus"],i=e["Data.Functor"],o=e["Data.Profunctor"],l=e["Data.Symbol"],c=e["Data.Unit"],v=e["Deku.Attribute"],s=e["FRP.Behavior"],d=e["FRP.Event.Class"],h=e["Foreign.Object"],p=e.Record,m=e["Type.Proxy"],x=function(_){return _},D=function(_){return{pursxToElement:function(u){return function(a){return function(f){return{cache:h.empty,element:function(O){return function(R){return r.empty(_)}}}}}},Plus0:function(){return _}}},b=function(_){return _.pursxToElement},g=function(_){return function(u){return function(a){return{pursxToElement:function(f){return function(O){return function(R){var B=b(u)(f)(m.Proxy.value)(R);return{cache:h.insert(l.reflectSymbol(a)(m.Proxy.value))(!0)(B.cache),element:function(L){return function(F){return t.alt(u.Plus0().Alt0())(i.map(u.Plus0().Alt0().Functor0())(o.lcmap(o.profunctorFn)(v.unsafeUnAttribute)(function($){return F.setAttribute({id:l.reflectSymbol(a)(m.Proxy.value)+f,key:$.key,value:$.value})}))(p.get(a)()(m.Proxy.value)(R)))(B.element(L)(F))}}}}}},Plus0:u.Plus0}}}},E=function(_){return function(u){return function(a){return{pursxToElement:function(f){return function(O){return function(R){var B=p.get(a)()(m.Proxy.value)(R),L=b(u)(f)(m.Proxy.value)(R);return{cache:h.insert(l.reflectSymbol(a)(m.Proxy.value))(!1)(L.cache),element:function(F){return function($){return t.alt(u.Plus0().Alt0())(B(l.reflectSymbol(a)(m.Proxy.value)+f)($))(L.element(F)($))}}}}}},Plus0:u.Plus0}}}},k=x,W=function(_){return function(u){return function(a){return function(f){return function(O){return function(R){return function(B){return function(L){return function(F){var $=function(Z){return function(H){return d.keepLatest(R)(i.mapFlipped(R.Filterable1().Functor1())(s.sample_(R)(H.ids)(d.bang(R)(c.unit)))(function(V){return d.keepLatest(R)(i.mapFlipped(R.Filterable1().Functor1())(s.sample_(R)(H.ids)(d.bang(R)(c.unit)))(function(J){var I=b(O)(J)(m.Proxy.value)(F);return t.alt(R.Plus0().Alt0())(d.bang(R)(H.makePursx({id:V,parent:Z,cache:I.cache,scope:J,html:l.reflectSymbol(_)(L),verb:l.reflectSymbol(u)(B)})))(I.element(V)(H))}))}))}};return $}}}}}}}}},G=function(_){return function(u){return function(a){return function(f){return function(O){return W(_)({reflectSymbol:function(){return"~"}})()()(f)(O)(m.Proxy.value)}}}}};n.nut=k,n.makePursx=G,n["makePursx'"]=W,n.pursxToElementConsElt=E,n.pursxToElementConsAttr=g,n.pursxToElementNil=D})(C);(function(e){"use strict";e["Deku.Subgraph"]=e["Deku.Subgraph"]||{};var n=e["Deku.Subgraph"],t=e["Control.Alt"],r=e["Data.Functor"],i=e["Data.Hashable"],o=e["Data.Unit"],l=e["FRP.Behavior"],c=e["FRP.Event.Class"],v=function(){function p(){}return p.value=new p,p}(),s=function(){function p(){}return p.value=new p,p}(),d=function(){function p(){}return p.value=new p,p}(),h=function(p){return function(m){return function(x){return function(D){var b=function(g){return function(E){return c.keepLatest(m)(r.map(m.Filterable1().Functor1())(function(k){return t.alt(m.Plus0().Alt0())(c.bang(m)(E.makeSubgraph({id:k,parent:g,scenes:D})))(r.map(m.Filterable1().Functor1())(function(W){if(W.value1 instanceof d)return E.removeSubgraph({id:k,pos:i.hash(p)(W.value0),index:W.value0});if(W.value1 instanceof s)return E.sendSubgraphToTop({id:k,pos:i.hash(p)(W.value0),index:W.value0});if(W.value1 instanceof v)return E.insertSubgraph({id:k,pos:i.hash(p)(W.value0),index:W.value0});throw new Error("Failed pattern match at Deku.Subgraph (line 40, column 36 - line 44, column 49): "+[W.value1.constructor.name])})(x))})(l.sample_(m)(E.ids)(c.bang(m)(o.unit))))}};return b}}}};n.Insert=v,n.Remove=d,n.subgraph=h})(C);(function(e){"use strict";var n=function(){function t(){this.head=null,this.last=null,this.size=0}function r(p,m){this.queue=p,this.value=m,this.next=null,this.prev=null}function i(p){this.draining=!1,this.error=null,this.value=p,this.takes=new t,this.reads=new t,this.puts=new t}var o={};function l(p){try{p()}catch(m){setTimeout(function(){throw m},0)}}function c(p,m){var x=new r(p,m);switch(p.size){case 0:p.head=x;break;case 1:x.prev=p.head,p.head.next=x,p.last=x;break;default:x.prev=p.last,p.last.next=x,p.last=x}return p.size++,x}function v(p){var m;switch(p.size){case 0:return null;case 1:m=p.head,p.head=null;break;case 2:m=p.last,p.head.next=null,p.last=null;break;default:m=p.last,p.last=m.prev,p.last.next=null}return m.prev=null,m.queue=null,p.size--,m.value}function s(p){var m;switch(p.size){case 0:return null;case 1:m=p.head,p.head=null;break;case 2:m=p.head,p.last.prev=null,p.head=p.last,p.last=null;break;default:m=p.head,p.head=m.next,p.head.prev=null}return m.next=null,m.queue=null,p.size--,m.value}function d(p){if(p.queue!==null){if(p.queue.last===p){v(p.queue);return}if(p.queue.head===p){s(p.queue);return}p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),p.queue.size--,p.queue=null,p.value=null,p.next=null,p.prev=null}}function h(p,m){if(!m.draining){var x=m.puts,D=m.takes,b=m.reads,g,E,k,W,G;for(m.draining=!0;;){if(g=null,E=null,k=null,W=m.value,G=b.size,m.error!==null){for(W=p.left(m.error);g=s(x);)l(g.cb(W));for(;E=s(b);)l(E(W));for(;k=s(D);)l(k(W));break}if(W===o&&(g=s(x))&&(m.value=W=g.value),W!==o){for(k=s(D);G--&&(E=s(b));)l(E(p.right(W)));k!==null&&(m.value=o,l(k(p.right(W))))}if(g!==null&&l(g.cb(p.right(void 0))),m.value===o&&x.size===0||m.value!==o&&D.size===0)break}m.draining=!1}}return i.EMPTY=o,i.putLast=c,i.takeLast=v,i.takeHead=s,i.deleteCell=d,i.drainVar=h,i}();e.empty=function(){return new n(n.EMPTY)},e._tryPutVar=function(t,r,i){return function(){return i.value===n.EMPTY&&i.error===null?(i.value=r,n.drainVar(t,i),!0):!1}},e._tryTakeVar=function(t,r){return function(){var i=r.value;return i===n.EMPTY?t.nothing:(r.value=n.EMPTY,n.drainVar(t,r),t.just(i))}}})(C["Effect.AVar"]=C["Effect.AVar"]||{});(function(e){"use strict";e["Effect.AVar"]=e["Effect.AVar"]||{};var n=e["Effect.AVar"],t=e["Effect.AVar"],r=e["Data.Either"],i=e["Data.Maybe"],o=function(){function h(p){this.value0=p}return h.create=function(p){return new h(p)},h}(),l=function(){function h(p){this.value0=p}return h.create=function(p){return new h(p)},h}(),c=function(){function h(){}return h.value=new h,h}(),v={left:r.Left.create,right:r.Right.create,nothing:i.Nothing.value,just:i.Just.create,killed:o.create,filled:l.create,empty:c.value},s=function(h){return function(p){return t._tryPutVar(v,h,p)}},d=function(h){return t._tryTakeVar(v,h)};n.tryTake=d,n.tryPut=s,n.empty=t.empty})(C);(function(e){"use strict";e.now=function(){return Date.now()}})(C["Effect.Now"]=C["Effect.Now"]||{});(function(e){"use strict";e["Effect.Now"]=e["Effect.Now"]||{};var n=e["Effect.Now"],t=e["Effect.Now"];n.now=t.now})(C);(function(e){"use strict";e.setTimeout=function(n){return function(t){return function(){return setTimeout(t,n)}}},e.clearTimeout=function(n){return function(){clearTimeout(n)}}})(C["Effect.Timer"]=C["Effect.Timer"]||{});(function(e){"use strict";e["Effect.Timer"]=e["Effect.Timer"]||{};var n=e["Effect.Timer"],t=e["Effect.Timer"],r=e["Data.Ord"],i={eq:function(l){return function(c){return l===c}}},o={compare:function(l){return function(c){return r.compare(r.ordInt)(l)(c)}},Eq0:function(){return i}};n.ordTimeoutId=o,n.setTimeout=t.setTimeout,n.clearTimeout=t.clearTimeout})(C);(function(e){"use strict";e.eventListener=function(n){return function(){return function(t){return n(t)()}}},e.addEventListener=function(n){return function(t){return function(r){return function(i){return function(){return i.addEventListener(n,t,r)}}}}},e.removeEventListener=function(n){return function(t){return function(r){return function(i){return function(){return i.removeEventListener(n,t,r)}}}}}})(C["Web.Event.EventTarget"]=C["Web.Event.EventTarget"]||{});(function(e){"use strict";e["Web.Event.EventTarget"]=e["Web.Event.EventTarget"]||{};var n=e["Web.Event.EventTarget"],t=e["Web.Event.EventTarget"];n.eventListener=t.eventListener,n.addEventListener=t.addEventListener,n.removeEventListener=t.removeEventListener})(C);(function(e){"use strict";e.window=function(){return window}})(C["Web.HTML"]=C["Web.HTML"]||{});(function(e){"use strict";e["Web.HTML"]=e["Web.HTML"]||{};var n=e["Web.HTML"],t=e["Web.HTML"];n.window=t.window})(C);(function(e){"use strict";e.document=function(n){return function(){return n.document}},e.requestAnimationFrame=function(n){return function(t){return function(){return t.requestAnimationFrame(n)}}}})(C["Web.HTML.Window"]=C["Web.HTML.Window"]||{});(function(e){"use strict";e["Web.HTML.Window"]=e["Web.HTML.Window"]||{};var n=e["Web.HTML.Window"],t=e["Web.HTML.Window"],r=e["Unsafe.Coerce"],i=r.unsafeCoerce;n.toEventTarget=i,n.document=t.document,n.requestAnimationFrame=t.requestAnimationFrame})(C);(function(e){"use strict";e.clientX=function(n){return n.clientX},e.clientY=function(n){return n.clientY},e.button=function(n){return n.button}})(C["Web.UIEvent.MouseEvent"]=C["Web.UIEvent.MouseEvent"]||{});(function(e){"use strict";e._unsafeReadProtoTagged=function(n,t,r,i){if(typeof window<"u"){var o=window[r];if(o!=null&&i instanceof o)return t(i)}for(var l=i;l!=null;){var c=Object.getPrototypeOf(l),v=c.constructor.name;if(v===r)return t(i);if(v==="Object")return n;l=c}return n}})(C["Web.Internal.FFI"]=C["Web.Internal.FFI"]||{});(function(e){"use strict";e["Web.Internal.FFI"]=e["Web.Internal.FFI"]||{};var n=e["Web.Internal.FFI"],t=e["Web.Internal.FFI"],r=e["Data.Maybe"],i=function(o){return function(l){return t._unsafeReadProtoTagged(r.Nothing.value,r.Just.create,o,l)}};n.unsafeReadProtoTagged=i})(C);(function(e){"use strict";e["Web.UIEvent.MouseEvent"]=e["Web.UIEvent.MouseEvent"]||{};var n=e["Web.UIEvent.MouseEvent"],t=e["Web.UIEvent.MouseEvent"],r=e["Web.Internal.FFI"],i=r.unsafeReadProtoTagged("MouseEvent");n.fromEvent=i,n.clientX=t.clientX,n.clientY=t.clientY,n.button=t.button})(C);(function(e){"use strict";e["FRP.Event.Mouse"]=e["FRP.Event.Mouse"]||{};var n=e["FRP.Event.Mouse"],t=e["Data.Foldable"],r=e["Data.Functor"],i=e["Data.Maybe"],o=e["Data.Newtype"],l=e["Data.Ord"],c=e["Data.Set"],v=e.Effect,s=e["Effect.Ref"],d=e["FRP.Event"],h=e["Web.Event.EventTarget"],p=e["Web.HTML"],m=e["Web.HTML.Window"],x=e["Web.UIEvent.MouseEvent"],D=function(E){return function(k){return d.makeEvent(function(W){return d.subscribe(k)(function(G){return function(){var u=s.read(E.buttons)();return W({value:G,buttons:u})()}})})}},b=function(){var k=s.new(i.Nothing.value)(),W=s.new(c.empty)(),G=r.map(v.functorEffect)(m.toEventTarget)(p.window)(),_=h.eventListener(function(O){return t.traverse_(v.applicativeEffect)(t.foldableMaybe)(function(R){return s.write(new i.Just({x:x.clientX(R),y:x.clientY(R)}))(k)})(x.fromEvent(O))})(),u=h.eventListener(function(O){return t.traverse_(v.applicativeEffect)(t.foldableMaybe)(function(R){return s.modify(c.insert(l.ordInt)(x.button(R)))(W)})(x.fromEvent(O))})(),a=h.eventListener(function(O){return t.traverse_(v.applicativeEffect)(t.foldableMaybe)(function(R){return s.modify(c.delete(l.ordInt)(x.button(R)))(W)})(x.fromEvent(O))})();h.addEventListener(o.wrap()("mousemove"))(_)(!1)(G)(),h.addEventListener(o.wrap()("mousedown"))(u)(!1)(G)(),h.addEventListener(o.wrap()("mouseup"))(a)(!1)(G)();var f=function(){return h.removeEventListener(o.wrap()("mousemove"))(_)(!1)(G)(),h.removeEventListener(o.wrap()("mousedown"))(u)(!1)(G)(),h.removeEventListener(o.wrap()("mouseup"))(a)(!1)(G)()};return{position:k,buttons:W,dispose:f}},g=d.makeEvent(function(E){return function(){var W=r.map(v.functorEffect)(m.toEventTarget)(p.window)(),G=h.eventListener(function(_){return t.traverse_(v.applicativeEffect)(t.foldableMaybe)(function(u){return E(x.button(u))})(x.fromEvent(_))})();return h.addEventListener(o.wrap()("mousedown"))(G)(!1)(W)(),h.removeEventListener(o.wrap()("mousedown"))(G)(!1)(W)}});n.getMouse=b,n.down=g,n.withButtons=D})(C);(function(e){"use strict";e["FRP.Behavior.Mouse"]=e["FRP.Behavior.Mouse"]||{};var n=e["FRP.Behavior.Mouse"],t=e["Data.Functor"],r=e["FRP.Behavior"],i=e["FRP.Event"],o=e["FRP.Event.Mouse"],l=function(c){return r.behavior(function(v){return t.map(i.functorEvent)(function(s){return s.value(s.buttons)})(o.withButtons(c)(v))})};n.buttons=l})(C);(function(e){"use strict";e["FRP.Event.Time"]=e["FRP.Event.Time"]||{};var n=e["FRP.Event.Time"],t=e["Control.Applicative"],r=e["Data.Foldable"],i=e["Data.Maybe"],o=e["Data.Monoid"],l=e["Data.Semigroup"],c=e["Data.Set"],v=e["Data.Unit"],s=e.Effect,d=e["Effect.Now"],h=e["Effect.Ref"],p=e["Effect.Timer"],m=e["FRP.Event"],x=function(b){return m.makeEvent(function(g){return m.subscribe(b)(function(E){return function(){var W=d.now();return g({time:W,value:E})()}})})},D=function(b){return function(g){return m.makeEvent(function(E){return function(){var W=h.new(o.mempty(c.monoidSet(p.ordTimeoutId)))(),G=m.subscribe(g)(function(_){return function(){var a=h.new(i.Nothing.value)(),f=p.setTimeout(b)(function(){E(_)();var R=h.read(a)();return i.maybe(t.pure(s.applicativeEffect)(v.unit))(function(B){return h.modify_(c.delete(p.ordTimeoutId)(B))(W)})(R)()})();return h.write(new i.Just(f))(a)(),h.modify_(l.append(c.semigroupSet(p.ordTimeoutId))(c.singleton(f)))(W)()}})();return function(){var u=h.read(W)();return r.for_(s.applicativeEffect)(c.foldableSet)(u)(p.clearTimeout)(),G()}}})}};n.withTime=x,n.delay=D})(C);(function(e){"use strict";e["FRP.Behavior.Time"]=e["FRP.Behavior.Time"]||{};var n=e["FRP.Behavior.Time"],t=e["Data.DateTime.Instant"],r=e["Data.Functor"],i=e["Data.Time.Duration"],o=e["FRP.Behavior"],l=e["FRP.Event"],c=e["FRP.Event.Time"],v=o.behavior(function(d){return r.map(l.functorEvent)(function(h){return h.value(h.time)})(c.withTime(d))}),s=r.map(o.functorABehavior(l.functorEvent))(function(){var d=i.toDuration(i.durationSeconds);return function(h){return d(t.unInstant(h))}}())(v);n.seconds=s})(C);(function(e){"use strict";e["FRP.Event.Animate"]=e["FRP.Event.Animate"]||{};var n=e["FRP.Event.Animate"],t=e["Control.Applicative"],r=e["Data.Function"],i=e["Data.Functor"],o=e["Data.Unit"],l=e.Effect,c=e["Effect.Ref"],v=e["FRP.Event"],s=e["FRP.Event.Memoize"],d=e["Web.HTML"],h=e["Web.HTML.Window"],p=s.memoize(s.memoizableEvent)(v.makeEvent(function(m){return function(){var D=d.window(),b=c.new(!0)(),g=i.void(l.functorEffect)(r.flip(h.requestAnimationFrame)(D)(function(){var k=c.read(b)();return t.when(l.applicativeEffect)(k)(function(){return m(o.unit)(),g()})()}));return g(),c.write(!1)(b)}}));n.animationFrameEvent=p})(C);(function(e){"use strict";e.setFillStyle=function(n){return function(t){return function(){n.fillStyle=t}}},e.beginPath=function(n){return function(){n.beginPath()}},e.fill=function(n){return function(){n.fill()}},e.arc=function(n){return function(t){return function(){n.arc(t.x,t.y,t.radius,t.start,t.end)}}},e.fillRect=function(n){return function(t){return function(){n.fillRect(t.x,t.y,t.width,t.height)}}}})(C["Graphics.Canvas"]=C["Graphics.Canvas"]||{});(function(e){"use strict";e["Graphics.Canvas"]=e["Graphics.Canvas"]||{};var n=e["Graphics.Canvas"],t=e["Graphics.Canvas"];n.setFillStyle=t.setFillStyle,n.beginPath=t.beginPath,n.fill=t.fill,n.arc=t.arc,n.fillRect=t.fillRect})(C);(function(e){"use strict";e["Random.LCG"]=e["Random.LCG"]||{};var n=e["Random.LCG"],t=e["Data.EuclideanRing"],r=e["Data.Int"],i=e["Data.Maybe"],o=e.Math,l=function(b){return b},c=function(b){return b},v=1,s=2147483647,d=s-1|0,h=function(b){var g=function(E){return function(k){return function(W){var G=k-E|0,_=t.mod(t.euclideanRingInt)(W)(G),u=_<E;return u?_+k|0:_}}};return g(v)(d)(b)},p=0,m=48271,x=function(b){return function(g){return l(i.fromJust()(r.fromNumber(o.remainder(r.toNumber(m)*r.toNumber(g)+r.toNumber(b))(r.toNumber(s)))))}},D=x(p);n.mkSeed=h,n.unSeed=c,n.lcgM=s,n.lcgNext=D})(C);(function(e){"use strict";e["Test.QuickCheck.Gen"]=e["Test.QuickCheck.Gen"]||{};var n=e["Test.QuickCheck.Gen"],t=e["Control.Applicative"],r=e["Control.Apply"],i=e["Control.Bind"],o=e["Control.Monad.State"],l=e["Control.Monad.State.Class"],c=e["Control.Monad.State.Trans"],v=e["Data.Array.NonEmpty"],s=e["Data.Functor"],d=e["Data.Identity"],h=e["Data.Int"],p=e["Data.Semiring"],m=e["Data.Tuple"],x=e.Math,D=e["Random.LCG"],b=function(B){return B},g=function(B){return B},E=function(){var B=function(L){return new m.Tuple(D.unSeed(L.newSeed),function(){var F={};for(var $ in L)({}).hasOwnProperty.call(L,$)&&(F[$]=L[$]);return F.newSeed=D.lcgNext(L.newSeed),F}())};return b(l.state(c.monadStateStateT(d.monadIdentity))(B))}(),k=c.functorStateT(d.functorIdentity),W=s.map(k)(function(B){return h.toNumber(B)/h.toNumber(D.lcgM)})(E),G=function(B){return o.evalState(g(B))},_=c.bindStateT(d.monadIdentity),u=c.applyStateT(d.monadIdentity),a=function(B){return function(L){var F=h.toNumber(L),$=h.toNumber(B),Z=function(J){return $+x.remainder(J)(F-$+1)},H=s.map(k)(h.toNumber)(E),V=r.apply(u)(s.map(k)(p.add(p.semiringNumber))(H))(s.map(k)(p.mul(p.semiringNumber)(2))(H));return s.map(k)(function(J){return h.floor(Z(J))})(V)}},f=function(B){return function(L){var F=B<=L;return F?a(B)(L):a(L)(B)}},O=c.applicativeStateT(d.monadIdentity),R=function(B){return i.bind(_)(f(0)(v.length(B)-1|0))(function(L){return t.pure(O)(v.unsafeIndex()(B)(L))})};n.elements=R,n.evalGen=G,n.uniform=W,n.functorGen=k,n.applyGen=u,n.applicativeGen=O,n.bindGen=_})(C);(function(e){"use strict";e["Test.QuickCheck.Arbitrary"]=e["Test.QuickCheck.Arbitrary"]||{};var n=e["Test.QuickCheck.Arbitrary"],t=e["Test.QuickCheck.Gen"],r=function(o){return o.arbitrary},i={arbitrary:t.uniform};n.arbitrary=r,n.arbNumber=i})(C);(function(e){"use strict";e["Type.Equality"]=e["Type.Equality"]||{};var n=e["Type.Equality"],t={proof:function(i){return i},Coercible0:function(){}},r=function(i){return i.proof};n.proof=r,n.refl=t})(C);(function(e){var n=function(u){for(var a="",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",O=f.length,R=0;R<u;R++)a+=f.charAt(Math.floor(Math.random()*O));return a},t="numeric",r="sudden",i="cancellation",o="noRamp",l="linearRamp",c="exponentialRamp",v="envelope",s=function(u){return u.type===i},d=function(u,a,f){if(f.type===r)u.value=f.value.n;else if(f.type===t)u[f.value.t.type===o?"setValueAtTime":f.value.t.type===l?"linearRampToValueAtTime":f.value.t.type===c?"exponentialRampToValueAtTime":"linearRampToValueAtTime"](f.value.n,a+f.value.o);else if(s(f))f.value.hold?u.cancelAndHoldAtTime(a+f.value.o):u.cancelScheduledValues(a+f.value.o);else if(f.type===v){let O=a+f.value.o;u.cancelScheduledValues(Math.max(0,O)),u.setValueCurveAtTime(f.value.p,O,f.value.d)}else throw new Error("No idea what to do with "+JSON.stringify(f))},h=function(u,a,f,O){return d(u.parameters.get(a),f,O)},p=function(u,a,f,O){return d(u[a],f,O)},m=function(u,a,f){a.type==="just"&&f.scopes[a.value].push(u)},x=function(u,a){a.toConnect[u]&&(a.toConnect[u].forEach(function(f){f.w?a.units[f.w]?f.f():(a.toConnect[f.w]||(a.toConnect[f.w]=[]),a.toConnect[f.w].push({f:f.f})):f.f()}),delete a.toConnect[u])},D=function(u,a,f){a.type==="just"&&b(u,a.value,f)},b=function(u,a,f){var O=function(){f.units[u].outgoing.push(a),f.units[a].incoming.push(u),f.units[u].pendingOn||(f.units[u].main.connect(f.units[a].main),f.units[a].se&&f.units[u].main.connect(f.units[a].se))};if(!f.units[u]){f.toConnect[u]||(f.toConnect[u]=[]);var R={f:O};a!==u&&!f.units[a]&&(R.w=a),f.toConnect[u].push(R);return}if(!f.units[a]){f.toConnect[a]||(f.toConnect[a]=[]);var R={f:O};a!==u&&!f.units[u]&&(R.w=u),f.toConnect[a].push(R);return}O()};e.connectXToY_=function(u){return function(a){return function(){b(u.from,u.to,a)}}};var g=function(u){return function(a){return function(f){return function(){f.units[u].outgoing=f.units[u].outgoing.filter(function(O){return O!==a}),f.units[a].incoming=f.units[a].incoming.filter(function(O){return O!==u}),f.units[u].main.disconnect(f.units[a].main),f.units[a].se&&f.units[u].main.disconnect(f.units[a].se)}}}};e.disconnectXFromY_=function(u){return function(a){return function(){return g(u.from)(u.to)(a)()}}},e.destroyUnit_=function(u){return function(a){return function(){var f=u.id;a.units[f].recorder&&a.units[f].recorder.stop(),a.units[f].analyser&&a.units[f].analyser(),delete a.units[f]}}},e.makeAllpass_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"allpass",Q:u.q,frequency:u.frequency})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeAnalyser_=function(u){return function(a){return function(){var f=u.id,O=u.cb,R=new AnalyserNode(a.context,u),B=O(R)();a.units[f]={outgoing:[],incoming:[],analyserOrig:O,analyser:B,main:a.context.createGain(),se:R},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeAudioWorkletNode_=function(u){return function(a){return function(){var f=u.id,O=u.options;a.units[f]={outgoing:[],incoming:[],main:new AudioWorkletNode(a.context,O.name,{numberOfInputs:O.numberOfInputs,numberOfOutputs:O.numberOfOutputs,outputChannelCount:O.outputChannelCount,parameterData:O.parameterData,processorOptions:O.processorOptions})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeBandpass_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"bandpass",Q:u.q,frequency:u.frequency})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeConstant_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){return new ConstantSourceNode(B,L)},R={offset:u.offset};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeConvolver_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[],incoming:[],main:new ConvolverNode(a.context,{buffer:u.buffer})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeDelay_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new DelayNode(a.context,{delayTime:u.delayTime})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeDynamicsCompressor_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new DynamicsCompressorNode(a.context,{knee:u.knee,ratio:u.ratio,threshold:u.threshold,attack:u.attack,release:u.release})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}};var E=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new GainNode(a.context,{gain:u.gain})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}};e.makeGain_=E,e.makeHighpass_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"highpass",Q:u.q,frequency:u.frequency})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeHighshelf_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"highshelf",frequency:u.frequency,gain:u.gain})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeInput_=function(u){return function(a){return function(){var f=u.id;x(f,a),D(f,u.parent,a)}}},e.makeIIRFilter_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[],incoming:[],main:new IIRFilterNode(a.context,{feedforward:u.feedforward,feedback:u.feedback})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeLoopBuf_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){return new AudioBufferSourceNode(B,L)},R={loop:!0,buffer:u.buffer,loopStart:u.loopStart,loopEnd:u.loopEnd,playbackRate:u.playbackRate};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeLowpass_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"lowpass",Q:u.q,frequency:u.frequency})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeLowshelf_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"lowshelf",frequency:u.frequency,gain:u.gain})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeMediaElement_=function(u){return function(a){return function(){var f=u.id,O=u.element,R=function(){var B=a.context.createMediaElementSource(O);return B};a.units[f]={outgoing:[u.parent],incoming:[],createClosure:R,resumeClosure:{},main:R()},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeMicrophone_=function(u){return function(a){return function(){var f=u.id;a.units[u.id]={main:a.context.createMediaStreamSource(u.microphone),outgoing:[u.parent],incoming:[]},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeNotch_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"notch",frequency:u.frequency,Q:u.q})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makePeaking_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new BiquadFilterNode(a.context,{type:"peaking",frequency:u.frequency,Q:u.q,gain:u.gain})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makePeriodicOsc_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){var F={frequency:L.frequency,periodicWave:L.spec.type==="wave"?L.spec.value:_(a.context)(L.spec.value.real)(L.spec.value.img)()},$=new OscillatorNode(B,F);return $},R={frequency:u.frequency,type:"custom",spec:u.spec};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makePlayBuf_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){var F={loop:L.loop,buffer:L.buffer,playbackRate:L.playbackRate};return new AudioBufferSourceNode(B,F)},R={loop:!1,buffer:u.buffer,playbackRate:u.playbackRate,bufferOffset:u.bufferOffset,duration:u.duration};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeRecorder_=function(u){return function(a){return function(){var f=u.id,O=u.cb,R=a.context.createMediaStreamDestination(),B=new MediaRecorder(R.stream);O(B)(),B.start(),a.units[f]={outgoing:[],incoming:[],recorderOrig:O,recorder:B,main:a.context.createGain(),se:R},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeSawtoothOsc_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){return new OscillatorNode(B,L)},R={frequency:u.frequency,type:"sawtooth"};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeSinOsc_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){return new OscillatorNode(B,L)},R={frequency:u.frequency,type:"sine"};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeSubgraph_=function(u){return function(a){return function(f){return function(O){return function(R){return function(){E({id:u,parent:a,scope:{type:"just",value:f},gain:1})(R)(),R.units[u].sceneM=O}}}}}},e.removeSubgraph_=function(u){return function(a){return function(){var f=u.id,O=u.pos,R=`${f}-${O}`;if(a.unsu[R]!==void 0){a.unsu[R]();for(var B=0;B<a.scopes[R].length;B++)a.units[a.scopes[R][B]].main.disconnect(),a.units[a.scopes[R][B]].se&&a.units[a.scopes[R][B]].se.disconnect(),delete a.units[a.scopes[R][B]];delete a.scopes[R],delete a.unsu[R],delete a.scopes[R]}}}},e.insertSubgraph_=function(u){return function(a){return function(){var f=u.id,O=u.pos,R=u.index,B=`${f}-${O}`;if(a.unsu[B]===void 0){a.scopes[B]=[];var L=a.units[f].sceneM(R)(B);a.unsu[B]=L.actualized(F=>()=>F(a)())()}}}},e.makeSpeaker_=function(u){return function(a){return function(){a.units[u.id]={outgoing:[],incoming:[],main:a.context.createGain(),se:a.context.destination}}}},e.makeStereoPanner_=function(u){return function(a){return function(){var f=u.id;a.units[f]={outgoing:[u.parent],incoming:[],main:new StereoPannerNode(a.context,{pan:u.pan})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeSquareOsc_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){return new OscillatorNode(B,L)},R={frequency:u.frequency,type:"square"};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeTriangleOsc_=function(u){return function(a){return function(){var f=u.id,O=function(B,L){return new OscillatorNode(B,L)},R={frequency:u.frequency,type:"triangle"};a.units[f]={outgoing:[],incoming:[],resume:R,createClosure:O,onOff:!1,pendingOn:!0},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.makeWaveShaper_=function(u){return function(a){return function(){var f=u.id,O=u.curve,R=u.oversample;a.units[f]={outgoing:[O.parent],incoming:[],main:new WaveShaperNode(a.context,{curve:O,oversample:R.type})},m(f,u.scope,a),x(f,a),D(f,u.parent,a)}}},e.setAnalyserNodeCb_=function(u){return function(a){return function(){var f=u.id,O=u.cb;a.units[f].analyserOrig!==O&&(a.units[f].analyser&&a.units[f].analyser(),a.units[f].analyser=O(a.units[f].se)(),a.units[f].analyserOrig=O)}}},e.setMediaRecorderCb_=function(u){return function(a){return function(){var f=u.cb,O=u.id;if(a.units[O].recorderOrig!==f){a.units[O].recorder&&a.units[O].recorder.stop();var R=f;a.units[O].recorderOrig=f;var B=new MediaRecorder(a.units[O].se);R(B)(),B.start()}}}},e.setWaveShaperCurve_=function(u){return function(a){return function(){var f=u.id,O=u.curve;a.units[f].main.curve=O}}},e.setAudioWorkletParameter_=function(u){return function(a){return function(){var f=u.id,O=u.paramName,R=u.paramValue;h(a.units[f].main,O,a.deprecatedWriteHead,R)}}};let k=function(u,a,f){a.resume&&u.value.n!==void 0&&(a.resume[f]=u.value.n)};e.setGain_=function(u){return function(a){return function(){var f=u.id,O=u.gain;p(a.units[f].main,"gain",a.deprecatedWriteHead,O),k(O,a.units[f],"gain")}}},e.setQ_=function(u){return function(a){return function(){var f=u.id,O=u.q;p(a.units[f].main,"Q",a.deprecatedWriteHead,O),k(O,a.units[f],"Q")}}},e.setBuffer_=function(u){return function(a){return function(){var f=u.id,O=u.buffer;a.units[f].resume&&(a.units[f].resume.buffer=O)}}},e.setConvolverBuffer_=function(u){return function(a){return function(){var f=u.id,O=u.buffer;a.units[f].main.buffer=O}}},e.setPeriodicOsc_=function(u){return function(a){return function(){var f=u.id,O=u.spec;a.units[f].resume&&(a.units[f].resume.spec=O)}}},e.setPan_=function(u){return function(a){return function(){var f=u.id,O=u.pan;p(a.units[f].main,"pan",a.deprecatedWriteHead,O),k(O,a.units[f],"pan")}}},e.setThreshold_=function(u){return function(a){return function(){var f=u.id,O=u.threshold;p(a.units[f].main,"threshold",a.deprecatedWriteHead,O),k(O,a.units[f],"threshold")}}},e.setLoopStart_=function(u){return function(a){return function(){var f=u.id,O=u.loopStart;a.units[f].main.loopStart=O,a.units[f].resume.loopStart=O}}},e.setLoopEnd_=function(u){return function(a){return function(){var f=u.id,O=u.loopEnd;a.units[f].main.loopEnd=O,a.units[f].resume.loopEnd=O}}},e.setBufferOffset_=function(u){return function(a){return function(){var f=u.id,O=u.bufferOffset;a.units[f].resume.bufferOffset=O}}},e.setDuration_=function(u){return function(a){return function(){var f=u.id,O=u.duration;a.units[f].duration=O}}},e.setRelease_=function(u){return function(a){return function(){var f=u.id,O=u.release;p(a.units[f].main,"release",a.deprecatedWriteHead,O),k(O,a.units[f],"release")}}},e.setOffset_=function(u){return function(a){return function(){var f=u.id,O=u.offset;p(a.units[f].main,"offset",a.deprecatedWriteHead,O),k(O,a.units[f],"offset")}}},e.setRatio_=function(u){return function(a){return function(){var f=u.id,O=u.ratio;p(a.units[f].main,"ratio",a.deprecatedWriteHead,O),k(O,a.units[f],"ratio")}}},e.setAttack_=function(u){return function(a){return function(){var f=u.id,O=u.attack;p(a.units[f].main,"attack",a.deprecatedWriteHead,O),k(O,a.units[f],"attack")}}},e.setKnee_=function(u){return function(a){return function(){var f=u.id,O=u.knee;p(a.units[f].main,"knee",a.deprecatedWriteHead,O),k(O,a.units[f],"knee")}}},e.setDelay_=function(u){return function(a){return function(){var f=u.id,O=u.delayTime;p(a.units[f].main,"delayTime",a.deprecatedWriteHead,O),k(O,a.units[f],"delayTime")}}},e.setPlaybackRate_=function(u){return function(a){return function(){var f=u.id,O=u.playbackRate;p(a.units[f].main,"playbackRate",a.deprecatedWriteHead,O),k(O,a.units[f],"playbackRate")}}},e.setFrequency_=function(u){return function(a){return function(){var f=u.id,O=u.frequency;p(a.units[f].main,"frequency",a.deprecatedWriteHead,O),k(O,a.units[f],"frequency")}}},e.setOnOff_=function(u){return function(a){return function(){var f=u.id,O=u.onOff;O.x.type==="on"?W(f)(O)(a)():O.x.type==="off"?G(f)(O)(a)():O.x.type==="offOn"&&(G(f)({x:{type:"off"},o:0})(a)(),W(f)({x:{type:"on"},o:O.o})(a)())}}};var W=function(u){return function(a){return function(f){return function(){if(!f.units[u].onOff){f.units[u].pendingOn=!1,f.units[u].onOff=!0,f.units[u].main=f.units[u].createClosure(f.context,f.units[u].resume);for(var O=0;O<f.units[u].outgoing.length;O++){var R=f.units[u].outgoing[O];f.units[u].main.connect(f.units[R].main),f.units[R].se&&f.units[u].main.connect(f.units[R].se)}f.units[u].resume&&f.units[u].resume.bufferOffset?f.units[u].resume.duration.type==="just"?f.units[u].main.start(f.deprecatedWriteHead+a.o,f.units[u].resume.bufferOffset,f.units[u].resume.duration.value):f.units[u].main.start(f.deprecatedWriteHead+a.o,f.units[u].resume.bufferOffset):f.units[u].resume&&f.units[u].resume.loopStart?f.units[u].main.start(f.deprecatedWriteHead+a.o,f.units[u].resume.loopStart):f.units[u].main.start(f.deprecatedWriteHead+a.o)}}}}},G=function(u){return function(a){return function(f){return function(){if(!!f.units[u].onOff){f.units[u].onOff=!1;var O=f.units[u].main,R=f.units[u].outgoing.slice();O.addEventListener("ended",()=>{for(var B=0;B<R.length;B++){var L=R[B];try{O.disconnect(f.units[L].main),f.units[L].se&&O.disconnect(f.units[L].se)}catch(F){console.log(F);continue}}}),O.stop(f.deprecatedWriteHead+a.o)}}}}};e.makeFloatArray=function(u){return function(){for(var a=new Float32Array(u.length),f=0;f<u.length;f++)a[f]=u[f];return a}},e.stopMediaRecorder=function(u){return function(){u.stop()}},e.mediaRecorderToBlob=function(u){return function(a){return function(f){return function(){var O=[];f.ondataavailable=function(R){O.push(R.data)},f.onstop=function(){var R=new Blob(O,{type:u});a(R)(),O=null}}}}},e.getBrowserMediaStreamImpl=function(u){return function(a){return function(){return navigator.mediaDevices.getUserMedia({audio:u,video:a})}}},e.getByteFrequencyData=function(u){return function(){var a=new Uint8Array(u.frequencyBinCount);return u.getByteFrequencyData(a),a}};var _=function(u){return function(a){return function(f){return function(){for(var O=new Float32Array(a.length),R=new Float32Array(f.length),B=0;B<a.length;B++)O[B]=a[B];for(var B=0;B<f.length;B++)R[B]=f[B];return u.createPeriodicWave(O,R,{disableNormalization:!0})}}}};e.makeFFIAudioSnapshot=function(u){return function(){return{context:u,deprecatedWriteHead:0,units:{},unqidfr:n(10),scopes:{root:[]},unsu:{},toConnect:{}}}},e.close=function(u){return function(){u.close()}},e.fetchArrayBuffer=function(u){return function(){return fetch(u).then(function(a){return a.arrayBuffer()},function(a){return console.error("Error fetching buffer",a),Promise.reject(a)})}},e.decodeAudioDataFromArrayBuffer=function(u){return function(a){return function(){return u.decodeAudioData(a)}}},e.context=function(){return new(window.AudioContext||window.webkitAudioContext)},e.contextState=function(u){return function(){return u.state}},e.getAudioClockTime=function(u){return function(){return u.currentTime}}})(C["WAGS.Interpret"]=C["WAGS.Interpret"]||{});(function(e){"use strict";e["WAGS.Core"]=e["WAGS.Core"]||{};var n=e["WAGS.Core"],t=e["Control.Alt"],r=e["Control.Plus"],i=e["Data.Functor"],o=e["Data.Hashable"],l=e["Data.Unit"],c=e["Data.Variant"],v=e["Data.Variant.Maybe"],s=e["FRP.Behavior"],d=e["FRP.Event.Class"],h=e["Type.Proxy"],p=function(){function U(){}return U.value=new U,U}(),m=function(){function U(){}return U.value=new U,U}(),x=function(){function U(){}return U.value=new U,U}(),D=function(){function U(){}return U.value=new U,U}(),b=function(){function U(){}return U.value=new U,U}(),g=function(){function U(){}return U.value=new U,U}(),E=function(){function U(){}return U.value=new U,U}(),k=function(){function U(){}return U.value=new U,U}(),W=function(){function U(){}return U.value=new U,U}(),G=function(U){return U},_=function(){function U(De){this.value0=De}return U.create=function(De){return new U(De)},U}(),u=function(){function U(De){this.value0=De}return U.create=function(De){return new U(De)},U}(),a=function(U){return U},f=function(U){return U},O=function(U){return U},R=function(U){return U},B=function(U){return U},L=function(U){return U},F=function(U){return U},$=function(U){return U},Z=function(U){return U},H=function(U){return U},V=function(U){return U},J=function(){function U(){}return U.value=new U,U}(),I=function(){function U(){}return U.value=new U,U}(),A=function(){function U(){}return U.value=new U,U}(),q=function(){function U(){}return U.value=new U,U}(),j=function(){function U(){}return U.value=new U,U}(),re=function(U){return U instanceof u?v.just(U.value0):v.nothing},M=function(U){return function(De){return U instanceof _?U.value0:De}},T=function(U){return U},Q=function(U){return function(De){var Ee=function(X){return function(we){return d.bang(U)(we.makeInput({id:M(X)(De),parent:re(X),scope:v.just(we.scope)}))}};return Ee}},K=function(U){return function(De){var Ee=function(X){return function(we){return d.keepLatest(U)(i.mapFlipped(U.Filterable1().Functor1())(s.sample_(U)(we.ids)(d.bang(U)(l.unit)))(function(ge){var ne=M(X)(ge),se=De(Q(U)(ne));return t.alt(U.Plus0().Alt0())(se(new _(ne))(we))(function(){if(X instanceof u)return d.bang(U)(we.connectXToY({from:ne,to:X.value0}));if(X instanceof _)return r.empty(U.Plus0());throw new Error("Failed pattern match at WAGS.Core (line 131, column 27 - line 133, column 24): "+[X.constructor.name])}())}))}};return Ee}},te=function(U){return function(De){return function(Ee){var X=function(we){return function(ge){return d.keepLatest(U)(i.mapFlipped(U.Filterable1().Functor1())(s.sample_(U)(ge.ids)(d.bang(U)(l.unit)))(function(ne){var se=M(we)(ne),Ae=Ee(Q(U)(se));return t.alt(U.Plus0().Alt0())(De(new _(se))(ge))(Ae(we)(ge))}))}};return X}}},S=c.inj()({reflectSymbol:function(){return"2x"}})(h.Proxy.value)(l.unit),y=function(U){return function(De){return function(Ee){return function(X){var we=function(ge){return function(ne){return d.keepLatest(U)(i.mapFlipped(U.Filterable1().Functor1())(s.sample_(U)(ne.ids)(d.bang(U)(l.unit)))(function(se){var Ae=M(ge)(se);return t.alt(U.Plus0().Alt0())(d.bang(U)(ne.makeSubgraph({id:Ae,parent:re(ge),scenes:i.map(i.functorFn)(function(ee){return ee})(X),scope:ne.scope})))(i.map(U.Filterable1().Functor1())(function(ee){if(ee.value1 instanceof m)return ne.removeSubgraph({id:Ae,pos:o.hash(De)(ee.value0),index:ee.value0});if(ee.value1 instanceof p)return ne.insertSubgraph({id:Ae,pos:o.hash(De)(ee.value0),index:ee.value0});throw new Error("Failed pattern match at WAGS.Core (line 207, column 40 - line 210, column 57): "+[ee.value1.constructor.name])})(Ee))}))}};return we}}}},N=function(U){return function(De){return y(U)(De)}};n.fan=te,n.fix=K,n.useParentIfParent=re,n.Me=_,n.Parent=u,n.mkSubgraph=T,n.Insert=p,n.Remove=m,n.subgraph=N,n.PeriodicOscSpec=G,n._twoX=S,n.TTT7=x,n.TTT8=D,n.TTT9=b,n.TTT10=g,n.TTT11=E,n.TTT12=k,n.TTT13=W,n.ClampedMax=A,n.Max=q,n.Explicit=j,n.Speakers=J,n.Discrete=I,n.InitializeConstant=V,n.InitializeConvolver=H,n.InitializeDelay=Z,n.InitializeGain=$,n.InitializeMicrophone=F,n.InitializeRecorder=L,n.InitializeSawtoothOsc=B,n.InitializeSinOsc=R,n.InitializeSquareOsc=O,n.InitializeStereoPanner=f,n.InitializeTriangleOsc=a})(C);(function(e){"use strict";e.createObjectURL=function(n){return function(){return URL.createObjectURL(n)}}})(C["Web.File.Url"]=C["Web.File.Url"]||{});(function(e){"use strict";e["Web.File.Url"]=e["Web.File.Url"]||{};var n=e["Web.File.Url"],t=e["Web.File.Url"];n.createObjectURL=t.createObjectURL})(C);(function(e){"use strict";e["WAGS.Interpret"]=e["WAGS.Interpret"]||{};var n=e["WAGS.Interpret"],t=e["WAGS.Interpret"],r=e["Control.Applicative"],i=e["Control.Bind"],o=e["Control.Category"],l=e["Control.Promise"],c=e["Data.Function"],v=e["Data.Functor"],s=e["Data.Maybe"],d=e["Data.Show"],h=e["Data.Unit"],p=e.Effect,m=e["Effect.Aff"],x=e["Effect.Class"],D=e["Effect.Random"],b=e["FRP.Behavior"],g=e["FRP.Event"],E=e["Unsafe.Coerce"],k=e["WAGS.Core"],W=e["Web.File.Url"],G=function(L){return function(F){return function($){return c.flip(t.mediaRecorderToBlob(L))($)(function(){var Z=i.bindFlipped(p.bindEffect)(F);return function(H){return Z(W.createObjectURL(H))}}())}}},_=function(L){return function(F){return function($){return{scope:"root",ids:v.map(b.functorABehavior(L.Filterable1().Functor1()))(d.show(d.showNumber))(b.behavior(function(Z){return F(g.makeEvent(function(H){return function(){var J=D.random();return g.subscribe($(Z))(function(I){return H(I(J))})()}}))})),destroyUnit:t.destroyUnit_,disconnectXFromY:t.disconnectXFromY_,connectXToY:t.connectXToY_,makeAllpass:t.makeAllpass_,makeAnalyser:t.makeAnalyser_,makeAudioWorkletNode:t.makeAudioWorkletNode_,makeBandpass:t.makeBandpass_,makeConstant:t.makeConstant_,makeConvolver:t.makeConvolver_,makeDelay:t.makeDelay_,makeDynamicsCompressor:t.makeDynamicsCompressor_,makeGain:t.makeGain_,makeHighpass:t.makeHighpass_,makeHighshelf:t.makeHighshelf_,makeIIRFilter:t.makeIIRFilter_,makeInput:t.makeInput_,makeLoopBuf:t.makeLoopBuf_,makeLowpass:t.makeLowpass_,makeLowshelf:t.makeLowshelf_,makeMediaElement:t.makeMediaElement_,makeMicrophone:t.makeMicrophone_,makeNotch:t.makeNotch_,makePeaking:t.makePeaking_,makePeriodicOsc:t.makePeriodicOsc_,makePlayBuf:t.makePlayBuf_,makeRecorder:t.makeRecorder_,makeSawtoothOsc:t.makeSawtoothOsc_,makeSinOsc:t.makeSinOsc_,makeSpeaker:t.makeSpeaker_,setDuration:t.setDuration_,makeSquareOsc:t.makeSquareOsc_,makeStereoPanner:t.makeStereoPanner_,makeSubgraph:function(Z){return function(H){return c.flip(t.makeSubgraph_(Z.id)(Z.parent)(Z.scope))(H)(function(V){return function(J){var I=function(){var A=Z.scenes(V);return $(A(new k.Parent(Z.id))(function(){var q=_(L)(F)($);return{scope:J,ids:q.ids,destroyUnit:q.destroyUnit,disconnectXFromY:q.disconnectXFromY,connectXToY:q.connectXToY,makeAllpass:q.makeAllpass,makeAnalyser:q.makeAnalyser,makeAudioWorkletNode:q.makeAudioWorkletNode,makeBandpass:q.makeBandpass,makeConstant:q.makeConstant,makeConvolver:q.makeConvolver,makeDelay:q.makeDelay,makeDynamicsCompressor:q.makeDynamicsCompressor,makeGain:q.makeGain,makeHighpass:q.makeHighpass,makeHighshelf:q.makeHighshelf,makeInput:q.makeInput,makeIIRFilter:q.makeIIRFilter,makeLoopBuf:q.makeLoopBuf,makeLowpass:q.makeLowpass,makeLowshelf:q.makeLowshelf,makeMediaElement:q.makeMediaElement,makeMicrophone:q.makeMicrophone,makeNotch:q.makeNotch,makePeaking:q.makePeaking,makePeriodicOsc:q.makePeriodicOsc,makePlayBuf:q.makePlayBuf,makeRecorder:q.makeRecorder,makeSawtoothOsc:q.makeSawtoothOsc,makeSinOsc:q.makeSinOsc,makeSpeaker:q.makeSpeaker,makeSquareOsc:q.makeSquareOsc,makeStereoPanner:q.makeStereoPanner,makeSubgraph:q.makeSubgraph,makeTriangleOsc:q.makeTriangleOsc,makeTumult:q.makeTumult,makeWaveShaper:q.makeWaveShaper,setAnalyserNodeCb:q.setAnalyserNodeCb,setMediaRecorderCb:q.setMediaRecorderCb,setWaveShaperCurve:q.setWaveShaperCurve,setAudioWorkletParameter:q.setAudioWorkletParameter,setBuffer:q.setBuffer,setConvolverBuffer:q.setConvolverBuffer,setPeriodicOsc:q.setPeriodicOsc,setOnOff:q.setOnOff,setBufferOffset:q.setBufferOffset,setDuration:q.setDuration,setLoopStart:q.setLoopStart,setLoopEnd:q.setLoopEnd,setRatio:q.setRatio,setOffset:q.setOffset,setAttack:q.setAttack,setGain:q.setGain,setQ:q.setQ,setPan:q.setPan,setThreshold:q.setThreshold,setRelease:q.setRelease,setKnee:q.setKnee,setDelay:q.setDelay,setPlaybackRate:q.setPlaybackRate,setFrequency:q.setFrequency,removeSubgraph:q.removeSubgraph,insertSubgraph:q.insertSubgraph,setTumult:q.setTumult}}()))}();return{actualized:I}}})}},makeTriangleOsc:t.makeTriangleOsc_,makeTumult:function(Z){return function(H){return r.pure(p.applicativeEffect)(h.unit)}},makeWaveShaper:t.makeWaveShaper_,setAnalyserNodeCb:t.setAnalyserNodeCb_,setMediaRecorderCb:t.setMediaRecorderCb_,setWaveShaperCurve:t.setWaveShaperCurve_,setAudioWorkletParameter:t.setAudioWorkletParameter_,setBuffer:t.setBuffer_,setConvolverBuffer:t.setConvolverBuffer_,setPeriodicOsc:t.setPeriodicOsc_,setOnOff:t.setOnOff_,setBufferOffset:t.setBufferOffset_,setLoopStart:t.setLoopStart_,setLoopEnd:t.setLoopEnd_,setRatio:t.setRatio_,setOffset:t.setOffset_,setAttack:t.setAttack_,setGain:t.setGain_,setQ:t.setQ_,setPan:t.setPan_,setThreshold:t.setThreshold_,setRelease:t.setRelease_,setKnee:t.setKnee_,setDelay:t.setDelay_,setPlaybackRate:t.setPlaybackRate_,setFrequency:t.setFrequency_,removeSubgraph:t.removeSubgraph_,insertSubgraph:t.insertSubgraph_,setTumult:function(Z){return function(H){return r.pure(p.applicativeEffect)(h.unit)}}}}}},u=_(g.eventIsEvent)(o.identity(o.categoryFn))(o.identity(o.categoryFn)),a=function(L){return function(F){return i.bind(m.bindAff)(l.toAffE(t.fetchArrayBuffer(F)))(function(){var $=t.decodeAudioDataFromArrayBuffer(L);return function(Z){return l.toAffE($(Z))}}())}},f=m.bracket(x.liftEffect(m.monadEffectAff)(t.context))(function(){var L=x.liftEffect(m.monadEffectAff);return function(F){return L(t.close(F))}}()),O=E.unsafeCoerce,R=E.unsafeCoerce,B=function(L){return function(F){return v.map(m.functorAff)(function($){return{microphone:function(){return L?r.pure(s.applicativeMaybe)(O($)):s.Nothing.value}(),camera:function(){return F?r.pure(s.applicativeMaybe)(R($)):s.Nothing.value}()}})(l.toAffE(t.getBrowserMediaStreamImpl(L)(F)))}};n.mediaRecorderToUrl=G,n.decodeAudioDataFromUri=a,n.ctxAff=f,n.getMicrophoneAndCamera=B,n.effectfulAudioInterpret=u,n.getByteFrequencyData=t.getByteFrequencyData,n.getAudioClockTime=t.getAudioClockTime,n.stopMediaRecorder=t.stopMediaRecorder,n.makeFloatArray=t.makeFloatArray,n.context=t.context,n.contextState=t.contextState,n.close=t.close,n.makeFFIAudioSnapshot=t.makeFFIAudioSnapshot})(C);(function(e){"use strict";e["WAGS.Clock"]=e["WAGS.Clock"]||{};var n=e["WAGS.Clock"],t=e["Control.Applicative"],r=e["Control.Apply"],i=e["Control.Bind"],o=e["Data.Foldable"],l=e["Data.Int"],c=e["Data.Maybe"],v=e["Data.Ord"],s=e.Effect,d=e["Effect.Ref"],h=e["Effect.Timer"],p=e["FRP.Event"],m=e["WAGS.Interpret"],x=function(b){return function(g){return p.makeEvent(function(E){return p.subscribe(g)(function(k){return function(){var G=m.getAudioClockTime(b)();return E({acTime:G,value:k})()}})})}},D=function(b){return function(g){return function(E){var k=function(W){return function(G){return function(_){return function(u){return function(a){return function(f){return function(){var R=d.read(_)();return t.when(s.applicativeEffect)(R)(function(){var L=m.getAudioClockTime(b)(),F=h.setTimeout(l.round(v.max(v.ordNumber)(G-L-.04)(.01)*1e3))(function(){var Z=d.read(_)();return t.when(s.applicativeEffect)(Z)(function(){return d.write(G)(a)(),W(G)(),k(W)(G+f)(_)(u)(a)(f)()})()})();return d.write(new c.Just(F))(u)()})()}}}}}}};return p.makeEvent(function(W){return function(){var _=d.new(!0)(),u=d.new(c.Nothing.value)(),a=m.getAudioClockTime(b)(),f=d.new(a+g)();k(W)(g)(_)(u)(f)(g)();var O=p.subscribe(E)(function(R){return function(){i.bind(s.bindEffect)(d.read(u))(o.traverse_(s.applicativeEffect)(o.foldableMaybe)(h.clearTimeout))();var L=d.read(f)();return k(W)(L+R)(_)(u)(f)(R)()}})();return r.applySecond(s.applyEffect)(r.applySecond(s.applyEffect)(O)(d.write(!1)(_)))(i.bind(s.bindEffect)(d.read(u))(o.traverse_(s.applicativeEffect)(o.foldableMaybe)(h.clearTimeout)))}})}}};n.withACTime=x,n.interval=D})(C);(function(e){"use strict";e["WAGS.Common"]=e["WAGS.Common"]||{};var n=e["WAGS.Common"],t=e["Control.Category"],r=e.ConvertableOptions,i=e["Data.Variant"],o=e["Data.Variant.Maybe"],l=e["Data.Vec"],c=e["Safe.Coerce"],v=e["Type.Equality"],s=e["Type.Proxy"],d=e["WAGS.Core"],h=function(){function z(){}return z.value=new z,z}(),p=function(){function z(){}return z.value=new z,z}(),m=function(){function z(){}return z.value=new z,z}(),x=function(){function z(){}return z.value=new z,z}(),D=function(){function z(){}return z.value=new z,z}(),b=function(){function z(){}return z.value=new z,z}(),g=function(){function z(){}return z.value=new z,z}(),E=function(){function z(){}return z.value=new z,z}(),k=function(){function z(){}return z.value=new z,z}(),W=function(){function z(){}return z.value=new z,z}(),G=function(){function z(){}return z.value=new z,z}(),_=function(){function z(){}return z.value=new z,z}(),u=function(){function z(){}return z.value=new z,z}(),a=function(z){return{toPeriodicOscSpec:function(ve){return d.PeriodicOscSpec(i.inj()({reflectSymbol:function(){return"realImg"}})(s.Proxy.value)({real:l.toArray(ve.value0),img:l.toArray(ve.value1)}))}}},f={toInitializeTriangleOsc:function(z){return d.InitializeTriangleOsc(function(ve){return{frequency:ve}}(z))}},O={toInitializeStereoPanner:function(z){return d.InitializeStereoPanner(function(ve){return{pan:ve}}(z))}},R={toInitializeSquareOsc:function(z){return d.InitializeSquareOsc(function(ve){return{frequency:ve}}(z))}},B={toInitializeSinOsc:function(z){return d.InitializeSinOsc(function(ve){return{frequency:ve}}(z))}},L={toInitializeSawtoothOsc:function(z){return d.InitializeSawtoothOsc(function(ve){return{frequency:ve}}(z))}},F={toInitializeRecorder:function(z){return d.InitializeRecorder(function(ve){return{cb:ve}}(z))}},$={toInitializeMicrophone:function(z){return d.InitializeMicrophone(function(ve){return{microphone:ve}}(z))}},Z=function(z){return function(ve){return{toInitializeIIRFilter:function(Ve){return function(Et){return function(bt){return{feedforward:v.proof(v.refl)(c.coerce()(Ve.value0)),feedback:v.proof(v.refl)(c.coerce()(Ve.value1))}}}}}}},H={toInitializeGain:function(z){return d.InitializeGain(function(ve){return{gain:ve}}(z))}},V={toInitializeDelay:function(z){return d.InitializeDelay(function(ve){return{delayTime:ve}}(z))}},J={toInitializeConvolver:function(z){return d.InitializeConvolver(function(ve){return{buffer:ve}}(z))}},I={toInitializeConstant:function(z){return d.InitializeConstant(function(ve){return{offset:ve}}(z))}},A={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},q={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},j={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},re={convertOption:function(z){return function(ve){return o.just}}},M={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},T={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},Q={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},K={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},te={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},S={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},y={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},N={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},U={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},De={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},Ee={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},X={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},we={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},ge={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},ne={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},se={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},Ae={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},ee={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},xe={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},fe={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},le={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},he={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},_e={convertOption:function(z){return function(ve){return t.identity(t.categoryFn)}}},Oe=function(z){return z.toPeriodicOscSpec},Ie=function(z){return{convertOption:function(ve){return function(Ve){return Oe(z)}}}},Ge=function(z){return z.toInitializeWaveShaper},Te=function(z){return z.toInitializeTriangleOsc},Me=function(z){return z.toInitializeStereoPanner},je=function(z){return z.toInitializeSquareOsc},ke=function(z){return z.toInitializeSinOsc},me=function(z){return z.toInitializeSawtoothOsc},Ce=function(z){return z.toInitializeRecorder},Fe=function(z){return z.toInitializePlayBuf},We=function(z){return z.toInitializePeriodicOsc},qe=function(z){return z.toInitializePeaking},Ne=function(z){return z.toInitializeNotch},Le=function(z){return z.toInitializeMicrophone},Re=function(z){return z.toInitializeLowshelf},Be=function(z){return z.toInitializeLowpass},Ue=function(z){return z.toInitializeLoopBuf},Se=function(z){return z.toInitializeIIRFilter},Je=function(z){return z.toInitializeHighshelf},w=function(z){return z.toInitializeHighpass},oe=function(z){return z.toInitializeGain},ue=function(z){return z.toInitializeDynamicsCompressor},pe=function(z){return z.toInitializeDelay},be=function(z){return z.toInitializeConvolver},ce=function(z){return z.toInitializeConstant},ye=function(z){return z.toInitializeBandpass},ae=function(z){return z.toInitializeAllpass},Y={oversample:d._twoX},ie=function(z){return{toInitializeWaveShaper:function(ve){return r.convertOptionsWithDefaults(z)(h.value)(Y)(ve)}}},P={toInitializeWaveShaper:function(){var z=Ge(ie(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(A)()()()({reflectSymbol:function(){return"curve"}})))(r.defaultsRecord()())));return function(ve){return z(function(Ve){return{curve:Ve}}(ve))}}()},de={bufferOffset:0,playbackRate:1,duration:o.nothing},at=function(z){return{toInitializePlayBuf:function(ve){return r.convertOptionsWithDefaults(z)(p.value)(de)(ve)}}},ut={toInitializePlayBuf:function(){var z=Fe(at(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(q)()()()({reflectSymbol:function(){return"buffer"}})))(r.defaultsRecord()())));return function(ve){return z(function(Ve){return{buffer:Ve}}(ve))}}()},ze={},Qe=function(z){return{toInitializePeriodicOsc:function(ve){return r.convertOptionsWithDefaults(z)(m.value)(ze)(ve)}}},He={q:1,gain:0},Pe=function(z){return{toInitializePeaking:function(ve){return r.convertOptionsWithDefaults(z)(x.value)(He)(ve)}}},Ye={q:1},Ke=function(z){return{toInitializeNotch:function(ve){return r.convertOptionsWithDefaults(z)(D.value)(Ye)(ve)}}},ot={gain:0},ct=function(z){return{toInitializeLowshelf:function(ve){return r.convertOptionsWithDefaults(z)(b.value)(ot)(ve)}}},lt={q:1},rt=function(z){return{toInitializeLowpass:function(ve){return r.convertOptionsWithDefaults(z)(g.value)(lt)(ve)}}},st={toInitializeLowpass:function(){var z=Be(rt(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(Ee)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())));return function(ve){return z(function(Ve){return{frequency:Ve}}(ve))}}()},mt={loopStart:0,loopEnd:0,playbackRate:1,duration:o.nothing},Ze=function(z){return{toInitializeLoopBuf:function(ve){return r.convertOptionsWithDefaults(z)(E.value)(mt)(ve)}}},Xe={toInitializeLoopBuf:function(){var z=Ue(Ze(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(X)()()()({reflectSymbol:function(){return"buffer"}})))(r.defaultsRecord()())));return function(ve){return z(function(Ve){return{buffer:Ve}}(ve))}}()},$e={gain:0},et=function(z){return{toInitializeHighshelf:function(ve){return r.convertOptionsWithDefaults(z)(k.value)($e)(ve)}}},tt={q:1},it=function(z){return{toInitializeHighpass:function(ve){return r.convertOptionsWithDefaults(z)(W.value)(tt)(ve)}}},nt={toInitializeHighpass:function(){var z=w(it(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(xe)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())));return function(ve){return z(function(Ve){return{frequency:Ve}}(ve))}}()},ft={ratio:12,attack:.003,release:.25,knee:30,threshold:-24},vt=function(z){return{toInitializeDynamicsCompressor:function(ve){return r.convertOptionsWithDefaults(z)(G.value)(ft)(ve)}}},_t={q:1},dt=function(z){return{toInitializeBandpass:function(ve){return r.convertOptionsWithDefaults(z)(_.value)(_t)(ve)}}},xt={toInitializeBandpass:function(){var z=ye(dt(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(le)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())));return function(ve){return z(function(Ve){return{frequency:Ve}}(ve))}}()},ht={q:1},pt=function(z){return{toInitializeAllpass:function(ve){return r.convertOptionsWithDefaults(z)(u.value)(ht)(ve)}}},Dt={toInitializeAllpass:function(){var z=ae(pt(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(_e)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())));return function(ve){return z(function(Ve){return{frequency:Ve}}(ve))}}()};n.toInitializeAllpass=ae,n.toInitializeBandpass=ye,n.toInitializeConstant=ce,n.toInitializeConvolver=be,n.toInitializeDelay=pe,n.toInitializeDynamicsCompressor=ue,n.toInitializeGain=oe,n.toInitializeHighpass=w,n.toInitializeHighshelf=Je,n.toInitializeIIRFilter=Se,n.toInitializeLoopBuf=Ue,n.toInitializeLowpass=Be,n.toInitializeLowshelf=Re,n.toInitializeMicrophone=Le,n.toInitializeNotch=Ne,n.toInitializePeaking=qe,n.toInitializePeriodicOsc=We,n.toInitializePlayBuf=Fe,n.toInitializeRecorder=Ce,n.toInitializeSawtoothOsc=me,n.toInitializeSinOsc=ke,n.toInitializeSquareOsc=je,n.toInitializeStereoPanner=Me,n.toInitializeTriangleOsc=Te,n.toInitializeWaveShaper=Ge,n.convertOptionAllpassOptio1=_e,n.convertOptionAllpassOptio=he,n.initialAllpassInitialAudi=Dt,n.initialAllpassRecord=pt,n.convertOptionBandpassOpti1=le,n.convertOptionBandpassOpti=fe,n.initialBandpassInitialAud=xt,n.initialBandpassRecord=dt,n.initialConstantNumber=I,n.initialConvolverBrowserAu=J,n.initialIIRFilterVecNumber=Z,n.initialDelayNumber=V,n.initialDynamicsCompressor1=vt,n.initialGainNumber=H,n.convertOptionHighpassOpti1=xe,n.convertOptionHighpassOpti=ee,n.initialHighpassInitialAud=nt,n.initialHighpassRecord=it,n.convertOptionHighshelfOpt1=Ae,n.convertOptionHighshelfOpt=se,n.initialHighshelfRecord=et,n.convertOptionLoopBufOptio4=ne,n.convertOptionLoopBufOptio2=ge,n.convertOptionLoopBufOptio1=we,n.convertOptionLoopBufOptio=X,n.initialLoopBufBrowserAudi=Xe,n.initialLoopBufRecord=Ze,n.convertOptionLowpassOptio1=Ee,n.convertOptionLowpassOptio=De,n.initialLowpassInitialAudi=st,n.initialLowpassRecord=rt,n.convertOptionLowshelfOpti1=U,n.convertOptionLowshelfOpti=N,n.initialLowshelfRecord=ct,n.initialMicrophoneBrowserM=$,n.convertOptionNotchOptions1=y,n.convertOptionNotchOptions=S,n.initialNotchRecord=Ke,n.initialStereoPannerNumber=O,n.convertOptionPeakingOptio2=te,n.convertOptionPeakingOptio1=K,n.convertOptionPeakingOptio=Q,n.initialPeakingRecord=Pe,n.convertOptionPlayBufOptio3=M,n.convertOptionPlayBufOptio2=re,n.convertOptionPlayBufOptio1=j,n.convertOptionPlayBufOptio=q,n.initialPlayBufBrowserAudi=ut,n.initialPlayBufRecord=at,n.convertOptionPeriodicOscO=T,n.periodicOscSpecableVecNum=a,n.convertOptionPeriodicOscO1=Ie,n.initialPeriodicOscRecord=Qe,n.initialSawtoothOscNumber=L,n.initialSquareOscNumber=R,n.initialRecorderMediaRecor=F,n.initialSinOscNumber=B,n.initialTriangleOscNumber=f,n.initialWaveShaperBrowserF=P})(C);(function(e){"use strict";e["WAGS.Control"]=e["WAGS.Control"]||{};var n=e["WAGS.Control"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Category"],o=e["Control.Plus"],l=e.ConvertableOptions,c=e["Data.Foldable"],v=e["Data.Function"],s=e["Data.Functor"],d=e["Data.Int"],h=e["Data.Profunctor"],p=e["Data.Unit"],m=e["Data.Variant"],x=e["Data.Variant.Maybe"],D=e["Data.Vec"],b=e.Effect,g=e["FRP.Behavior"],E=e["FRP.Event.Class"],k=e["Type.Proxy"],W=e["WAGS.Common"],G=e["WAGS.Core"],_=function(){function w(){}return w.value=new w,w}(),u={convertOption:function(w){return function(oe){return i.identity(i.categoryFn)}}},a={convertOption:function(w){return function(oe){return i.identity(i.categoryFn)}}},f=function(w){return w.toInitializePlayBuf},O=function(w){return w.toInitializeAnalyser},R=function(w){return function(oe){return function(ue){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ue.ids)(E.bang(w)(p.unit)))(function(pe){return t.alt(w.Plus0().Alt0())(E.bang(w)(ue.makeSpeaker({id:pe})))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(be){return function(ce){return ce}(be)(new G.Parent(pe))(ue)})(oe)))}))}}},B=function(w){return R(w)},L=function(w){return w instanceof G.Me?h.lcmap(h.profunctorFn)(v.const(w.value0)):i.identity(i.categoryFn)},F=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializePeaking(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makePeaking({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,q:ce.q,gain:ce.gain})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},q:function(de){return Y.setQ({id:ie,q:de})},gain:function(de){return Y.setGain({id:ie,gain:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},$=function(w){return function(oe){return function(ue){return function(pe){return F(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},Z=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeRecorder(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeRecorder({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),cb:be.cb})))(function(ie){return ie}(pe)(new G.Parent(Y))(ae))})))}};return ce}}}},H=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeWaveShaper(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeWaveShaper({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),curve:be.curve,oversample:be.oversample})))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(ie){return function(P){return P}(ie)(new G.Parent(Y))(ae)})(pe)))})))}};return ce}}}},V=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeStereoPanner(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeStereoPanner({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),pan:ce.pan})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({pan:function(de){return Y.setPan({id:ie,pan:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},J=function(w){return function(oe){return function(ue){return V(w)(oe)(ue)(o.empty(w.Plus0()))}}},I=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeNotch(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeNotch({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,q:ce.q})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},q:function(de){return Y.setQ({id:ie,q:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},A=function(w){return function(oe){return function(ue){return function(pe){return I(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},q=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeLowshelf(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeLowshelf({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,gain:ce.gain})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},gain:function(de){return Y.setGain({id:ie,gain:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},j=function(w){return function(oe){return function(ue){return function(pe){return q(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},re=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeLowpass(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeLowpass({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,q:ce.q})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},q:function(de){return Y.setQ({id:ie,q:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},M=function(w){return function(oe){return function(ue){return function(pe){return re(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},T=function(w){return function(oe){return function(ue){return function(pe){return function(be){return function(ce){return function(ye){return function(ae){var Y=W.toInitializeIIRFilter(pe)(ye)(be)(ce),ie=function(P){return function(de){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(de.ids)(E.bang(w)(p.unit)))(L(P)(function(at){return t.alt(w.Plus0().Alt0())(E.bang(w)(de.makeIIRFilter({id:at,parent:G.useParentIfParent(P),scope:x.just(de.scope),feedforward:D.toArray(Y.feedforward),feedback:D.toArray(Y.feedback)})))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(ut){return function(ze){return ze}(ut)(new G.Parent(at))(de)})(ae)))})))}};return ie}}}}}}}},Q=function(w){return function(oe){return function(ue){return function(pe){return T(w)()()(pe)(k.Proxy.value)(k.Proxy.value)}}}},K=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeHighshelf(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeHighshelf({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,gain:ce.gain})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},gain:function(de){return Y.setGain({id:ie,gain:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},te=function(w){return function(oe){return function(ue){return function(pe){return K(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},S=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeHighpass(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeHighpass({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,q:ce.q})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},q:function(de){return Y.setQ({id:ie,q:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},y=function(w){return function(oe){return function(ue){return function(pe){return S(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},N=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeGain(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeGain({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),gain:ce.gain})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({gain:function(de){return Y.setGain({id:ie,gain:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},U=function(w){return function(oe){return function(ue){return function(pe){return N(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},De=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeDynamicsCompressor(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeDynamicsCompressor({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),threshold:ce.threshold,ratio:ce.ratio,knee:ce.knee,attack:ce.attack,release:ce.release})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({threshold:function(de){return Y.setThreshold({id:ie,threshold:de})},ratio:function(de){return Y.setRatio({id:ie,ratio:de})},knee:function(de){return Y.setKnee({id:ie,knee:de})},attack:function(de){return Y.setAttack({id:ie,attack:de})},release:function(de){return Y.setRelease({id:ie,release:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},Ee=function(w){return function(oe){return function(ue){return De(w)(oe)(ue)(o.empty(w.Plus0()))}}},X=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeDelay(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeDelay({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),delayTime:ce.delayTime})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({delayTime:function(de){return Y.setDelay({id:ie,delayTime:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},we=function(w){return function(oe){return function(ue){return function(pe){return X(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},ge={cb:function(w){return r.pure(b.applicativeEffect)(r.pure(b.applicativeEffect)(p.unit))},fftSize:G.TTT11.value,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8,channelCount:2,channelCountMode:G.Max.value,channelInterpretation:G.Speakers.value},ne=function(w){return{toInitializeAnalyser:function(oe){return l.convertOptionsWithDefaults(w)(_.value)(ge)(oe)}}},se=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeConvolver(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeConvolver({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),buffer:be.buffer})))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(ie){return function(P){return P}(ie)(new G.Parent(Y))(ae)})(pe)))})))}};return ce}}}},Ae=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeBandpass(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeBandpass({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,q:ce.q})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},q:function(de){return Y.setQ({id:ie,q:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},ee=function(w){return function(oe){return function(ue){return function(pe){return Ae(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},xe=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=O(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeAnalyser({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),cb:ce.cb,fftSize:d.pow(2)(function(){if(ce.fftSize instanceof G.TTT7)return 7;if(ce.fftSize instanceof G.TTT8)return 8;if(ce.fftSize instanceof G.TTT9)return 9;if(ce.fftSize instanceof G.TTT10)return 10;if(ce.fftSize instanceof G.TTT11)return 11;if(ce.fftSize instanceof G.TTT12)return 12;if(ce.fftSize instanceof G.TTT13)return 13;throw new Error("Failed pattern match at WAGS.Control (line 198, column 23 - line 205, column 36): "+[ce.fftSize.constructor.name])}()),maxDecibels:ce.maxDecibels,minDecibels:ce.minDecibels,smoothingTimeConstant:ce.smoothingTimeConstant,channelCount:ce.channelCount,channelCountMode:function(){if(ce.channelCountMode instanceof G.Explicit)return"explicit";if(ce.channelCountMode instanceof G.Max)return"max";if(ce.channelCountMode instanceof G.ClampedMax)return"clamped-max";throw new Error("Failed pattern match at WAGS.Control (line 211, column 37 - line 214, column 48): "+[ce.channelCountMode.constructor.name])}(),channelInterpretation:function(){if(ce.channelInterpretation instanceof G.Speakers)return"speakers";if(ce.channelInterpretation instanceof G.Discrete)return"discrete";throw new Error("Failed pattern match at WAGS.Control (line 215, column 42 - line 217, column 43): "+[ce.channelInterpretation.constructor.name])}()})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({cb:function(de){return Y.setAnalyserNodeCb({id:ie,cb:de})}})(P)})(pe)))(function(P){return P}(be)(new G.Parent(ie))(Y))})))}};return ye}}}}},fe=function(w){return function(oe){return function(ue){return xe(w)(oe)(ue)(o.empty(w.Plus0()))}}},le=function(w){return function(oe){return function(ue){return function(pe){return function(be){var ce=W.toInitializeAllpass(oe)(ue),ye=function(ae){return function(Y){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(Y.ids)(E.bang(w)(p.unit)))(L(ae)(function(ie){return t.alt(w.Plus0().Alt0())(t.alt(w.Plus0().Alt0())(E.bang(w)(Y.makeAllpass({id:ie,parent:G.useParentIfParent(ae),scope:x.just(Y.scope),frequency:ce.frequency,q:ce.q})))(s.map(w.Filterable1().Functor1())(function(P){return m.match()()()({frequency:function(de){return Y.setFrequency({id:ie,frequency:de})},q:function(de){return Y.setQ({id:ie,q:de})}})(P)})(pe)))(c.oneOf(c.foldableArray)(w.Plus0())(s.map(s.functorArray)(function(P){return function(de){return de}(P)(new G.Parent(ie))(Y)})(be)))})))}};return ye}}}}},he=function(w){return function(oe){return function(ue){return function(pe){return le(w)(oe)(ue)(o.empty(w.Plus0()))(pe)}}}},_e=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeTriangleOsc(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeTriangleOsc({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),frequency:be.frequency})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({frequency:function(P){return ae.setFrequency({id:Y,frequency:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})}})(ie)})(pe))})))}};return ce}}}},Oe=function(w){return function(oe){return _e(w)(oe)}},Ie=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeSquareOsc(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeSquareOsc({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),frequency:be.frequency})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({frequency:function(P){return ae.setFrequency({id:Y,frequency:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})}})(ie)})(pe))})))}};return ce}}}},Ge=function(w){return function(oe){return Ie(w)(oe)}},Te=function(w){return function(oe){return function(ue){return Ge(w)(oe)(ue)(o.empty(w.Plus0()))}}},Me=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeSinOsc(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeSinOsc({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),frequency:be.frequency})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({frequency:function(P){return ae.setFrequency({id:Y,frequency:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})}})(ie)})(pe))})))}};return ce}}}},je=function(w){return function(oe){return Me(w)(oe)}},ke=function(w){return function(oe){return function(ue){return je(w)(oe)(ue)(o.empty(w.Plus0()))}}},me=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeSawtoothOsc(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeSawtoothOsc({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),frequency:be.frequency})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({frequency:function(P){return ae.setFrequency({id:Y,frequency:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})}})(ie)})(pe))})))}};return ce}}}},Ce=function(w){return function(oe){return me(w)(oe)}},Fe=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializePlayBuf(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makePlayBuf({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),buffer:be.buffer,playbackRate:be.playbackRate,bufferOffset:be.bufferOffset,duration:be.duration})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({buffer:function(P){return ae.setBuffer({id:Y,buffer:P})},playbackRate:function(P){return ae.setPlaybackRate({id:Y,playbackRate:P})},bufferOffset:function(P){return ae.setBufferOffset({id:Y,bufferOffset:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})},duration:function(P){return ae.setDuration({id:Y,duration:P})}})(ie)})(pe))})))}};return ce}}}},We=function(w){return function(oe){return Fe(w)(oe)}},qe=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializePeriodicOsc(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makePeriodicOsc({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),frequency:be.frequency,spec:be.spec})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({frequency:function(P){return ae.setFrequency({id:Y,frequency:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})},spec:function(P){return ae.setPeriodicOsc({id:Y,spec:P})}})(ie)})(pe))})))}};return ce}}}},Ne=function(w){return function(oe){return qe(w)(oe)}},Le=function(w){return function(oe){return function(ue){var pe=W.toInitializeMicrophone(oe)(ue),be=function(ce){return function(ye){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ye.ids)(E.bang(w)(p.unit)))(L(ce)(function(ae){return E.bang(w)(ye.makeMicrophone({id:ae,parent:G.useParentIfParent(ce),scope:x.just(ye.scope),microphone:pe.microphone}))})))}};return be}}},Re=function(w){return function(oe){return Le(w)(oe)}},Be=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeLoopBuf(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeLoopBuf({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),buffer:be.buffer,playbackRate:be.playbackRate,loopStart:be.loopStart,loopEnd:be.loopEnd,duration:be.duration})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({buffer:function(P){return ae.setBuffer({id:Y,buffer:P})},playbackRate:function(P){return ae.setPlaybackRate({id:Y,playbackRate:P})},loopStart:function(P){return ae.setLoopStart({id:Y,loopStart:P})},loopEnd:function(P){return ae.setLoopEnd({id:Y,loopEnd:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})}})(ie)})(pe))})))}};return ce}}}},Ue=function(w){return function(oe){return Be(w)(oe)}},Se=function(w){return function(oe){return function(ue){return function(pe){var be=W.toInitializeConstant(oe)(ue),ce=function(ye){return function(ae){return E.keepLatest(w)(s.mapFlipped(w.Filterable1().Functor1())(g.sample_(w)(ae.ids)(E.bang(w)(p.unit)))(L(ye)(function(Y){return t.alt(w.Plus0().Alt0())(E.bang(w)(ae.makeConstant({id:Y,parent:G.useParentIfParent(ye),scope:x.just(ae.scope),offset:be.offset})))(s.map(w.Filterable1().Functor1())(function(ie){return m.match()()()({offset:function(P){return ae.setOffset({id:Y,offset:P})},onOff:function(P){return ae.setOnOff({id:Y,onOff:P})}})(ie)})(pe))})))}};return ce}}}},Je=function(w){return function(oe){return Se(w)(oe)}};n.allpass_=he,n.analyser_=fe,n.bandpass=Ae,n.bandpass_=ee,n.constant=Je,n.convolver=se,n.delay=X,n.delay_=we,n.dynamicsCompressor_=Ee,n.gain=N,n.gain_=U,n.highpass=S,n.highpass_=y,n.highshelf_=te,n.iirFilter=Q,n.lowpass_=M,n.lowshelf_=j,n.loopBuf=Ue,n.microphone=Re,n.notch_=A,n.peaking_=$,n.periodicOsc=Ne,n.playBuf=We,n.recorder=Z,n.sawtoothOsc=Ce,n.sinOsc=je,n.sinOsc_=ke,n.squareOsc=Ge,n.squareOsc_=Te,n.speaker2=B,n.pan_=J,n.triangleOsc=Oe,n.waveShaper=H,n.convertOptionAnalyserOpti1=a,n.convertOptionAnalyserOpti=u,n.initialAnalyserRecord=ne})(C);(function(e){e.scrollToTop_=function(){window.scrollTo(0,0)}})(C["WAGS.Example.Docs.Util"]=C["WAGS.Example.Docs.Util"]||{});(function(e){"use strict";e["WAGS.Example.Docs.Types"]=e["WAGS.Example.Docs.Types"]||{};var n=e["WAGS.Example.Docs.Types"],t=e["Data.Generic.Rep"],r=e["Data.Hashable"],i=e["Data.Show"],o=e["Data.Show.Generic"],l=function(){function a(f){this.value0=f}return a.create=function(f){return new a(f)},a}(),c=function(){function a(){}return a.value=new a,a}(),v=function(){function a(){}return a.value=new a,a}(),s=function(){function a(){}return a.value=new a,a}(),d=function(){function a(){}return a.value=new a,a}(),h=function(){function a(){}return a.value=new a,a}(),p=function(){function a(){}return a.value=new a,a}(),m=function(){function a(){}return a.value=new a,a}(),x=function(){function a(){}return a.value=new a,a}(),D=function(){function a(){}return a.value=new a,a}(),b=function(){function a(){}return a.value=new a,a}(),g=function(){function a(){}return a.value=new a,a}(),E=function(){function a(f){this.value0=f}return a.create=function(f){return new a(f)},a}(),k=function(){function a(f){this.value0=f}return a.create=function(f){return new a(f)},a}(),W={to:function(a){if(a instanceof t.Inl)return c.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inl)return v.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inl)return s.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inl)return d.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0 instanceof t.Inl)return h.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0 instanceof t.Inl)return p.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0 instanceof t.Inl)return m.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inl)return x.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inl)return D.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inl)return b.value;if(a instanceof t.Inr&&a.value0 instanceof t.Inr&&a.value0.value0 instanceof t.Inr&&a.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inr&&a.value0.value0.value0.value0.value0.value0.value0.value0.value0 instanceof t.Inr)return g.value;throw new Error("Failed pattern match at WAGS.Example.Docs.Types (line 24, column 1 - line 24, column 31): "+[a.constructor.name])},from:function(a){if(a instanceof c)return new t.Inl(t.NoArguments.value);if(a instanceof v)return new t.Inr(new t.Inl(t.NoArguments.value));if(a instanceof s)return new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value)));if(a instanceof d)return new t.Inr(new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value))));if(a instanceof h)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value)))));if(a instanceof p)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value))))));if(a instanceof m)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value)))))));if(a instanceof x)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value))))))));if(a instanceof D)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value)))))))));if(a instanceof b)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inl(t.NoArguments.value))))))))));if(a instanceof g)return new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(new t.Inr(t.NoArguments.value))))))))));throw new Error("Failed pattern match at WAGS.Example.Docs.Types (line 24, column 1 - line 24, column 31): "+[a.constructor.name])}},G={eq:function(a){return function(f){return a instanceof c&&f instanceof c||a instanceof v&&f instanceof v||a instanceof s&&f instanceof s||a instanceof d&&f instanceof d||a instanceof h&&f instanceof h||a instanceof p&&f instanceof p||a instanceof m&&f instanceof m||a instanceof x&&f instanceof x||a instanceof D&&f instanceof D||a instanceof b&&f instanceof b||a instanceof g&&f instanceof g}}},_={show:function(a){return o.genericShow(W)(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"Intro"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"HelloWorld"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"AudioUnits"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"Events"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"FixFan"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"MultiChannel"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"AudioWorklets"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"Imperative"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"State"}}))(o.genericShowSum(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"Subgraph"}}))(o.genericShowConstructor(o.genericShowArgsNoArguments)({reflectSymbol:function(){return"Tumult"}}))))))))))))(a)}},u={hash:function(){var a=r.hash(r.hashableString),f=i.show(_);return function(O){return a(f(O))}}(),Eq0:function(){return G}};n.Intro=c,n.HelloWorld=v,n.AudioUnits=s,n.Events=d,n.FixFan=h,n.MultiChannel=p,n.AudioWorklets=m,n.Imperative=x,n.State=D,n.Subgraph=b,n.Tumult=g,n.ChangePage=E,n.SetCancelation=k,n.SetCancel=l,n.eqPage=G,n.hashablePage=u})(C);(function(e){"use strict";e["WAGS.Example.Docs.Util"]=e["WAGS.Example.Docs.Util"]||{};var n=e["WAGS.Example.Docs.Util"],t=e["WAGS.Example.Docs.Util"],r=e["Control.Alt"],i=e["Control.Applicative"],o=e["Control.Apply"],l=e["Control.Bind"],c=e["Control.Parallel.Class"],v=e["Data.Exists"],s=e["Data.Function"],d=e["Data.Functor"],h=e["Data.Hashable"],p=e["Data.Tuple"],m=e["Data.Unit"],x=e["Deku.Attribute"],D=e["Deku.Control"],b=e["Deku.DOM.Attr.OnClick"],g=e["Deku.DOM.Attr.Style"],E=e["Deku.DOM.Elt.Button"],k=e["Deku.DOM.Elt.Span"],W=e["Deku.Subgraph"],G=e.Effect,_=e["Effect.Aff"],u=e["Effect.Class"],a=e["Effect.Exception"],f=e["FRP.Event"],O=e["FRP.Event.Class"],R=e["WAGS.Example.Docs.Types"],B=function(){function j(){}return j.value=new j,j}(),L=function(){function j(re){this.value0=re}return j.create=function(re){return new j(re)},j}(),F=function(){function j(){}return j.value=new j,j}(),$=t.scrollToTop_,Z=function(j){return c.sequential(_.parallelAff)(r.alt(_.altParAff)(c.parallel(_.parallelAff)(l.bind(_.bindAff)(_.joinFiber(j))(u.liftEffect(_.monadEffectAff))))(c.parallel(_.parallelAff)(_.killFiber(a.error("We navigated away from the page"))(j))))},H=function(j){return function(re){return function(M){return function(T){return r.alt(j)(O.bang(re)(F.value))(T)}}}},V=function(j){return function(re){return function(M){return function(T){return r.alt(j)(O.bang(re)(x.attr(b.attrOnClickCb)(b.OnClick.value)(x.cb(s.const(T)))))(d.map(j.Functor0())(function(Q){return x.attr(b.attrOnClickCb)(b.OnClick.value)(x.cb(s.const(o.applySecond(G.applyEffect)(Q)(T))))})(d.map(j.Functor0())(function(Q){return Q.value0})(M)))}}}},J=function(j){return function(re){return function(M){return function(T){return function(Q){return function(K){return function(te){return function(S){return function(y){return d.map(j)(function(N){return x.attr(b.attrOnClickCb)(b.OnClick.value)(x.cb(s.const(function(){if(N.value0 instanceof B)return i.pure(G.applicativeEffect)(m.unit);if(N.value0 instanceof L)return o.applySecond(G.applyEffect)(o.applySecond(G.applyEffect)(N.value0.value0)(T(i.pure(G.applicativeEffect)(m.unit))))(Q(F.value));if(N.value0 instanceof F)return function(){N.value1(),Q(B.value)();var De=_.launchAff(l.bind(_.bindAff)(K)(function(Ee){return u.liftEffect(_.monadEffectAff)(function(){var we=te(Ee)();return Q(new L(we))(),we})}))();return l.discard(re)(G.bindEffect)(T(function(){return Q(F.value)(),_.launchAff_(Z(De))()}))(function(){return i.pure(G.applicativeEffect)(m.unit)})()};throw new Error("Failed pattern match at WAGS.Example.Docs.Util (line 48, column 21 - line 63, column 26): "+[N.value0.constructor.name])}())))})(O.biSampleOn(M)(r.alt(M.Plus0().Alt0())(O.bang(M)(i.pure(G.applicativeEffect)(m.unit)))(d.map(j)(function(N){return N.value0})(S)))(d.map(j)(p.Tuple.create)(y)))}}}}}}}}},I=function(j){return function(re){return function(M){return function(){return j(M)(),re(new R.SetCancel(M))()}}}},A=function(j){return function(re){return function(M){return function(T){return function(Q){return W.subgraph(h.hashableUnit)(f.eventIsEvent)(O.bang(f.eventIsEvent)(new p.Tuple(m.unit,W.Insert.value)))(function(K){return v.mkExists(function(te){return function(S){var y=H(f.altEvent)(f.eventIsEvent)(re)(S);return k.span(f.eventIsEvent)(r.alt(f.altEvent)(O.bang(f.eventIsEvent)(x.attr(g.attrSpan_StyleString)(g.Style.value)("cursor: pointer;")))(J(f.functorEvent)(l.discardUnit)(f.eventIsEvent)(M)(te)(T)(Q)(re)(y)))([D.text(f.eventIsEvent)(d.map(f.functorEvent)(function(N){if(N instanceof F)return j;if(N instanceof B)return"\u23F3";if(N instanceof L)return"\u{1F6D1}";throw new Error("Failed pattern match at WAGS.Example.Docs.Util (line 114, column 19 - line 117, column 37): "+[N.constructor.name])})(y))])}})})}}}}},q=function(j){return function(re){return function(M){return function(T){return W.subgraph(h.hashableUnit)(f.eventIsEvent)(O.bang(f.eventIsEvent)(new p.Tuple(m.unit,W.Insert.value)))(function(Q){return v.mkExists(function(K){return function(te){var S=H(f.altEvent)(f.eventIsEvent)(j)(te);return E.button(f.eventIsEvent)(J(f.functorEvent)(l.discardUnit)(f.eventIsEvent)(re)(K)(M)(T)(j)(S))([D.text(f.eventIsEvent)(d.map(f.functorEvent)(function(y){if(y instanceof F)return"Turn on";if(y instanceof B)return"Loading...";if(y instanceof L)return"Turn off";throw new Error("Failed pattern match at WAGS.Example.Docs.Util (line 87, column 19 - line 90, column 44): "+[y.constructor.name])})(S))])}})})}}}};n.scrollToTop=$,n.Loading=B,n.Playing=L,n.Stopped=F,n.ccassp=I,n.raceSelf=Z,n.clickCb=J,n.mkWrapperEvent=H,n.audioWrapper=q,n.audioWrapperSpan=A,n.mkNext=V})(C);(function(e){"use strict";e["WAGS.Parameter"]=e["WAGS.Parameter"]||{};var n=e["WAGS.Parameter"],t=e["Control.Category"],r=e["Data.Lens.Iso.Newtype"],i=e["Data.Lens.Record"],o=e["Data.Lens.Setter"],l=e["Data.Newtype"],c=e["Data.Profunctor"],v=e["Data.Profunctor.Strong"],s=e["Data.Unit"],d=e["Data.Variant"],h=e["FRP.Event.Class"],p=e["Type.Proxy"],m=function(Z){return Z},x=function(Z){return Z},D=function(Z){return Z},b=function(Z){return Z},g={toAudioOnOff:t.identity(t.categoryFn)},E=function(Z){return Z.toAudioParameter},k=function(Z){return Z.toAudioOnOff},W=function(Z){return o.over(function(){var H=r._Newtype()()(c.profunctorFn),V=i.prop({reflectSymbol:function(){return"o"}})()()(p.Proxy.value)(v.strongFn);return function(J){return H(V(J))}}())},G=function(){var Z=d.inj()({reflectSymbol:function(){return"sudden"}})(p.Proxy.value);return function(H){return b(Z(H))}}(),_={toAudioParameter:function(Z){return G({n:Z})}},u=x(d.inj()({reflectSymbol:function(){return"on"}})(p.Proxy.value)(s.unit)),a={x:u,o:0},f=function(Z){return function(H){return h.bang(Z)(l.wrap()(d.inj()({reflectSymbol:function(){return"onOff"}})(p.Proxy.value)(a)))}},O=x(d.inj()({reflectSymbol:function(){return"off"}})(p.Proxy.value)(s.unit)),R=function(){var Z=d.inj()({reflectSymbol:function(){return"numeric"}})(p.Proxy.value);return function(H){return b(Z(H))}}(),B={toAudioParameter:R},L=m(d.inj()({reflectSymbol:function(){return"linear"}})(p.Proxy.value)(s.unit)),F=function(){var Z=d.inj()({reflectSymbol:function(){return"envelope"}})(p.Proxy.value);return function(H){return b(Z(H))}}(),$={toAudioParameter:F};n.toAudioOnOff=k,n.toAudioParameter=E,n._linear=L,n.AudioEnvelope=D,n._on=u,n._off=O,n.apOn=a,n.bangOn=f,n.dt=W,n.toAudioOnOffAudioOnOff=g,n.toAudioParameterNumber=_,n.toAudioParameterAudioNume=B,n.toAudioParameterAudioEnve=$})(C);(function(e){"use strict";e["WAGS.Run"]=e["WAGS.Run"]||{};var n=e["WAGS.Run"],t=e["Control.Applicative"],r=e["Control.Apply"],i=e.Effect,o=e["FRP.Event"],l=e["WAGS.Control"],c=e["WAGS.Interpret"],v=function(d){return function(h){return function(){var m=c.makeFFIAudioSnapshot(d)(),x=o.subscribe(l.speaker2(o.eventIsEvent)(h)(c.effectfulAudioInterpret))(function(D){return D(m)})();return x}}},s=function(d){return function(){var p=c.context(),m=v(p)(d)();return function(){var D=r.applySecond(i.applyEffect)(m)(c.contextState(p))();return t.when(i.applicativeEffect)(D!=="closed")(c.close(p))()}}};n.run2_=s,n.run2=v})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Allpass"]=e["WAGS.Example.Docs.AudioUnits.Allpass"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Allpass"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Core"],s=e["WAGS.Example.Docs.Util"],d=e["WAGS.Interpret"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=o.Proxy.value,x=function(D){return function(b){return function(g){return r["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2 id="allpass">Allpass filter</h2>
  <p>An <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">all-pass filter</a> <a href="https://en.wikipedia.org/wiki/All-pass_filter">passes through all frequencies of a source at equal volume but changes their phase</a>. Its use by itself is imperceptible, as the human ear (mostly) does not pick up on phase shifts by themselves. However, when an all-pass filter's output is mixed with several chained all-pass filters plus the original source, you hear a neat phaser effect.</p>

  <p>The <code>bangOn</code> is an event that turns the loop buffer on. We'll learn more about turning things on and off in the "Events" section.</p>

  <pre><code>\\buf -> run2_
  [ fan (loopBuf buf bangOn)
      \\b -> gain_ 0.2
        [ b
        , allpass_ 700.0
            [ allpass_ { frequency: 990.0, q: 20.0 } [ b ]
            , allpass_ 1110.0
                [ b
                , allpass_ { frequency: 2010.0, q: 30.0 } [ b ]
                ]
            ]
        ]
  ]
</code></pre>

  @allpass@
  </section>
`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"allpass"}}))(i.eventIsEvent)(o.Proxy.value)(m)({allpass:r.nut(s.audioWrapper(g)(D)(d.ctxAff(function(E){return d.decodeAudioDataFromUri(E)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(E){return p.run2_([v.fan(i.eventIsEvent)(c.loopBuf(i.eventIsEvent)(l.initialLoopBufBrowserAudi)(E)(h.bangOn(i.eventIsEvent)()))(function(k){return c.gain_(i.eventIsEvent)(l.initialGainNumber)(.2)([k,c.allpass_(i.eventIsEvent)(l.initialAllpassInitialAudi)(700)([c.allpass_(i.eventIsEvent)(l.initialAllpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionAllpassOptio)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionAllpassOptio1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:990,q:20})([k]),c.allpass_(i.eventIsEvent)(l.initialAllpassInitialAudi)(1110)([k,c.allpass_(i.eventIsEvent)(l.initialAllpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionAllpassOptio)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionAllpassOptio1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:2010,q:30})([k])])])])})])}))})}}};n.allpass=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Analyser"]=e["WAGS.Example.Docs.AudioUnits.Analyser"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Analyser"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Bind"],o=e["Control.Category"],l=e.ConvertableOptions,c=e["Data.ArrayBuffer.Typed"],v=e["Data.Boolean"],s=e["Data.Either"],d=e["Data.EuclideanRing"],h=e["Data.Exists"],p=e["Data.Filterable"],m=e["Data.Foldable"],x=e["Data.Function"],D=e["Data.Functor"],b=e["Data.Hashable"],g=e["Data.Int"],E=e["Data.Maybe"],k=e["Data.Semiring"],W=e["Data.Traversable"],G=e["Data.Tuple"],_=e["Data.Typelevel.Num.Ops"],u=e["Data.Typelevel.Num.Reps"],a=e["Data.Typelevel.Num.Sets"],f=e["Data.UInt"],O=e["Data.Unit"],R=e["Data.Vec"],B=e["Deku.Attribute"],L=e["Deku.Control"],F=e["Deku.DOM.Attr.Style"],$=e["Deku.DOM.Elt.Button"],Z=e["Deku.DOM.Elt.Div"],H=e["Deku.Pursx"],V=e["Deku.Subgraph"],J=e.Effect,I=e["Effect.Ref"],A=e["FRP.Event"],q=e["FRP.Event.Animate"],j=e["FRP.Event.Class"],re=e["Type.Proxy"],M=e["WAGS.Common"],T=e["WAGS.Control"],Q=e["WAGS.Core"],K=e["WAGS.Example.Docs.Util"],te=e["WAGS.Interpret"],S=e["WAGS.Parameter"],y="background-color: rgb(150,30,10);",N="background-color: rgb(130,60,10);",U="background-color: rgb(80,90,10);",De="background-color: rgb(10,130,10);",Ee="background-color: rgb(10,100,0);",X=R.fill(a.natD8)(function(_e){return R.cons(_.typelevelSucc(a.posD5)()(_.divMod10D4D0)()(_.divMod10D5D0))(y)(R.cons(_.typelevelSucc(a.posD4)()(_.divMod10D3D0)()(_.divMod10D4D0))(N)(R.cons(_.typelevelSucc(a.posD3)()(_.divMod10D2D0)()(_.divMod10D3D0))(U)(R.cons(_.typelevelSucc(a.posD2)()(_.divMod10D1D0)()(_.divMod10D2D0))(De)(R.cons(_.typelevelSucc(a.posD1)()(_.divMod10D0D0)()(_.divMod10D1D0))(Ee)(R.empty)))))}),we=function(_e){return function(Oe){return function(Ie){return function(Ge){return function(Te){return T.analyser_(_e)(T.initialAnalyserRecord(l.convertOptionsWithDefaultsRecord(l.convertOptionsRecord()(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsNil)(T.convertOptionAnalyserOpti1)()()()({reflectSymbol:function(){return"fftSize"}}))(Oe)()()()({reflectSymbol:function(){return"cb"}})))(l.defaultsRecord()())))({cb:Te,fftSize:Q.TTT8.value})(T.loopBuf(_e)(Ie)(Ge)(S.bangOn(_e)()))}}}}},ge=re.Proxy.value,ne="background-color: rgb(255,255,255,0.0);",se=function(_e){return function(Oe){return function(Ie){return function(Ge){return function(Te){return function(Me){return function(je){return function(ke){return function(me){return function(Ce){return function(Fe){return function(We){return D.map(_e)(function(qe){var Ne=R.index(Oe)()(R.index(Ge)()(qe)(Ce))(Fe);return Ne?B.attr(Me)(F.Style.value)(R.index(Oe)()(R.index(ke)()(X)(Ce))(Fe)):B.attr(Me)(F.Style.value)(ne)})(We)}}}}}}}}}}}},Ae=15/40,ee=10/40,xe=7/40,fe=3/40,le=1/40,he=function(_e){return function(Oe){return function(Ie){return H.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="analyser">Analyser</h2>
  <p>An <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode">analyser node</a> provides methods to recuperate the analysed data of an input. This is how, for example, Google Meet shows the little animation around a microphone icon. Wags provides the possibility to use the analyser as the terminus of an audio graph <i>or</i> as part of a longer DSP chain, as in the following example. The example uses an FFT size of 256, which is indicated in Wags as <code>TTT8</code> (two to the eighth power).</p>

  <pre><code>analyser_ { cb, fftSize: TTT8 } (loopBuf atar bangOn)</code></pre>

  ~analyser~
  </section>
`}})()()(H.pursxToElementConsElt()(H.pursxToElementNil(A.plusEvent))({reflectSymbol:function(){return"analyser"}}))(A.eventIsEvent)(ge)({analyser:H.nut(V.subgraph(b.hashableUnit)(A.eventIsEvent)(j.bang(A.eventIsEvent)(new G.Tuple(O.unit,V.Insert.value)))(function(Ge){return h.mkExists(function(Te){return function(Me){var je=p.partitionMap(A.filterableEvent)(o.identity(o.categoryFn))(Me),ke=K.mkWrapperEvent(A.altEvent)(A.eventIsEvent)(Ie)(function(Ce){return Ce.right}(je)),me=function(Ce){return Ce.left}(je);return Z.div_(A.eventIsEvent)([$.button(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrButton_StyleString)(F.Style.value)("cursor: pointer;")))(K.clickCb(A.functorEvent)(i.discardUnit)(A.eventIsEvent)(_e)(function(Ce){return Te(s.Right.create(Ce))})(te.ctxAff(function(Ce){return te.decodeAudioDataFromUri(Ce)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(Ce){return function(){var We=I.new(E.Nothing.value)(),qe=te.context(),Ne=te.makeFFIAudioSnapshot(qe)(),Le=q.animationFrameEvent(),Re=T.speaker2(A.eventIsEvent)([we(A.eventIsEvent)(T.convertOptionAnalyserOpti)(M.initialLoopBufBrowserAudi)(Ce)(function(Ue){return function(){return I.write(new E.Just(Ue))(We)(),I.write(E.Nothing.value)(We)}})])(te.effectfulAudioInterpret),Be=A.subscribe(t.alt(A.altEvent)(D.map(A.functorEvent)(s.Right.create)(Re))(D.map(A.functorEvent)(s.Left.create)(Le)))(function(Ue){if(Ue instanceof s.Right)return Ue.value0(Ne);if(Ue instanceof s.Left)return function(){var Je=I.read(We)();return m.for_(J.applicativeEffect)(m.foldableMaybe)(Je)(function(w){return function(){var ue=te.getByteFrequencyData(w)(),pe=c.toArray(c.typedArrayUint8)(ue)(),be=I.new(0)(),ce=I.new(0)(),ye=I.new(0)(),ae=I.new(0)(),Y=I.new(0)(),ie=I.new(0)(),P=I.new(0)(),de=I.new(0)(),at=I.new(0)(),ut=I.new(0)(),ze=function(He){if(He<32)return be;if(He<64)return ce;if(He<96)return ye;if(He<128)return ae;if(He<168)return Y;if(He<160)return ie;if(He<224)return P;if(v.otherwise)return de;throw new Error("Failed pattern match at WAGS.Example.Docs.AudioUnits.Analyser (line 148, column 45 - line 156, column 63): "+[He.constructor.name])};J.foreachE(pe)(function(He){var Pe=f.toInt(He);return function(){var Ke=I.read(ut)();return I.modify_(k.add(k.semiringInt)(Pe))(at)(),I.modify_(k.add(k.semiringInt)(Pe))(ze(Ke))(),I.modify_(k.add(k.semiringInt)(1))(ut)()}})();var Qe=W.traverse(R.traversableVec)(J.applicativeEffect)(function(He){return function(){var Ye=D.map(J.functorEffect)(g.toNumber)(I.read(He))(),Ke=D.map(J.functorEffect)(d.div(d.euclideanRingNumber)(Ye))(D.map(J.functorEffect)(g.toNumber)(I.read(at)))();return R.cons(_.typelevelSucc(a.posD5)()(_.divMod10D4D0)()(_.divMod10D5D0))(Ke>Ae)(R.cons(_.typelevelSucc(a.posD4)()(_.divMod10D3D0)()(_.divMod10D4D0))(Ke>ee)(R.cons(_.typelevelSucc(a.posD3)()(_.divMod10D2D0)()(_.divMod10D3D0))(Ke>xe)(R.cons(_.typelevelSucc(a.posD2)()(_.divMod10D1D0)()(_.divMod10D2D0))(Ke>fe)(R.cons(_.typelevelSucc(a.posD1)()(_.divMod10D0D0)()(_.divMod10D1D0))(Ke>le)(R.empty)))))}})(R.cons(_.typelevelSucc(a.posD8)()(_.divMod10D7D0)()(_.divMod10D8D0))(be)(R.cons(_.typelevelSucc(a.posD7)()(_.divMod10D6D0)()(_.divMod10D7D0))(ce)(R.cons(_.typelevelSucc(a.posD6)()(_.divMod10D5D0)()(_.divMod10D6D0))(ye)(R.cons(_.typelevelSucc(a.posD5)()(_.divMod10D4D0)()(_.divMod10D5D0))(ae)(R.cons(_.typelevelSucc(a.posD4)()(_.divMod10D3D0)()(_.divMod10D4D0))(Y)(R.cons(_.typelevelSucc(a.posD3)()(_.divMod10D2D0)()(_.divMod10D3D0))(ie)(R.cons(_.typelevelSucc(a.posD2)()(_.divMod10D1D0)()(_.divMod10D2D0))(P)(R.cons(_.typelevelSucc(a.posD1)()(_.divMod10D0D0)()(_.divMod10D1D0))(de)(R.empty)))))))))();return Te(new s.Left(Qe))()}})()};throw new Error("Failed pattern match at WAGS.Example.Docs.AudioUnits.Analyser (line 129, column 57 - line 167, column 57): "+[Ue.constructor.name])})();return function(){return Be(),function(){var Je=te.contextState(qe)();return r.when(J.applicativeEffect)(Je!=="closed")(te.close(qe))()}(),Te(new s.Left(R.fill(a.natD8)(x.const(R.fill(a.natD5)(x.const(!1))))))()}}})(Ie)(ke)))([L.text(A.eventIsEvent)(D.map(A.functorEvent)(function(Ce){if(Ce instanceof K.Stopped)return"Turn on";if(Ce instanceof K.Loading)return"Loading...";if(Ce instanceof K.Playing)return"Turn off";throw new Error("Failed pattern match at WAGS.Example.Docs.AudioUnits.Analyser (line 180, column 31 - line 183, column 56): "+[Ce.constructor.name])})(ke))]),Z.div(A.eventIsEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)("display: grid; grid-template-columns: repeat(8, 1fr); grid-auto-rows: 20px;")))([Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD0)(_.trichD0D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD0)(_.trichD0D8)(u.d0)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD1)(_.trichD1D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD1)(_.trichD1D8)(u.d1)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD2)(_.trichD2D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD2)(_.trichD2D8)(u.d2)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD3)(_.trichD3D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD3)(_.trichD3D8)(u.d3)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD4)(_.trichD4D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD4)(_.trichD4D8)(u.d4)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD5)(_.trichD5D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD5)(_.trichD5D8)(u.d5)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD6)(_.trichD6D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD6)(_.trichD6D8)(u.d6)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD0)(_.trichD0D5)(a.natD7)(_.trichD7D8)(F.attrDiv_StyleString)(_.trichD0D5)(a.natD7)(_.trichD7D8)(u.d7)(u.d0)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD0)(_.trichD0D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD0)(_.trichD0D8)(u.d0)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD1)(_.trichD1D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD1)(_.trichD1D8)(u.d1)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD2)(_.trichD2D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD2)(_.trichD2D8)(u.d2)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD3)(_.trichD3D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD3)(_.trichD3D8)(u.d3)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD4)(_.trichD4D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD4)(_.trichD4D8)(u.d4)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD5)(_.trichD5D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD5)(_.trichD5D8)(u.d5)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD6)(_.trichD6D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD6)(_.trichD6D8)(u.d6)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD1)(_.trichD1D5)(a.natD7)(_.trichD7D8)(F.attrDiv_StyleString)(_.trichD1D5)(a.natD7)(_.trichD7D8)(u.d7)(u.d1)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD0)(_.trichD0D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD0)(_.trichD0D8)(u.d0)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD1)(_.trichD1D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD1)(_.trichD1D8)(u.d1)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD2)(_.trichD2D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD2)(_.trichD2D8)(u.d2)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD3)(_.trichD3D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD3)(_.trichD3D8)(u.d3)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD4)(_.trichD4D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD4)(_.trichD4D8)(u.d4)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD5)(_.trichD5D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD5)(_.trichD5D8)(u.d5)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD6)(_.trichD6D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD6)(_.trichD6D8)(u.d6)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD2)(_.trichD2D5)(a.natD7)(_.trichD7D8)(F.attrDiv_StyleString)(_.trichD2D5)(a.natD7)(_.trichD7D8)(u.d7)(u.d2)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD0)(_.trichD0D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD0)(_.trichD0D8)(u.d0)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD1)(_.trichD1D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD1)(_.trichD1D8)(u.d1)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD2)(_.trichD2D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD2)(_.trichD2D8)(u.d2)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD3)(_.trichD3D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD3)(_.trichD3D8)(u.d3)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD4)(_.trichD4D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD4)(_.trichD4D8)(u.d4)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD5)(_.trichD5D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD5)(_.trichD5D8)(u.d5)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD6)(_.trichD6D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD6)(_.trichD6D8)(u.d6)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD3)(_.trichD3D5)(a.natD7)(_.trichD7D8)(F.attrDiv_StyleString)(_.trichD3D5)(a.natD7)(_.trichD7D8)(u.d7)(u.d3)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD0)(_.trichD0D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD0)(_.trichD0D8)(u.d0)(u.d4)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD1)(_.trichD1D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD1)(_.trichD1D8)(u.d1)(u.d4)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD2)(_.trichD2D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD2)(_.trichD2D8)(u.d2)(u.d4)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD3)(_.trichD3D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD3)(_.trichD3D8)(u.d3)(u.d4)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD4)(_.trichD4D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD4)(_.trichD4D8)(u.d4)(u.d4)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD5)(_.trichD5D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD5)(_.trichD5D8)(u.d5)(u.d4)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD6)(_.trichD6D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD6)(_.trichD6D8)(u.d6)(u.d4)(me)))([]),Z.div(A.eventIsEvent)(t.alt(A.altEvent)(j.bang(A.eventIsEvent)(B.attr(F.attrDiv_StyleString)(F.Style.value)(ne)))(se(A.functorEvent)(a.natD4)(_.trichD4D5)(a.natD7)(_.trichD7D8)(F.attrDiv_StyleString)(_.trichD4D5)(a.natD7)(_.trichD7D8)(u.d7)(u.d4)(me)))([])])])}})}))})}}};n.analyserEx=he})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Bandpass"]=e["WAGS.Example.Docs.AudioUnits.Bandpass"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Bandpass"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Core"],s=e["WAGS.Example.Docs.Util"],d=e["WAGS.Interpret"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=o.Proxy.value,x=function(D){return function(b){return function(g){return r["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2 id="bandpass">Bandpass filter</h2>
  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">bandpass filter</a> isolates a single frequency range of a source. When you crank up a bandpass node's Q value, the isolation gets more intense. At the extreme, the source signal is almost lost and you get a pure sound that resembles a sine-wave oscillator.</p>

  <pre><code>\\buf -> run2_
  [ fan (loopBuf buf bangOn)
      \\b -> gain_ 0.8
        [ bandpass_ { frequency: 400.0, q: 1.0 } [ b ]
        , bandpass_ { frequency: 880.0, q: 5.0 } [ b ]
        , bandpass_ { frequency: 1200.0, q: 10.0 } [ b ]
        , bandpass_ { frequency: 2000.0, q: 20.0 } [ b ]
        , bandpass_ { frequency: 3000.0, q: 30.0 } [ b ]
        ]
  ]</code></pre>

  @bandpass@
  </section>
`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"bandpass"}}))(i.eventIsEvent)(o.Proxy.value)(m)({bandpass:r.nut(s.audioWrapper(g)(D)(d.ctxAff(function(E){return d.decodeAudioDataFromUri(E)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(E){return p.run2_([v.fan(i.eventIsEvent)(c.loopBuf(i.eventIsEvent)(l.initialLoopBufBrowserAudi)(E)(h.bangOn(i.eventIsEvent)()))(function(k){return c.gain_(i.eventIsEvent)(l.initialGainNumber)(.8)([c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:400,q:1})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:880,q:5})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:1200,q:10})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:2e3,q:20})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:3e3,q:30})([k])])})])}))})}}};n.bandpass=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Compression"]=e["WAGS.Example.Docs.AudioUnits.Compression"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Compression"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=o.Proxy.value,m=function(x){return function(D){return function(b){return r.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="compression">Compression</h2>
  <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode">Compression</a>, when used judiciously, can make certain sounds sit better in a mix, like for example vocals. The <a href="https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode">MDN Web Audio documentation</a> does an excellent job explaining how its parameters work. When used not-judiciously, it makes everything sound loud, and who likes that? So let's use it judiciously, like in the example below. We'll pass an object that only specifies the threshold and otherwise use the default options for the compressor.</p>

  <pre><code>
-- defaultDynamicsCompressor =
--   { ratio: 12.0
--   , attack: 0.003
--   , release: 0.25
--   , knee: 30.0
--   , threshold: -24.0
--   }
run2_
  [ dynamicsCompressor_ { threshold: -50.0 }
      [ loopBuf buf bangOn ]
  ]</code></pre>

  ~compression~
  </section>
`}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"compression"}}))(i.eventIsEvent)(p)({compression:r.nut(v.audioWrapper(b)(x)(s.ctxAff(function(g){return s.decodeAudioDataFromUri(g)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(g){return h.run2_([c.dynamicsCompressor_(i.eventIsEvent)(l.initialDynamicsCompressor1(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsNil))(t.defaultsRecord()())))({})([c.loopBuf(i.eventIsEvent)(l.initialLoopBufBrowserAudi)(g)(d.bangOn(i.eventIsEvent)())])])}))})}}};n.compression=m})(C);(function(e){"use strict";e["WAGS.Properties"]=e["WAGS.Properties"]||{};var n=e["WAGS.Properties"],t=e["Data.Newtype"],r=e["Data.Variant"],i=e["Type.Proxy"],o=e["WAGS.Parameter"],l=function(x){return function(D){var b=t.wrap(),g=r.inj()({reflectSymbol:function(){return"playbackRate"}})(i.Proxy.value),E=o.toAudioParameter(D);return function(k){return b(g(E(k)))}}},c=function(x){return function(D){var b=t.wrap(),g=r.inj()({reflectSymbol:function(){return"onOff"}})(i.Proxy.value),E=o.toAudioOnOff(D);return function(k){return b(g(E(k)))}}},v=function(x){return function(D){var b=t.wrap(),g=r.inj()({reflectSymbol:function(){return"offset"}})(i.Proxy.value),E=o.toAudioParameter(D);return function(k){return b(g(E(k)))}}},s=function(x){var D=t.wrap(),b=r.inj()({reflectSymbol:function(){return"loopStart"}})(i.Proxy.value);return function(g){return D(b(g))}},d=function(x){var D=t.wrap(),b=r.inj()({reflectSymbol:function(){return"loopEnd"}})(i.Proxy.value);return function(g){return D(b(g))}},h=function(x){return function(D){var b=t.wrap(),g=r.inj()({reflectSymbol:function(){return"gain"}})(i.Proxy.value),E=o.toAudioParameter(D);return function(k){return b(g(E(k)))}}},p=function(x){return function(D){var b=t.wrap(),g=r.inj()({reflectSymbol:function(){return"frequency"}})(i.Proxy.value),E=o.toAudioParameter(D);return function(k){return b(g(E(k)))}}},m=function(x){return function(D){var b=t.wrap(),g=r.inj()({reflectSymbol:function(){return"delayTime"}})(i.Proxy.value),E=o.toAudioParameter(D);return function(k){return b(g(E(k)))}}};n.delayTime=m,n.frequency=p,n.gain=h,n.loopEnd=d,n.loopStart=s,n.offset=v,n.onOff=c,n.playbackRate=l})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Constant"]=e["WAGS.Example.Docs.AudioUnits.Constant"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Constant"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Data.Array"],o=e["Data.EuclideanRing"],l=e["Data.Function"],c=e["Data.FunctorWithIndex"],v=e["Data.Unit"],s=e["Deku.Control"],d=e["Deku.Pursx"],h=e["Effect.Aff"],p=e["FRP.Event"],m=e["FRP.Event.Class"],x=e["Type.Proxy"],D=e["WAGS.Common"],b=e["WAGS.Control"],g=e["WAGS.Example.Docs.Util"],E=e["WAGS.Parameter"],k=e["WAGS.Properties"],W=e["WAGS.Run"],G=x.Proxy.value,_=function(u){return function(a){return function(f){return d.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="constant">Constant value</h2>
  <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ConstantSourceNode">Constant values</a>, or DC offset, is a way to output an unchanging stream of values. This is only really useful when testing the performance of speakers or microphones and/or when working with a custom audio node that supports constant streaming values. Note that the constant source node in the web audio API can <i>also</i> be used to control audio parameters. Wags uses this feature of constant nodes under the hood to optimize certain computations.</p>

  <p>The following example abuses a constant audio node by turning it into a gnarly inpulse generator. We'll learn about the tie fighter symbol <code>~tf~</code> and the <code>bang</code> in the next section on Events. Kids, don't try this at home!</p>

  <pre><code>~txt~</code></pre>

  ~constant~
  </section>
`}})()()(d.pursxToElementConsElt()(d.pursxToElementConsElt()(d.pursxToElementConsElt()(d.pursxToElementNil(p.plusEvent))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"tf"}}))({reflectSymbol:function(){return"constant"}}))(p.eventIsEvent)(G)({tf:d.nut(s.text_(p.eventIsEvent)("<|>")),txt:d.nut(s.text_(p.eventIsEvent)(`run2_
  [ gain_ 0.5
      [ constant 0.0
          ( bangOn <|>
              ( bang $ offset $ AudioEnvelope
                  { d: 5.0
                  , o: 0.1
                  , p: 0 .. 1920 # mapWithIndex
                      \\i -> const $
                      if i \`mod\` 3 == 0 then 1.0
                      else 0.0
                  }
              )
          )
      ]
  ]`)),constant:d.nut(g.audioWrapper(f)(u)(r.pure(h.applicativeAff)(v.unit))(function(O){return W.run2_([b.gain_(p.eventIsEvent)(D.initialGainNumber)(.5)([b.constant(p.eventIsEvent)(D.initialConstantNumber)(0)(t.alt(p.altEvent)(E.bangOn(p.eventIsEvent)())(m.bang(p.eventIsEvent)(k.offset()(E.toAudioParameterAudioEnve)({d:5,o:.1,p:c.mapWithIndex(c.functorWithIndexArray)(function(R){return l.const(function(){var B=o.mod(o.euclideanRingInt)(R)(3)===0;return B?1:0}())})(i.range(0)(1920))}))))])])}))})}}};n.constantEx=_})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Convolution"]=e["WAGS.Example.Docs.AudioUnits.Convolution"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Convolution"],t=e["Control.Apply"],r=e["Data.Functor"],i=e["Deku.Pursx"],o=e["Effect.Aff"],l=e["FRP.Event"],c=e["Type.Proxy"],v=e["WAGS.Common"],s=e["WAGS.Control"],d=e["WAGS.Example.Docs.Util"],h=e["WAGS.Interpret"],p=e["WAGS.Parameter"],m=e["WAGS.Run"],x=c.Proxy.value,D=function(b){return function(g){return function(E){return i.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="convolution">Convolution</h2>
  <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ConvolverNode">Convolution</a>, aka reverb, is a way to graft the shape of one sound (usually an <a href="https://en.wikipedia.org/wiki/Impulse_response">impulse response</a>) onto another. Convolution can sound great, but it is a <i>very expensive operation</i> that will cause noticeable artifacts on low-end devices. When shipping audio code to production, you're usually better off using an Audio Worklet Node with reverb optimized for your specific case. That said, for PoCs or hobbyist projects, convolution is great!</p>

  <pre><code>\\{loop, verb} -> run2_
  [ convolver verb [ loopBuf loop bangOn ] ]</code></pre>

  ~convolution~
  </section>
`}})()()(i.pursxToElementConsElt()(i.pursxToElementNil(l.plusEvent))({reflectSymbol:function(){return"convolution"}}))(l.eventIsEvent)(x)({convolution:i.nut(d.audioWrapper(E)(b)(h.ctxAff(function(k){return t.apply(o.applyAff)(r.map(o.functorAff)(function(W){return function(G){return{loop:W,verb:G}}})(h.decodeAudioDataFromUri(k)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")))(h.decodeAudioDataFromUri(k)("https://cdn.jsdelivr.net/gh/andibrae/Reverb.js/Library/StMarysAbbeyReconstructionPhase3.m4a"))}))(function(k){return m.run2_([s.convolver(l.eventIsEvent)(v.initialConvolverBrowserAu)(k.verb)([s.loopBuf(l.eventIsEvent)(v.initialLoopBufBrowserAudi)(k.loop)(p.bangOn(l.eventIsEvent)())])])}))})}}};n.convolution=D})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Delay"]=e["WAGS.Example.Docs.AudioUnits.Delay"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Delay"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=e["WAGS.Common"],l=e["WAGS.Control"],c=e["WAGS.Core"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=i.Proxy.value,m=function(x){return function(D){return function(b){return t["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2 id="delay">Delay</h2>
  <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DelayNode">Delay</a>, as its name suggests, delays a signal. Using multiple delay nodes, you can create a decent echo effect.</p>

  <p>To create an even <i>better</i> echo effect, you can used fixed points, which is covered in the <a>Fix and fan</a> section of this documentation.</p>

  <pre><code>\\buf -> run2_
  [ fan (playBuf buf bangOn)
      \\b -> gain_ 0.2
        [ delay_ 0.03 [ b ]
        , delay_ 0.1 [ b ]
        , delay_ 0.3 [ b ]
        , delay_ 0.7 [ b ]
        ]
  ]</code></pre>

  @delay@
  </section>
`}})({reflectSymbol:function(){return"@"}})()()(t.pursxToElementConsElt()(t.pursxToElementNil(r.plusEvent))({reflectSymbol:function(){return"delay"}}))(r.eventIsEvent)(i.Proxy.value)(p)({delay:t.nut(v.audioWrapper(b)(x)(s.ctxAff(function(g){return s.decodeAudioDataFromUri(g)("https://freesound.org/data/previews/339/339822_5121236-lq.mp3")}))(function(g){return h.run2_([c.fan(r.eventIsEvent)(l.playBuf(r.eventIsEvent)(o.initialPlayBufBrowserAudi)(g)(d.bangOn(r.eventIsEvent)()))(function(E){return l.gain_(r.eventIsEvent)(o.initialGainNumber)(.2)([l.delay_(r.eventIsEvent)(o.initialDelayNumber)(.03)([E]),l.delay_(r.eventIsEvent)(o.initialDelayNumber)(.1)([E]),l.delay_(r.eventIsEvent)(o.initialDelayNumber)(.3)([E]),l.delay_(r.eventIsEvent)(o.initialDelayNumber)(.7)([E])])})])}))})}}};n.delay=m})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Gain"]=e["WAGS.Example.Docs.AudioUnits.Gain"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Gain"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=e["WAGS.Common"],l=e["WAGS.Control"],c=e["WAGS.Example.Docs.Util"],v=e["WAGS.Interpret"],s=e["WAGS.Parameter"],d=e["WAGS.Run"],h=i.Proxy.value,p=function(m){return function(x){return function(D){return t.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="gain">Gain</h2>
  <p>The almighty <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode">gain</a> node is your friendly neighborhood volume control. Volume in the web-audio API goes from 0 to 1 whereas we hear logarithmically, so when you're using this, make sure to convert between decibels and gain if you want to work with more intuitive units. The conversion formula is as follows:</p>

  <pre><code>decibels = 20 * log10( gain );</code></pre>

  <p>And here's a little example of a single gain node:</p>

  <pre><code>run2_
  [ gain_ 0.1
    [ loopBuf buf bangOn ]
  ] </code></pre>

  ~gain~
  </section>
`}})()()(t.pursxToElementConsElt()(t.pursxToElementNil(r.plusEvent))({reflectSymbol:function(){return"gain"}}))(r.eventIsEvent)(h)({gain:t.nut(c.audioWrapper(D)(m)(v.ctxAff(function(b){return v.decodeAudioDataFromUri(b)("https://freesound.org/data/previews/339/339822_5121236-lq.mp3")}))(function(b){return d.run2_([l.gain_(r.eventIsEvent)(o.initialGainNumber)(.1)([l.loopBuf(r.eventIsEvent)(o.initialLoopBufBrowserAudi)(b)(s.bangOn(r.eventIsEvent)())])])}))})}}};n.gain=p})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Highpass"]=e["WAGS.Example.Docs.AudioUnits.Highpass"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Highpass"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=e["WAGS.Common"],l=e["WAGS.Control"],c=e["WAGS.Example.Docs.Util"],v=e["WAGS.Interpret"],s=e["WAGS.Parameter"],d=e["WAGS.Run"],h=i.Proxy.value,p=function(m){return function(x){return function(D){return t.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="highpass">Highpass filter</h2>
  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">highpass filter</a> lets higher frequencies pass and amortizes lower ones. If you amp up the Q value, the effect will be sharper.</p>

  <pre><code>\\buf -> run2_
  [ highpass_ 2000.0
      [ loopBuf buf bangOn ]
  ]
</code></pre>

  ~highpass~
  </section>
`}})()()(t.pursxToElementConsElt()(t.pursxToElementNil(r.plusEvent))({reflectSymbol:function(){return"highpass"}}))(r.eventIsEvent)(h)({highpass:t.nut(c.audioWrapper(D)(m)(v.ctxAff(function(b){return v.decodeAudioDataFromUri(b)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(b){return d.run2_([l.highpass_(r.eventIsEvent)(o.initialHighpassInitialAud)(2e3)([l.loopBuf(r.eventIsEvent)(o.initialLoopBufBrowserAudi)(b)(s.bangOn(r.eventIsEvent)())])])}))})}}};n.highpass=p})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Highshelf"]=e["WAGS.Example.Docs.AudioUnits.Highshelf"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Highshelf"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=o.Proxy.value,m=function(x){return function(D){return function(b){return r.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="highshelf">Highshelf filter</h2>
  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">highshelf filter</a> boosts or attenuates high frequencies using a <code>gain</code> parameter, where gain is expressed in decibels from -40.0 to 40.0.</p>

  <pre><code>\\buf -> run2_
  [ highshelf_ { frequency: 2000.0, gain: 0. }
      [ loopBuf buf bangOn ]
  ]</code></pre>

  ~highshelf~
  </section>
`}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"highshelf"}}))(i.eventIsEvent)(p)({highshelf:r.nut(v.audioWrapper(b)(x)(s.ctxAff(function(g){return s.decodeAudioDataFromUri(g)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(g){return h.run2_([c.highshelf_(i.eventIsEvent)(l.initialHighshelfRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionHighshelfOpt)()()()({reflectSymbol:function(){return"gain"}}))(l.convertOptionHighshelfOpt1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:2e3,gain:.4})([c.loopBuf(i.eventIsEvent)(l.initialLoopBufBrowserAudi)(g)(d.bangOn(i.eventIsEvent)())])])}))})}}};n.highshelf=m})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.IIRFilter"]=e["WAGS.Example.Docs.AudioUnits.IIRFilter"]||{};var n=e["WAGS.Example.Docs.AudioUnits.IIRFilter"],t=e["Data.Tuple"],r=e["Data.Typelevel.Num.Ops"],i=e["Data.Typelevel.Num.Sets"],o=e["Data.Vec"],l=e["Deku.Pursx"],c=e["FRP.Event"],v=e["Type.Equality"],s=e["Type.Proxy"],d=e["WAGS.Common"],h=e["WAGS.Control"],p=e["WAGS.Example.Docs.Util"],m=e["WAGS.Interpret"],x=e["WAGS.Parameter"],D=e["WAGS.Run"],b=s.Proxy.value,g=function(E){return function(k){return function(W){return l.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="iir">IIR filter</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/IIRFilterNode">IIR filter</a>, or infinite impulse response filter, is the Swiss Army Knife of filters. You can carve out and boost parts of the spectrum with amazing precision. But it comes with a catch: you can't automate the parameters. The parameters are also tough to work with if you're new to IIR filters. In short, you're setting up coefficients for a filter of type:</p>

  <pre><code>x0s0 + x1s1 + x2s2 + ... + y0S0 + y1S1 + y2S2 + ...</code></pre>

  <p>Where <code>s1</code> is the unfiltered signal at time <code>t-1</code>, <code>S0</code> is the <i>filtered</i> signal at time <code>t-1</code>, etc. The xs and ys are often called <i>feedforward</i> and <i>feedback</i> coefficients respectively.</p>

  <p>Because the Web Audio API accepts between 3 and 20 parameters for feedforward and feedback coefficients, Wags enforces that through a <a href="https://github.com/bodil/purescript-sized-vectors">sized vector</a>.</p>

  <pre><code>\\{loop, verb} -> run2_
  [ iirFilter
      ( (0.00020298 +> 0.0004059599 +> 0.00020298 +> empty)
          /\\ (1.0126964558 +> -1.9991880801 +> 0.9873035442 +> empty)
      )
      [ loopBuf buf bangOn ]
  ]</code></pre>
  ~iirFilterEx~
  </section>
`}})()()(l.pursxToElementConsElt()(l.pursxToElementNil(c.plusEvent))({reflectSymbol:function(){return"iirFilterEx"}}))(c.eventIsEvent)(b)({iirFilterEx:l.nut(p.audioWrapper(W)(E)(m.ctxAff(function(G){return m.decodeAudioDataFromUri(G)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(G){return D.run2_([h.iirFilter(c.eventIsEvent)()()(d.initialIIRFilterVecNumber(v.refl)(v.refl))(new t.Tuple(o.cons(r.typelevelSucc(i.posD3)()(r.divMod10D2D0)()(r.divMod10D3D0))(20298e-8)(o.cons(r.typelevelSucc(i.posD2)()(r.divMod10D1D0)()(r.divMod10D2D0))(.0004059599)(o.cons(r.typelevelSucc(i.posD1)()(r.divMod10D0D0)()(r.divMod10D1D0))(20298e-8)(o.empty))),o.cons(r.typelevelSucc(i.posD3)()(r.divMod10D2D0)()(r.divMod10D3D0))(1.0126964558)(o.cons(r.typelevelSucc(i.posD2)()(r.divMod10D1D0)()(r.divMod10D2D0))(-1.9991880801)(o.cons(r.typelevelSucc(i.posD1)()(r.divMod10D0D0)()(r.divMod10D1D0))(.9873035442)(o.empty)))))([h.loopBuf(c.eventIsEvent)(d.initialLoopBufBrowserAudi)(G)(x.bangOn(c.eventIsEvent)())])])}))})}}};n.iirFilterEx=g})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.LoopBuf"]=e["WAGS.Example.Docs.AudioUnits.LoopBuf"]||{};var n=e["WAGS.Example.Docs.AudioUnits.LoopBuf"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=o.Proxy.value,m=function(x){return function(D){return function(b){return r["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2 id="loopbuf">Looping buffer</h2>

  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode">looping buffer</a> is buffered audio that loops. The buffered audio is usually a sound file, but it'll play anything you write to a buffer. Like in the Web Audio API, you can set the buffer's start and end and optionally its duration.</p>

  <pre><code>\\buf -> run2_
  [ loopBuf
      { buffer: buf
      , playbackRate: 0.5
      , loopStart: 0.1
      , loopEnd: 0.6
      }
      bangOn
  , loopBuf
      { buffer: buf
      , playbackRate: 1.0
      , loopStart: 0.5
      , loopEnd: 1.2
      }
      bangOn
  , loopBuf
      { buffer: buf
      , playbackRate: 1.7
      }
      bangOn
  ]</code></pre>

  @loopBuf@
  </section>
`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"loopBuf"}}))(i.eventIsEvent)(o.Proxy.value)(p)({loopBuf:r.nut(v.audioWrapper(b)(x)(s.ctxAff(function(g){return s.decodeAudioDataFromUri(g)("https://freesound.org/data/previews/100/100981_1234256-lq.mp3")}))(function(g){return h.run2_([c.loopBuf(i.eventIsEvent)(l.initialLoopBufRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionLoopBufOptio4)()()()({reflectSymbol:function(){return"playbackRate"}}))(l.convertOptionLoopBufOptio2)()()()({reflectSymbol:function(){return"loopStart"}}))(l.convertOptionLoopBufOptio1)()()()({reflectSymbol:function(){return"loopEnd"}}))(l.convertOptionLoopBufOptio)()()()({reflectSymbol:function(){return"buffer"}})))(t.defaultsRecord()())))({buffer:g,playbackRate:.5,loopStart:.1,loopEnd:.6})(d.bangOn(i.eventIsEvent)()),c.loopBuf(i.eventIsEvent)(l.initialLoopBufRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionLoopBufOptio4)()()()({reflectSymbol:function(){return"playbackRate"}}))(l.convertOptionLoopBufOptio2)()()()({reflectSymbol:function(){return"loopStart"}}))(l.convertOptionLoopBufOptio1)()()()({reflectSymbol:function(){return"loopEnd"}}))(l.convertOptionLoopBufOptio)()()()({reflectSymbol:function(){return"buffer"}})))(t.defaultsRecord()())))({buffer:g,playbackRate:1,loopStart:.5,loopEnd:1.2})(d.bangOn(i.eventIsEvent)()),c.loopBuf(i.eventIsEvent)(l.initialLoopBufRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionLoopBufOptio4)()()()({reflectSymbol:function(){return"playbackRate"}}))(l.convertOptionLoopBufOptio)()()()({reflectSymbol:function(){return"buffer"}})))(t.defaultsRecord()())))({buffer:g,playbackRate:1.7})(d.bangOn(i.eventIsEvent)())])}))})}}};n.loopBufEx=m})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Lowpass"]=e["WAGS.Example.Docs.AudioUnits.Lowpass"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Lowpass"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=e["WAGS.Common"],l=e["WAGS.Control"],c=e["WAGS.Example.Docs.Util"],v=e["WAGS.Interpret"],s=e["WAGS.Parameter"],d=e["WAGS.Run"],h=i.Proxy.value,p=function(m){return function(x){return function(D){return t.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="lowpass">Lowpass filter</h2>
  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">lowpass filter</a> lets lower frequencies pass and amortizes higher ones. If you amp up the Q value, the effect will be sharper.</p>

  <pre><code>\\buf -> run2_
  [ lowpass_ 215.0 [ loopBuf buf bangOn ] ]
</code></pre>

  ~lowpass~
  </section>
`}})()()(t.pursxToElementConsElt()(t.pursxToElementNil(r.plusEvent))({reflectSymbol:function(){return"lowpass"}}))(r.eventIsEvent)(h)({lowpass:t.nut(c.audioWrapper(D)(m)(v.ctxAff(function(b){return v.decodeAudioDataFromUri(b)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(b){return d.run2_([l.lowpass_(r.eventIsEvent)(o.initialLowpassInitialAudi)(215)([l.loopBuf(r.eventIsEvent)(o.initialLoopBufBrowserAudi)(b)(s.bangOn(r.eventIsEvent)())])])}))})}}};n.lowpass=p})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Lowshelf"]=e["WAGS.Example.Docs.AudioUnits.Lowshelf"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Lowshelf"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=o.Proxy.value,m=function(x){return function(D){return function(b){return r.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="lowshelf">Lowshelf filter</h2>
  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">lowshelf filter</a> boosts or attenuates lower frequencies using a <code>gain</code> parameter, where gain is expressed in decibels from -40.0 to 40.0.</p>

  <pre><code>\\buf -> run2_
   [ lowshelf_ { frequency: 91.0, gain: 10.0 }
       [ loopBuf buf bangOn ]
   ]
</code></pre>

  ~lowshelf~
  </section>
`}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"lowshelf"}}))(i.eventIsEvent)(p)({lowshelf:r.nut(v.audioWrapper(b)(x)(s.ctxAff(function(g){return s.decodeAudioDataFromUri(g)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(g){return h.run2_([c.lowshelf_(i.eventIsEvent)(l.initialLowshelfRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionLowshelfOpti)()()()({reflectSymbol:function(){return"gain"}}))(l.convertOptionLowshelfOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:91,gain:.4})([c.loopBuf(i.eventIsEvent)(l.initialLoopBufBrowserAudi)(g)(d.bangOn(i.eventIsEvent)())])])}))})}}};n.lowshelf=m})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Microphone"]=e["WAGS.Example.Docs.AudioUnits.Microphone"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Microphone"],t=e["Data.Maybe"],r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Core"],s=e["WAGS.Example.Docs.Util"],d=e["WAGS.Interpret"],h=e["WAGS.Run"],p=o.Proxy.value,m=function(x){return function(D){return function(b){return r["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2 id="microphone">Microphone</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamAudioSourceNode">microphone</a> will use your microphone if you give the browser permission to do so.</p>

  <blockquote>Make sure to use \u{1F3A7} when you run this example! Otherwise, you'll cause quite a stir in whatever internet cafe, household or public restroom you're perusing this documentation in.</blockquote>

  <pre><code>\\mic -> run2_
  [ case mic of
      Just m -> fix \\i -> gain_ 1.0
        [ microphone m
        , delay_ 0.1 [ gain_ 0.2 [ input i ] ]
        ]
      Nothing -> gain_ 0.02 [ sinOsc_ 440.0 ]
  ]</code></pre>

  @microphone@
  </section>
`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"microphone"}}))(i.eventIsEvent)(o.Proxy.value)(p)({microphone:r.nut(s.audioWrapper(b)(x)(d.getMicrophoneAndCamera(!0)(!1))(function(g){return h.run2_([function(){if(g.microphone instanceof t.Just)return v.fix(i.eventIsEvent)(function(E){return c.gain_(i.eventIsEvent)(l.initialGainNumber)(1)([c.microphone(i.eventIsEvent)(l.initialMicrophoneBrowserM)(g.microphone.value0),c.delay_(i.eventIsEvent)(l.initialDelayNumber)(.1)([c.gain_(i.eventIsEvent)(l.initialGainNumber)(.2)([E])])])});if(g.microphone instanceof t.Nothing)return c.gain_(i.eventIsEvent)(l.initialGainNumber)(.02)([c.sinOsc_(i.eventIsEvent)(l.initialSinOscNumber)(440)]);throw new Error("Failed pattern match at WAGS.Example.Docs.AudioUnits.Microphone (line 44, column 15 - line 49, column 56): "+[g.microphone.constructor.name])}()])}))})}}};n.microphoneEx=m})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Notch"]=e["WAGS.Example.Docs.AudioUnits.Notch"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Notch"],t=e["Control.Applicative"],r=e.ConvertableOptions,i=e["Deku.Pursx"],o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Common"],v=e["WAGS.Control"],s=e["WAGS.Example.Docs.Util"],d=e["WAGS.Interpret"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=l.Proxy.value,x=function(D){return function(b){return function(g){return i.makePursx({reflectSymbol:function(){return`<section>
<h2 id="notch">Notch filter</h2>
  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">notch filter</a>, also known as a band-reject filter, attenuates a single frequency range of a source. When you crank up their Q value, the attenuation gets more intense. At the extreme, it sounds like part of the source got sucked into a vacuum, which is not un-interesting!</p>

  <pre><code>\\buf -> run2_
  [
    notch_ { frequency: 400.0, q: 1.0 }
    $ pure $ notch_ { frequency: 880.0, q: 5.0 }
    $ pure $ notch_ { frequency: 1200.0, q: 10.0 }
    $ pure $ notch_ { frequency: 2000.0, q: 20.0 }
    $ pure $ notch_ { frequency: 3000.0, q: 30.0 }
    $ pure $ loopBuf buf bangOn
  ]</code></pre>

  ~notch~
  </section>
`}})()()(i.pursxToElementConsElt()(i.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"notch"}}))(o.eventIsEvent)(m)({notch:i.nut(s.audioWrapper(g)(D)(d.ctxAff(function(E){return d.decodeAudioDataFromUri(E)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(E){return p.run2_([v.notch_(o.eventIsEvent)(c.initialNotchRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionNotchOptions)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionNotchOptions1)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:400,q:1})(t.pure(t.applicativeArray)(v.notch_(o.eventIsEvent)(c.initialNotchRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionNotchOptions)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionNotchOptions1)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:880,q:5})(t.pure(t.applicativeArray)(v.notch_(o.eventIsEvent)(c.initialNotchRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionNotchOptions)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionNotchOptions1)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:1200,q:10})(t.pure(t.applicativeArray)(v.notch_(o.eventIsEvent)(c.initialNotchRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionNotchOptions)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionNotchOptions1)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:2e3,q:20})(t.pure(t.applicativeArray)(v.notch_(o.eventIsEvent)(c.initialNotchRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionNotchOptions)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionNotchOptions1)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:3e3,q:30})(t.pure(t.applicativeArray)(v.loopBuf(o.eventIsEvent)(c.initialLoopBufBrowserAudi)(E)(h.bangOn(o.eventIsEvent)())))))))))))])}))})}}};n.notch=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Peaking"]=e["WAGS.Example.Docs.AudioUnits.Peaking"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Peaking"],t=e["Control.Applicative"],r=e.ConvertableOptions,i=e["Deku.Pursx"],o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Common"],v=e["WAGS.Control"],s=e["WAGS.Example.Docs.Util"],d=e["WAGS.Interpret"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=l.Proxy.value,x=function(D){return function(b){return function(g){return i.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="peaking">Peaking filter</h2>
  <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode">peaking filter</a> is sort of like a notch/bandpass combo. It sounds different than bandpass or notch, and is often a better choice depending on what you're making. The Q works as normal, but the gain either boosts or attenuates the frequency in question if it is positive or negative.</p>

  <pre><code>\\buf -> run2_
  [
    peaking_ { frequency: 400.0, q: 1.0, gain: -20.0 }
    $ pure $ peaking_ { frequency: 880.0, q: 5.0, gain: 20.0 }
    $ pure $ peaking_ { frequency: 1200.0, q: 10.0, gain: -20.0 }
    $ pure $ peaking_ { frequency: 2000.0, q: 20.0, gain: 20.0 }
    $ pure $ peaking_ { frequency: 3000.0, q: 30.0, gain: -20.0 }
    $ pure $ loopBuf buf bangOn
  ]</code></pre>

  ~peaking~
  </section>
`}})()()(i.pursxToElementConsElt()(i.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"peaking"}}))(o.eventIsEvent)(m)({peaking:i.nut(s.audioWrapper(g)(D)(d.ctxAff(function(E){return d.decodeAudioDataFromUri(E)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(E){return p.run2_([v.peaking_(o.eventIsEvent)(c.initialPeakingRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionPeakingOptio)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionPeakingOptio1)()()()({reflectSymbol:function(){return"gain"}}))(c.convertOptionPeakingOptio2)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:400,q:1,gain:-20})(t.pure(t.applicativeArray)(v.peaking_(o.eventIsEvent)(c.initialPeakingRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionPeakingOptio)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionPeakingOptio1)()()()({reflectSymbol:function(){return"gain"}}))(c.convertOptionPeakingOptio2)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:880,q:5,gain:20})(t.pure(t.applicativeArray)(v.peaking_(o.eventIsEvent)(c.initialPeakingRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionPeakingOptio)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionPeakingOptio1)()()()({reflectSymbol:function(){return"gain"}}))(c.convertOptionPeakingOptio2)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:1200,q:10,gain:-20})(t.pure(t.applicativeArray)(v.peaking_(o.eventIsEvent)(c.initialPeakingRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionPeakingOptio)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionPeakingOptio1)()()()({reflectSymbol:function(){return"gain"}}))(c.convertOptionPeakingOptio2)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:2e3,q:20,gain:20})(t.pure(t.applicativeArray)(v.peaking_(o.eventIsEvent)(c.initialPeakingRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(c.convertOptionPeakingOptio)()()()({reflectSymbol:function(){return"q"}}))(c.convertOptionPeakingOptio1)()()()({reflectSymbol:function(){return"gain"}}))(c.convertOptionPeakingOptio2)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:3e3,q:30,gain:-20})(t.pure(t.applicativeArray)(v.loopBuf(o.eventIsEvent)(c.initialLoopBufBrowserAudi)(E)(h.bangOn(o.eventIsEvent)())))))))))))])}))})}}};n.peaking=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.PeriodicOsc"]=e["WAGS.Example.Docs.AudioUnits.PeriodicOsc"]||{};var n=e["WAGS.Example.Docs.AudioUnits.PeriodicOsc"],t=e["Control.Applicative"],r=e.ConvertableOptions,i=e["Data.Tuple"],o=e["Data.Typelevel.Num.Ops"],l=e["Data.Typelevel.Num.Sets"],c=e["Data.Unit"],v=e["Data.Vec"],s=e["Deku.Pursx"],d=e["Effect.Aff"],h=e["FRP.Event"],p=e["Type.Proxy"],m=e["WAGS.Common"],x=e["WAGS.Control"],D=e["WAGS.Example.Docs.Util"],b=e["WAGS.Parameter"],g=e["WAGS.Run"],E=p.Proxy.value,k=function(W){return function(G){return function(_){return s.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="periodic">Periodic wave oscillator</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">periodic wave oscillator</a> plays back a custom periodic waveform at a given frequency. The custom waveform must be set as part of the initialization and can be changed after initialization. Note that the change will not go into effect if the oscillator is on: it must be turned off and on again.</p>

  <pre><code>\\buf -> run2_
  [
    gain_ 0.2
      [
        periodicOsc
          { frequency: 140.0
          , spec:
              ( (0.1 +> 0.2 +> 0.3 +> 0.4 +> empty)
                  /\\ (0.4 +> 0.3 +> 0.2 +> 0.1 +> empty)
              )
          }
          bangOn
      ]
  ]</code></pre>

  ~periodic~
  </section>
`}})()()(s.pursxToElementConsElt()(s.pursxToElementNil(h.plusEvent))({reflectSymbol:function(){return"periodic"}}))(h.eventIsEvent)(E)({periodic:s.nut(D.audioWrapper(_)(W)(t.pure(d.applicativeAff)(c.unit))(function(u){return g.run2_([x.gain_(h.eventIsEvent)(m.initialGainNumber)(.2)([x.periodicOsc(h.eventIsEvent)(m.initialPeriodicOscRecord(r.convertOptionsWithDefaultsRecord(r.convertOptionsRecord()(r.convertRecordOptionsCons(r.convertRecordOptionsCons(r.convertRecordOptionsNil)(m.convertOptionPeriodicOscO1(m.periodicOscSpecableVecNum(l.posD4)))()()()({reflectSymbol:function(){return"spec"}}))(m.convertOptionPeriodicOscO)()()()({reflectSymbol:function(){return"frequency"}})))(r.defaultsRecord()())))({frequency:140,spec:new i.Tuple(v.cons(o.typelevelSucc(l.posD4)()(o.divMod10D3D0)()(o.divMod10D4D0))(.1)(v.cons(o.typelevelSucc(l.posD3)()(o.divMod10D2D0)()(o.divMod10D3D0))(.2)(v.cons(o.typelevelSucc(l.posD2)()(o.divMod10D1D0)()(o.divMod10D2D0))(.3)(v.cons(o.typelevelSucc(l.posD1)()(o.divMod10D0D0)()(o.divMod10D1D0))(.4)(v.empty)))),v.cons(o.typelevelSucc(l.posD4)()(o.divMod10D3D0)()(o.divMod10D4D0))(.4)(v.cons(o.typelevelSucc(l.posD3)()(o.divMod10D2D0)()(o.divMod10D3D0))(.3)(v.cons(o.typelevelSucc(l.posD2)()(o.divMod10D1D0)()(o.divMod10D2D0))(.2)(v.cons(o.typelevelSucc(l.posD1)()(o.divMod10D0D0)()(o.divMod10D1D0))(.1)(v.empty)))))})(b.bangOn(h.eventIsEvent)())])])}))})}}};n.periodic=k})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.PlayBuf"]=e["WAGS.Example.Docs.AudioUnits.PlayBuf"]||{};var n=e["WAGS.Example.Docs.AudioUnits.PlayBuf"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=o.Proxy.value,m=function(x){return function(D){return function(b){return r.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="playbuf">Playing a buffer</h2>
  <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode">Playback from a buffer</a> is one of the bread-and-butter operations in Web Audio (or any audio). The buffered audio is usually a sound file, but it'll play anything you write to a buffer. Like in the Web Audio API, you can set the buffer's start time and optionally its duration.</p>

  <pre><code>\\buf -> run2_
  [
    playBuf
      { buffer
      , duration: 3.0
      , bufferOffset: 4.2
      }
      bangOn
  ]
</code></pre>

  ~playBuf~
  </section>
`}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"playBuf"}}))(i.eventIsEvent)(p)({playBuf:r.nut(v.audioWrapper(b)(x)(s.ctxAff(function(g){return s.decodeAudioDataFromUri(g)("https://freesound.org/data/previews/470/470035_9564355-lq.mp3")}))(function(g){return h.run2_([c.playBuf(i.eventIsEvent)(l.initialPlayBufRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionPlayBufOptio2)()()()({reflectSymbol:function(){return"duration"}}))(l.convertOptionPlayBufOptio1)()()()({reflectSymbol:function(){return"bufferOffset"}}))(l.convertOptionPlayBufOptio)()()()({reflectSymbol:function(){return"buffer"}})))(t.defaultsRecord()())))({buffer:g,duration:3,bufferOffset:4.2})(d.bangOn(i.eventIsEvent)())])}))})}}};n.playBufEx=m})(C);(function(e){"use strict";e["WAGS.WebAPI"]=e["WAGS.WebAPI"]||{};var n=e["WAGS.WebAPI"],t=function(r){return r};n.MediaRecorderCb=t})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.Recorder"]=e["WAGS.Example.Docs.AudioUnits.Recorder"]||{};var n=e["WAGS.Example.Docs.AudioUnits.Recorder"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Bind"],l=e["Control.Category"],c=e["Control.Monad.Error.Class"],v=e["Data.Either"],s=e["Data.Exists"],d=e["Data.Filterable"],h=e["Data.Foldable"],p=e["Data.Function"],m=e["Data.Functor"],x=e["Data.Hashable"],D=e["Data.Maybe"],b=e["Data.Tuple"],g=e["Data.Unit"],E=e["Deku.Attribute"],k=e["Deku.Control"],W=e["Deku.DOM.Attr.Controls"],G=e["Deku.DOM.Attr.OnClick"],_=e["Deku.DOM.Attr.Src"],u=e["Deku.DOM.Attr.Style"],a=e["Deku.DOM.Elt.Audio"],f=e["Deku.DOM.Elt.Button"],O=e["Deku.DOM.Elt.Div"],R=e["Deku.Pursx"],B=e["Deku.Subgraph"],L=e.Effect,F=e["Effect.AVar"],$=e["Effect.Aff"],Z=e["Effect.Class"],H=e["FRP.Event"],V=e["FRP.Event.Class"],J=e["Type.Proxy"],I=e["WAGS.Common"],A=e["WAGS.Control"],q=e["WAGS.Example.Docs.Util"],j=e["WAGS.Interpret"],re=e["WAGS.WebAPI"],M=function(K){return function(te){return function(S){return function(y){return function(N){return A.recorder(K)(te)(N)(A.microphone(K)(S)(y))}}}}},T=J.Proxy.value,Q=function(K){return function(te){return function(S){return R.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="recorder">Recorder</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamAudioDestinationNode">recorder</a> allows you to record audio. It takes a callback that you can use to stash the recorded audio somewhere, like in a file for example, as the example below does. You can use it as a simple note-taking app \u{1F399}\uFE0F.</p>

  <pre><code>\\cb m -> recorder cb (microphone m)</code></pre>

  ~recorder~
  </section>
`}})()()(R.pursxToElementConsElt()(R.pursxToElementNil(H.plusEvent))({reflectSymbol:function(){return"recorder"}}))(H.eventIsEvent)(T)({recorder:R.nut(B.subgraph(x.hashableUnit)(H.eventIsEvent)(V.bang(H.eventIsEvent)(new b.Tuple(g.unit,B.Insert.value)))(function(y){return s.mkExists(function(N){return function(U){var De=d.partitionMap(H.filterableEvent)(l.identity(l.categoryFn))(U),Ee=d.partitionMap(H.filterableEvent)(l.identity(l.categoryFn))(function(ne){return ne.left}(De)),X=function(ne){return ne.right}(Ee),we=q.mkWrapperEvent(H.altEvent)(H.eventIsEvent)(S)(function(ne){return ne.right}(De)),ge=function(ne){return ne.left}(Ee);return O.div_(H.eventIsEvent)([f.button(H.eventIsEvent)(t.alt(H.altEvent)(V.bang(H.eventIsEvent)(E.attr(u.attrButton_StyleString)(u.Style.value)("cursor: pointer;")))(m.map(H.functorEvent)(function(ne){return E.attr(G.attrOnClickCb)(G.OnClick.value)(E.cb(p.const(function(){if(ne.e instanceof q.Loading)return r.pure(L.applicativeEffect)(g.unit);if(ne.e instanceof q.Playing)return i.applySecond(L.applyEffect)(i.applySecond(L.applyEffect)(i.applySecond(L.applyEffect)(ne.e.value0)(K(r.pure(L.applicativeEffect)(g.unit))))(h.for_(L.applicativeEffect)(h.foldableMaybe)(ne.rec)(function(){var se=c.try(c.monadErrorEffect);return function(Ae){return se(j.stopMediaRecorder(Ae))}}())))(N(v.Right.create(q.Stopped.value)));if(ne.e instanceof q.Stopped)return function(){ne.cncl();var Ae=F.empty();N(new v.Right(q.Loading.value))();var ee=$.launchAff(o.bind($.bindAff)(m.map($.functorAff)(function(xe){return xe.microphone})(j.getMicrophoneAndCamera(!0)(!1)))(function(xe){return Z.liftEffect($.monadEffectAff)(function(){var le=D.maybe(r.pure(L.applicativeEffect)(r.pure(L.applicativeEffect)(g.unit)))(function(he){return function(){var Oe=j.context(),Ie=j.makeFFIAudioSnapshot(Oe)(),Ge=A.speaker2(H.eventIsEvent)([M(H.eventIsEvent)(I.initialRecorderMediaRecor)(I.initialMicrophoneBrowserM)(he)(re.MediaRecorderCb(function(Me){return function(){return N(new v.Left(new v.Right(Me)))(),m.void(L.functorEffect)(F.tryPut(Me)(Ae))(),j.mediaRecorderToUrl("audio/ogg; codecs=opus")(function(ke){return N(v.Left.create(v.Left.create(ke)))})(Me)()}}))])(j.effectfulAudioInterpret),Te=H.subscribe(Ge)(function(Me){return Me(Ie)})();return function(){Te(),o.bind(L.bindEffect)(F.tryTake(Ae))(h.traverse_(L.applicativeEffect)(h.foldableMaybe)(function(){var ke=c.try(c.monadErrorEffect);return function(me){return ke(j.stopMediaRecorder(me))}}()))();var je=j.contextState(Oe)();return r.when(L.applicativeEffect)(je!=="closed")(j.close(Oe))()}}})(xe)();return N(v.Right.create(new q.Playing(le)))(),le})}))();return K(function(){return N(v.Right.create(q.Stopped.value))(),$.launchAff_(q.raceSelf(ee))()})(),g.unit};throw new Error("Failed pattern match at WAGS.Example.Docs.AudioUnits.Recorder (line 66, column 47 - line 109, column 52): "+[ne.e.constructor.name])}())))})(V.biSampleOn(H.eventIsEvent)(t.alt(H.altEvent)(V.bang(H.eventIsEvent)(D.Nothing.value))(m.map(H.functorEvent)(D.Just.create)(X)))(m.map(H.functorEvent)(p.apply)(V.biSampleOn(H.eventIsEvent)(t.alt(H.altEvent)(V.bang(H.eventIsEvent)(r.pure(L.applicativeEffect)(g.unit)))(m.map(H.functorEvent)(function(ne){return ne.value0})(S)))(m.map(H.functorEvent)(function(ne){return function(se){return function(Ae){return{e:ne,cncl:se,rec:Ae}}}})(we)))))))([k.text(H.eventIsEvent)(m.map(H.functorEvent)(function(ne){if(ne instanceof q.Stopped)return"Turn on";if(ne instanceof q.Loading)return"Loading...";if(ne instanceof q.Playing)return"Turn off";throw new Error("Failed pattern match at WAGS.Example.Docs.AudioUnits.Recorder (line 120, column 31 - line 123, column 56): "+[ne.constructor.name])})(we))]),O.div_(H.eventIsEvent)([a.audio(H.eventIsEvent)(t.alt(H.altEvent)(t.alt(H.altEvent)(t.alt(H.altEvent)(V.bang(H.eventIsEvent)(E.attr(W.attrAudio_ControlsString)(W.Controls.value)("true")))(V.bang(H.eventIsEvent)(E.attr(u.attrAudio_StyleString)(u.Style.value)("display:none;"))))(m.map(H.functorEvent)(function(ne){return E.attr(_.attrAudio_SrcString)(_.Src.value)(ne)})(ge)))(m.map(H.functorEvent)(p.const(E.attr(u.attrAudio_StyleString)(u.Style.value)("display:block;")))(ge)))([])])])}})}))})}}};n.recorderEx=Q})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.SawtoothOsc"]=e["WAGS.Example.Docs.AudioUnits.SawtoothOsc"]||{};var n=e["WAGS.Example.Docs.AudioUnits.SawtoothOsc"],t=e["Control.Applicative"],r=e["Data.Unit"],i=e["Deku.Pursx"],o=e["Effect.Aff"],l=e["FRP.Event"],c=e["Type.Proxy"],v=e["WAGS.Common"],s=e["WAGS.Control"],d=e["WAGS.Example.Docs.Util"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=c.Proxy.value,x=function(D){return function(b){return function(g){return i.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="sawtooth">Sawtooth wave oscillator</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">sawtooth wave oscillator</a> plays back a sawtooth wave at a given frequency.</p>


  <pre><code>\\buf -> run2_
  [ gain_ 0.2 [ sawtoothOsc 448.0 bangOn ] ]
</code></pre>

  ~periodic~
  </section>
`}})()()(i.pursxToElementConsElt()(i.pursxToElementNil(l.plusEvent))({reflectSymbol:function(){return"periodic"}}))(l.eventIsEvent)(m)({periodic:i.nut(d.audioWrapper(g)(D)(t.pure(o.applicativeAff)(r.unit))(function(E){return p.run2_([s.gain_(l.eventIsEvent)(v.initialGainNumber)(.2)([s.sawtoothOsc(l.eventIsEvent)(v.initialSawtoothOscNumber)(448)(h.bangOn(l.eventIsEvent)())])])}))})}}};n.sawtooth=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.SinOsc"]=e["WAGS.Example.Docs.AudioUnits.SinOsc"]||{};var n=e["WAGS.Example.Docs.AudioUnits.SinOsc"],t=e["Control.Applicative"],r=e["Data.Unit"],i=e["Deku.Pursx"],o=e["Effect.Aff"],l=e["FRP.Event"],c=e["Type.Proxy"],v=e["WAGS.Common"],s=e["WAGS.Control"],d=e["WAGS.Example.Docs.Util"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=c.Proxy.value,x=function(D){return function(b){return function(g){return i.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="sine">Sine wave oscillator</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">sine wave oscillator</a> plays back a sine wave at a given frequency.</p>


  <pre><code>\\buf -> run2_
  [ gain_ 0.2 [ sinOsc 448.0 bangOn ] ]</code></pre>

  ~periodic~
  </section>
`}})()()(i.pursxToElementConsElt()(i.pursxToElementNil(l.plusEvent))({reflectSymbol:function(){return"periodic"}}))(l.eventIsEvent)(m)({periodic:i.nut(d.audioWrapper(g)(D)(t.pure(o.applicativeAff)(r.unit))(function(E){return p.run2_([s.gain_(l.eventIsEvent)(v.initialGainNumber)(.2)([s.sinOsc(l.eventIsEvent)(v.initialSinOscNumber)(448)(h.bangOn(l.eventIsEvent)())])])}))})}}};n.sine=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.SquareOsc"]=e["WAGS.Example.Docs.AudioUnits.SquareOsc"]||{};var n=e["WAGS.Example.Docs.AudioUnits.SquareOsc"],t=e["Control.Applicative"],r=e["Data.Unit"],i=e["Deku.Pursx"],o=e["Effect.Aff"],l=e["FRP.Event"],c=e["Type.Proxy"],v=e["WAGS.Common"],s=e["WAGS.Control"],d=e["WAGS.Example.Docs.Util"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=c.Proxy.value,x=function(D){return function(b){return function(g){return i.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="sawtooth">Square wave oscillator</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">sawtooth wave oscillator</a> plays back a sawtooth wave at a given frequency.</p>


  <pre><code>\\buf -> run2_
  [ gain_ 0.2 [ squareOsc 448.0 bangOn ] ]</code></pre>

  ~periodic~
  </section>
`}})()()(i.pursxToElementConsElt()(i.pursxToElementNil(l.plusEvent))({reflectSymbol:function(){return"periodic"}}))(l.eventIsEvent)(m)({periodic:i.nut(d.audioWrapper(g)(D)(t.pure(o.applicativeAff)(r.unit))(function(E){return p.run2_([s.gain_(l.eventIsEvent)(v.initialGainNumber)(.2)([s.squareOsc(l.eventIsEvent)(v.initialSquareOscNumber)(448)(h.bangOn(l.eventIsEvent)())])])}))})}}};n.square=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.StereoPanner"]=e["WAGS.Example.Docs.AudioUnits.StereoPanner"]||{};var n=e["WAGS.Example.Docs.AudioUnits.StereoPanner"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=e["WAGS.Common"],l=e["WAGS.Control"],c=e["WAGS.Example.Docs.Util"],v=e["WAGS.Interpret"],s=e["WAGS.Parameter"],d=e["WAGS.Run"],h=i.Proxy.value,p=function(m){return function(x){return function(D){return t.makePursx({reflectSymbol:function(){return`<section>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/StereoPannerNode">stereo panner</a> pans audio in the stereo plane. <code>-1.0</code> represents hard left, and <code>1.0</code> represents hard right, as in the example below.</p>

  <pre><code>\\buf -> run2_
  [ pan_ 1.0 [ loopBuf buf bangOn ] ]</code></pre>

  ~pan~
  </section>
`}})()()(t.pursxToElementConsElt()(t.pursxToElementNil(r.plusEvent))({reflectSymbol:function(){return"pan"}}))(r.eventIsEvent)(h)({pan:t.nut(c.audioWrapper(D)(m)(v.ctxAff(function(b){return v.decodeAudioDataFromUri(b)("https://freesound.org/data/previews/339/339822_5121236-lq.mp3")}))(function(b){return d.run2_([l.pan_(r.eventIsEvent)(o.initialStereoPannerNumber)(1)([l.loopBuf(r.eventIsEvent)(o.initialLoopBufBrowserAudi)(b)(s.bangOn(r.eventIsEvent)())])])}))})}}};n.pan=p})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.TOC"]=e["WAGS.Example.Docs.AudioUnits.TOC"]||{};var n=e["WAGS.Example.Docs.AudioUnits.TOC"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=i.Proxy.value,l=t.makePursx({reflectSymbol:function(){return`<ul>
  <li><a href="#allpass">All-pass filter</a></li>
  <li><a href="#analyser">Analyser</a></li>
  <li><a href="#bandpass">Bandpass filter</a></li>
  <li><a href="#constant">Constant value</a></li>
  <li><a href="#compression">Compression</a></li>
  <li><a href="#convolution">Convolution</a></li>
  <li><a href="#delay">Delay</a></li>
  <li><a href="#gain">Gain</a></li>
  <li><a href="#highpass">Highpass filter</a></li>
  <li><a href="#highshelf">Highshelf filter</a></li>
  <li><a href="#iir">IIR filter</a></li>
  <li><a href="#loopbuf">Looping buffer</a></li>
  <li><a href="#lowpass">Lowpass filter</a></li>
  <li><a href="#lowshelf">Lowshelf filter</a></li>
  <!--<li><a href="#media">Media element</a></li>-->
  <li><a href="#microphone">Microphone</a></li>
  <li><a href="#notch">Notch filter</a></li>
  <!--<li><a href="#panner">Panner</a></li>-->
  <li><a href="#peaking">Peaking filter</a></li>
  <li><a href="#periodic">Periodic wave oscillator</a></li>
  <li><a href="#playbuf">Playing a buffer</a></li>
  <li><a href="#recorder">Recorder</a></li>
  <li><a href="#sawtooth">Sawtooth wave oscillator</a></li>
  <li><a href="#sine">Sine wave oscillator</a></li>
  <li><a href="#square">Square wave oscillator</a></li>
  <li><a href="#pan">Stereo panner</a></li>
  <li><a href="#triangle">Triangle wave oscillator</a></li>
  <li><a href="#waveshaper">Waveshaper</a></li>
    </ul>
`}})()()(t.pursxToElementNil(r.plusEvent))(r.eventIsEvent)(o)({});n.toc=l})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.TriangleOsc"]=e["WAGS.Example.Docs.AudioUnits.TriangleOsc"]||{};var n=e["WAGS.Example.Docs.AudioUnits.TriangleOsc"],t=e["Control.Applicative"],r=e["Data.Unit"],i=e["Deku.Pursx"],o=e["Effect.Aff"],l=e["FRP.Event"],c=e["Type.Proxy"],v=e["WAGS.Common"],s=e["WAGS.Control"],d=e["WAGS.Example.Docs.Util"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=c.Proxy.value,x=function(D){return function(b){return function(g){return i.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="sawtooth">Sawtooth wave oscillator</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">sawtooth wave oscillator</a> plays back a sawtooth wave at a given frequency.</p>


  <pre><code>\\buf -> run2_
  [ gain_ 0.2 [ triangleOsc 448.0 bangOn ] ]
</code></pre>

  ~periodic~
  </section>
`}})()()(i.pursxToElementConsElt()(i.pursxToElementNil(l.plusEvent))({reflectSymbol:function(){return"periodic"}}))(l.eventIsEvent)(m)({periodic:i.nut(d.audioWrapper(g)(D)(t.pure(o.applicativeAff)(r.unit))(function(E){return p.run2_([s.gain_(l.eventIsEvent)(v.initialGainNumber)(.2)([s.triangleOsc(l.eventIsEvent)(v.initialTriangleOscNumber)(448)(h.bangOn(l.eventIsEvent)())])])}))})}}};n.triangle=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.AudioUnits.WaveShaper"]=e["WAGS.Example.Docs.AudioUnits.WaveShaper"]||{};var n=e["WAGS.Example.Docs.AudioUnits.WaveShaper"],t=e["Data.Array"],r=e["Data.Functor"],i=e["Data.Int"],o=e["Data.Ord"],l=e["Data.Ring"],c=e["Deku.Control"],v=e["Deku.Pursx"],s=e["FRP.Event"],d=e.Math,h=e["Type.Proxy"],p=e["WAGS.Common"],m=e["WAGS.Control"],x=e["WAGS.Example.Docs.Util"],D=e["WAGS.Interpret"],b=e["WAGS.Parameter"],g=e["WAGS.Run"],E=h.Proxy.value,k=function(W){return function(G){return function(_){return v.makePursx({reflectSymbol:function(){return`<section>
  <h2 id="waveshaper">Waveshaper</h2>
  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/WaveshaperNode">waveshaper node</a>, aka distortion, uses a <a href="https://en.wikipedia.org/wiki/Waveshaper">waveshaping function</a> to add warmth to a sound.</p>

  <pre><code>~code~</code></pre>

  ~waveShaper~
  </section>
`}})()()(v.pursxToElementConsElt()(v.pursxToElementConsElt()(v.pursxToElementNil(s.plusEvent))({reflectSymbol:function(){return"waveShaper"}}))({reflectSymbol:function(){return"code"}}))(s.eventIsEvent)(E)({code:v.nut(c.text_(s.eventIsEvent)(`do
  let
    makeDistortionCurve :: Number -> Array Number
    makeDistortionCurve k =
      map
        ( \\i ->
            let
              x = (toNumber i * 2.0 / toNumber n_samples) - 1.0
            in
              (3.0 + k) * x * 20.0 * deg / (pi + (k * abs x))
        )
        (0 .. (n_samples - 1))
      where
      n_samples = 44100

      deg = pi / 180.0
  wicked <- makeFloatArray (makeDistortionCurve 400.0)
  run2_
    [ waveShaper wicked [ loopBuf buf bangOn ] ]`)),waveShaper:v.nut(x.audioWrapper(_)(W)(D.ctxAff(function(u){return D.decodeAudioDataFromUri(u)("https://freesound.org/data/previews/339/339822_5121236-lq.mp3")}))(function(u){var a=function(f){var O=d.pi/180;return r.map(r.functorArray)(function(R){var B=i.toNumber(R)*2/i.toNumber(44100)-1;return(3+f)*B*20*O/(d.pi+f*o.abs(o.ordNumber)(l.ringNumber)(B))})(t.range(0)(44099))};return function(){var O=D.makeFloatArray(a(400))();return g.run2_([m.waveShaper(s.eventIsEvent)(p.initialWaveShaperBrowserF)(O)([m.loopBuf(s.eventIsEvent)(p.initialLoopBufBrowserAudi)(u)(b.bangOn(s.eventIsEvent)())])])()}}))})}}};n.waveShaperEx=k})(C);(function(e){"use strict";e["WAGS.Example.Docs.Component"]=e["WAGS.Example.Docs.Component"]||{};var n=e["WAGS.Example.Docs.Component"],t=e["Control.Apply"],r=e["Deku.Pursx"],i=e.Effect,o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Common"],v=e["WAGS.Control"],s=e["WAGS.Example.Docs.AudioUnits.Allpass"],d=e["WAGS.Example.Docs.AudioUnits.Analyser"],h=e["WAGS.Example.Docs.AudioUnits.Bandpass"],p=e["WAGS.Example.Docs.AudioUnits.Compression"],m=e["WAGS.Example.Docs.AudioUnits.Constant"],x=e["WAGS.Example.Docs.AudioUnits.Convolution"],D=e["WAGS.Example.Docs.AudioUnits.Delay"],b=e["WAGS.Example.Docs.AudioUnits.Gain"],g=e["WAGS.Example.Docs.AudioUnits.Highpass"],E=e["WAGS.Example.Docs.AudioUnits.Highshelf"],k=e["WAGS.Example.Docs.AudioUnits.IIRFilter"],W=e["WAGS.Example.Docs.AudioUnits.LoopBuf"],G=e["WAGS.Example.Docs.AudioUnits.Lowpass"],_=e["WAGS.Example.Docs.AudioUnits.Lowshelf"],u=e["WAGS.Example.Docs.AudioUnits.Microphone"],a=e["WAGS.Example.Docs.AudioUnits.Notch"],f=e["WAGS.Example.Docs.AudioUnits.Peaking"],O=e["WAGS.Example.Docs.AudioUnits.PeriodicOsc"],R=e["WAGS.Example.Docs.AudioUnits.PlayBuf"],B=e["WAGS.Example.Docs.AudioUnits.Recorder"],L=e["WAGS.Example.Docs.AudioUnits.SawtoothOsc"],F=e["WAGS.Example.Docs.AudioUnits.SinOsc"],$=e["WAGS.Example.Docs.AudioUnits.SquareOsc"],Z=e["WAGS.Example.Docs.AudioUnits.StereoPanner"],H=e["WAGS.Example.Docs.AudioUnits.TOC"],V=e["WAGS.Example.Docs.AudioUnits.TriangleOsc"],J=e["WAGS.Example.Docs.AudioUnits.WaveShaper"],I=e["WAGS.Example.Docs.Types"],A=e["WAGS.Example.Docs.Util"],q=e["WAGS.Interpret"],j=e["WAGS.Parameter"],re=e["WAGS.Run"],M=l.Proxy.value,T=function(Q){return function(K){return function(te){return function(S){var y=t.applySecond(i.applyEffect)(K(I.Events.value))(A.scrollToTop),N=A.ccassp(Q)(te);return r.makePursx({reflectSymbol:function(){return`<div>
  <h1>Audio Units</h1>

  <h3>There sure are a lot of them!</h3>
  <p>
    This section provides a tour of the web audio nodes provided by the Web Audio API and, by extension, Wags. There are only two omissions:</p>
    <ul>
      <li>Audio Worklet Nodes</li>
      <li>Multi-channel audio</li>
    </ul>
    <p>Both of these will be covered in later sections.</p>

  <p>
    This section is long and should be read like those passages in the Bible that list who was the child of who: DILIGENTLY AND COPIOUSLY. That said, if you want to skip around, here's a table of contents.
  </p>
  ~toc~
  <p>And now, without further ado... (~drumroll~) Here are some audio nodes!</p>

  ~allpass~
  ~analyser~
  ~bandpass~
  ~constant~
  ~compression~
  ~convolution~
  ~delay~
  ~gain~
  ~highpass~
  ~highshelf~
  ~iirFilter~
  ~loopBuf~
  ~lowpass~
  ~lowshelf~
  ~microphone~
  ~notch~
  ~peaking~
  ~periodicOsc~
  ~playBuf~
  ~recorder~
  ~sawtoothOsc~
  ~sinOsc~
  ~squareOsc~
  ~pan~
  ~triangleOsc~
  ~waveShaper~

  <h2>Next steps</h2>
  <p>Phew, that was a lot of audio units! In the next section, we'll make them come alive thanks to the magic of <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsAttr()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"waveShaper"}}))({reflectSymbol:function(){return"triangleOsc"}}))({reflectSymbol:function(){return"toc"}}))({reflectSymbol:function(){return"squareOsc"}}))({reflectSymbol:function(){return"sinOsc"}}))({reflectSymbol:function(){return"sawtoothOsc"}}))({reflectSymbol:function(){return"recorder"}}))({reflectSymbol:function(){return"playBuf"}}))({reflectSymbol:function(){return"periodicOsc"}}))({reflectSymbol:function(){return"peaking"}}))({reflectSymbol:function(){return"pan"}}))({reflectSymbol:function(){return"notch"}}))({reflectSymbol:function(){return"next"}}))({reflectSymbol:function(){return"microphone"}}))({reflectSymbol:function(){return"lowshelf"}}))({reflectSymbol:function(){return"lowpass"}}))({reflectSymbol:function(){return"loopBuf"}}))({reflectSymbol:function(){return"iirFilter"}}))({reflectSymbol:function(){return"highshelf"}}))({reflectSymbol:function(){return"highpass"}}))({reflectSymbol:function(){return"gain"}}))({reflectSymbol:function(){return"drumroll"}}))({reflectSymbol:function(){return"delay"}}))({reflectSymbol:function(){return"convolution"}}))({reflectSymbol:function(){return"constant"}}))({reflectSymbol:function(){return"compression"}}))({reflectSymbol:function(){return"bandpass"}}))({reflectSymbol:function(){return"analyser"}}))({reflectSymbol:function(){return"allpass"}}))(o.eventIsEvent)(M)({drumroll:r.nut(A.audioWrapperSpan("\u{1F941}")(S)(N)(q.ctxAff(function(U){return q.decodeAudioDataFromUri(U)("https://freesound.org/data/previews/50/50711_179538-lq.mp3")}))(function(U){return re.run2_([v.gain_(o.eventIsEvent)(c.initialGainNumber)(1)([v.loopBuf(o.eventIsEvent)(c.initialLoopBufBrowserAudi)(U)(j.bangOn(o.eventIsEvent)())])])})),toc:r.nut(H.toc),allpass:r.nut(s.allpass(N)(K)(S)),analyser:r.nut(d.analyserEx(N)(K)(S)),bandpass:r.nut(h.bandpass(N)(K)(S)),constant:r.nut(m.constantEx(N)(K)(S)),compression:r.nut(p.compression(N)(K)(S)),convolution:r.nut(x.convolution(N)(K)(S)),delay:r.nut(D.delay(N)(K)(S)),gain:r.nut(b.gain(N)(K)(S)),highpass:r.nut(g.highpass(N)(K)(S)),highshelf:r.nut(E.highshelf(N)(K)(S)),iirFilter:r.nut(k.iirFilterEx(N)(K)(S)),loopBuf:r.nut(W.loopBufEx(N)(K)(S)),lowshelf:r.nut(_.lowshelf(N)(K)(S)),lowpass:r.nut(G.lowpass(N)(K)(S)),notch:r.nut(a.notch(N)(K)(S)),playBuf:r.nut(R.playBufEx(N)(K)(S)),peaking:r.nut(f.peaking(N)(K)(S)),microphone:r.nut(u.microphoneEx(N)(K)(S)),pan:r.nut(Z.pan(N)(K)(S)),periodicOsc:r.nut(O.periodic(N)(K)(S)),recorder:r.nut(B.recorderEx(N)(K)(S)),sawtoothOsc:r.nut(L.sawtooth(N)(K)(S)),sinOsc:r.nut(F.sine(N)(K)(S)),squareOsc:r.nut($.square(N)(K)(S)),triangleOsc:r.nut(V.triangle(N)(K)(S)),waveShaper:r.nut(J.waveShaperEx(N)(K)(S)),next:A.mkNext(o.altEvent)(o.eventIsEvent)(S)(y)})}}}};n.components=T})(C);(function(e){"use strict";e["WAGS.Math"]=e["WAGS.Math"]||{};var n=e["WAGS.Math"],t=function(r){return function(i){return function(o){return function(l){return function(c){var v=o===r||l===i;if(v)return i;var s=(l-i)/(o-r),d=i-s*r;return s*c+d}}}}};n.calcSlope=t})(C);(function(e){"use strict";e["WAGS.Variant"]=e["WAGS.Variant"]||{};var n=e["WAGS.Variant"],t=e["Data.Maybe"],r=e["Data.Variant"],i=e.Record,o=e["Type.Proxy"],l={"prjs'":function(x){return function(D){return{}}}},c={"injs'":function(x){return function(D){return{}}}},v=function(x){return x["prjs'"]},s=function(x){return function(D){return function(b){return v(D)(o.Proxy.value)(o.Proxy.value)}}},d=function(x){return function(D){return function(b){return function(g){return function(E){return function(k){return{"prjs'":function(W){return function(G){return i.insert(x)()()(o.Proxy.value)(r.prj()(x)(t.alternativeMaybe)(o.Proxy.value))(v(D)(W)(o.Proxy.value))}}}}}}}}},h=function(x){return x["injs'"]},p=function(x){return function(D){return function(b){return h(D)(o.Proxy.value)(o.Proxy.value)}}},m=function(x){return function(D){return function(b){return function(g){return function(E){return function(k){return{"injs'":function(W){return function(G){return i.insert(x)()()(o.Proxy.value)(r.inj()(x)(o.Proxy.value))(h(D)(W)(o.Proxy.value))}}}}}}}}};n.injs_=p,n.prjs_=s,n.injsNilRow=c,n.injsCons=m,n.prjsNilRow=l,n.prjsCons=d})(C);(function(e){"use strict";e["WAGS.Example.Docs.Effects.FoldEx"]=e["WAGS.Example.Docs.Effects.FoldEx"]||{};var n=e["WAGS.Example.Docs.Effects.FoldEx"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e.ConvertableOptions,l=e["Data.Exists"],c=e["Data.Filterable"],v=e["Data.Foldable"],s=e["Data.Function"],d=e["Data.Functor"],h=e["Data.Hashable"],p=e["Data.HeytingAlgebra"],m=e["Data.Semiring"],x=e["Data.Tuple"],D=e["Data.Typelevel.Num.Ops"],b=e["Data.Typelevel.Num.Sets"],g=e["Data.Unit"],E=e["Data.Variant"],k=e["Data.Vec"],W=e["Deku.Attribute"],G=e["Deku.Control"],_=e["Deku.DOM.Attr.Checked"],u=e["Deku.DOM.Attr.OnClick"],a=e["Deku.DOM.Attr.Style"],f=e["Deku.DOM.Attr.Xtype"],O=e["Deku.DOM.Elt.Button"],R=e["Deku.DOM.Elt.Div"],B=e["Deku.DOM.Elt.Input"],L=e["Deku.Pursx"],F=e["Deku.Subgraph"],$=e.Effect,Z=e["FRP.Behavior"],H=e["FRP.Event"],V=e["FRP.Event.Animate"],J=e["FRP.Event.Class"],I=e["FRP.Event.Memoize"],A=e.Math,q=e["Type.Proxy"],j=e["WAGS.Clock"],re=e["WAGS.Common"],M=e["WAGS.Control"],T=e["WAGS.Interpret"],Q=e["WAGS.Math"],K=e["WAGS.Parameter"],te=e["WAGS.Properties"],S=e["WAGS.Run"],y=e["WAGS.Variant"],N=y.prjs_()(y.prjsCons({reflectSymbol:function(){return"cbx"}})(y.prjsCons({reflectSymbol:function(){return"init"}})(y.prjsCons({reflectSymbol:function(){return"startStop"}})(y.prjsNilRow)()()()())()()()())()()()())(q.Proxy.value),U=y.injs_()(y.injsCons({reflectSymbol:function(){return"cbx"}})(y.injsCons({reflectSymbol:function(){return"init"}})(y.injsCons({reflectSymbol:function(){return"startStop"}})(y.injsNilRow)()()()())()()()())()()()())(q.Proxy.value),De=y.injs_()(y.injsCons({reflectSymbol:function(){return"start"}})(y.injsCons({reflectSymbol:function(){return"stop"}})(y.injsNilRow)()()()())()()()())(q.Proxy.value),Ee=U.startStop(De.start(g.unit)),X=function(Ae){return U.startStop(De.stop(Ae))},we=q.Proxy.value,ge=y.prjs_()(y.prjsCons({reflectSymbol:function(){return"cbx0"}})(y.prjsCons({reflectSymbol:function(){return"cbx1"}})(y.prjsCons({reflectSymbol:function(){return"cbx2"}})(y.prjsCons({reflectSymbol:function(){return"cbx3"}})(y.prjsNilRow)()()()())()()()())()()()())()()()())(q.Proxy.value),ne=y.injs_()(y.injsCons({reflectSymbol:function(){return"cbx0"}})(y.injsCons({reflectSymbol:function(){return"cbx1"}})(y.injsCons({reflectSymbol:function(){return"cbx2"}})(y.injsCons({reflectSymbol:function(){return"cbx3"}})(y.injsNilRow)()()()())()()()())()()()())()()()())(q.Proxy.value),se=function(Ae){return function(ee){return function(xe){return function(fe){return L.makePursx({reflectSymbol:function(){return`<section>
  <h2>Fold</h2>

  <p>The type of <code>fold</code> is:</p>

  <pre><code>fold
    :: forall event a b
    . IsEvent event
    => (a -> b -> b)
    -> event a
    -> b
    -> event b</code></pre>

  <p>Fold starts with some initial state <code>b</code> and, based on incoming events, allows you to change the state.</p>

  <p>One way <code>fold</code> is useful is to retain when certain actions happen. In the following example, we use <code>requestAnimationFrame</code> to animate the audio and we use four <code>fold</code>-s to store the ambitus and velocity of both vibrato and tremolo.</p>

  <pre><code>~txt~</code></pre>

  ~empl~

  <p><code>fold</code> is so powerful because it allows us to localize state to <i>any</i> event. In the example above, instead of having a global state, our two folds allow for two <i>ad hoc</i> local states.</p>

</section>`}})()()(L.pursxToElementConsElt()(L.pursxToElementConsElt()(L.pursxToElementNil(H.plusEvent))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"empl"}}))(H.eventIsEvent)(we)({txt:L.nut(G.text_(H.eventIsEvent)(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Foldable (oneOf)
import Data.Tuple.Nested ((/\\))
import Data.Variant (Variant, match)
import Data.Vec ((+>))
import Data.Vec as V
import Deku.Attribute (cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Toplevel ((\u{1F680}))
import Effect (Effect)
import FRP.Behavior (sampleBy, sample_, step)
import FRP.Event.Animate (animationFrameEvent)
import FRP.Event.Class (bang, filterMap, fold, mapAccum, sampleOn)
import FRP.Event.Memoize (memoize)
import Math (pi, sin)
import Type.Proxy (Proxy(..))
import WAGS.Clock (withACTime)
import WAGS.Control (gain, periodicOsc)
import WAGS.Interpret (close, context)
import WAGS.Math (calcSlope)
import WAGS.Parameter (AudioNumeric(..), _linear, bangOn)
import WAGS.Properties as P
import WAGS.Run (run2)
import WAGS.Variant (injs_, prjs_)

type Cbx = Variant (cbx0 :: Unit, cbx1 :: Unit, cbx2 :: Unit, cbx3 :: Unit)
cbi = injs_ (Proxy :: _ Cbx)
cbp = prjs_ (Proxy :: _ Cbx)

type StartStop = Variant (start :: Unit, stop :: Effect Unit)
ssi = injs_ (Proxy :: _ StartStop)
start = uii.startStop (ssi.start unit)
stop r = uii.startStop (ssi.stop r)

type UIEvents = Variant
  ( init :: Unit
  , startStop :: StartStop
  , cbx :: Cbx
  )

uii = injs_ (Proxy :: _ UIEvents)
uip = prjs_ (Proxy :: _ UIEvents)

main :: Effect Unit
main = start \u{1F680} \\push event -> do
  let
    ss = bang (ssi.start unit) <|> filterMap uip.startStop event
    cbx = filterMap uip.cbx event
    chkState e = step false $ fold (const not) (filterMap e cbx) false
    cbx0 = chkState cbp.cbx0
    cbx1 = chkState cbp.cbx1
    cbx2 = chkState cbp.cbx2
    cbx3 = chkState cbp.cbx3
  D.div_
    [ D.button
        ( ss <#>
            \\e -> D.OnClick := cb
              ( const $ e # match
                  { stop: \\u -> u *> push start
                  , start: \\_ -> do
                      ctx <- context
                      afe <- animationFrameEvent
                      acTime <- memoize
                        $ map (add 0.04 <<< _.acTime)
                        $ withACTime ctx afe
                      let
                        cevt fast b tm = mapAccum
                          ( \\(oo /\\ act) (pact /\\ pt) ->
                              let
                                tn = pt +
                                  ( (act - pact) *
                                      (if oo then fast else 1.0)
                                  )
                              in
                                ((act /\\ tn) /\\ tn)
                          )
                          (sampleBy (/\\) b tm)
                          (0.0 /\\ 0.0)
                        ev0 = cevt 8.0 cbx0 acTime
                        ev1 = map (if _ then 4.0 else 1.0) $ sample_ cbx1 acTime
                        ev2 = cevt 4.0 cbx2 acTime
                        ev3 = map (if _ then 4.0 else 1.0) $ sample_ cbx3 acTime
                        evs f a = sampleOn acTime
                          $ map ($)
                          $ sampleOn a
                          $ { f: _, a: _, t: _ } <$> f
                      r <- run2 ctx
                        [ gain 0.0
                            ( evs ev0 ev1 <#> \\{ f, a, t } -> P.gain $ AudioNumeric
                                { n: calcSlope 1.0 0.01 4.0 0.15 a * sin (pi * f) + 0.15
                                , o: t
                                , t: _linear
                                }
                            )
                            [ periodicOsc
                                { frequency: 325.6
                                , spec: (0.3 +> -0.1 +> 0.7 +> -0.4 +> V.empty)
                                    /\\ (0.6 +> 0.3 +> 0.2 +> 0.0 +> V.empty)
                                }
                                ( oneOf
                                    [ bangOn
                                    , evs ev2 ev3 <#> \\{ f, a, t } -> P.frequency
                                        $ AudioNumeric
                                            { n: 325.6 +
                                                (calcSlope 1.0 3.0 4.0 15.5 a * sin (pi * f))
                                            , o: t
                                            , t: _linear
                                            }
                                    ]
                                )
                            ]
                        ]
                      push $ (stop (r *> close ctx))
                  }
              )
        )
        [ text $ ss <#> match
            { stop: \\_ -> "Turn off"
            , start: \\_ -> "Turn on"
            }
        ]
    , D.div
        ( ss <#> match
            { stop: \\_ -> D.Style := "display:block;"
            , start: \\_ -> D.Style := "display:none;"
            }
        )
        ( map
            ( \\e -> D.input
                ( oneOf
                    [ bang (D.Xtype := "checkbox")
                    , bang (D.OnClick := cb (const $ push (uii.cbx $ e unit)))
                    , (const $ D.Checked := "false") <$> ss
                    ]
                )
                []
            )
            [ cbi.cbx0, cbi.cbx1, cbi.cbx2, cbi.cbx3 ]
        )
    ]`)),empl:L.nut(F.subgraph(h.hashableUnit)(H.eventIsEvent)(J.bang(H.eventIsEvent)(new x.Tuple(g.unit,F.Insert.value)))(function(le){return l.mkExists(function(he){return function(_e){var Oe=t.alt(H.altEvent)(J.bang(H.eventIsEvent)(De.start(g.unit)))(c.filterMap(H.filterableEvent)(N.startStop)(_e)),Ie=c.filterMap(H.filterableEvent)(N.cbx)(_e),Ge=function(me){return Z.step(H.eventIsEvent)(!1)(J.fold(H.eventIsEvent)(s.const(p.not(p.heytingAlgebraBoolean)))(c.filterMap(H.filterableEvent)(me)(Ie))(!1))},Te=Ge(ge.cbx0),Me=Ge(ge.cbx1),je=Ge(ge.cbx2),ke=Ge(ge.cbx3);return R.div_(H.eventIsEvent)([O.button(H.eventIsEvent)(d.mapFlipped(H.functorEvent)(J.biSampleOn(H.eventIsEvent)(t.alt(H.altEvent)(J.bang(H.eventIsEvent)(r.pure($.applicativeEffect)(g.unit)))(d.map(H.functorEvent)(function(me){return me.value0})(fe)))(d.map(H.functorEvent)(x.Tuple.create)(Oe)))(function(me){return W.attr(u.attrOnClickCb)(u.OnClick.value)(W.cb(s.const(E.match()()()({stop:function(Ce){return i.applySecond($.applyEffect)(i.applySecond($.applyEffect)(Ce)(he(Ee)))(Ae(r.pure($.applicativeEffect)(g.unit)))},start:function(Ce){return function(){me.value1();var We=T.context(),qe=V.animationFrameEvent(),Ne=I.memoize(I.memoizableEvent)(d.map(H.functorEvent)(function(){var ue=m.add(m.semiringNumber)(.04);return function(pe){return ue(function(be){return be.acTime}(pe))}}())(j.withACTime(We)(qe)))(),Le=function(ue){return function(pe){return J.sampleOn(H.eventIsEvent)(Ne)(d.map(H.functorEvent)(s.apply)(J.sampleOn(H.eventIsEvent)(pe)(d.map(H.functorEvent)(function(be){return function(ce){return function(ye){return{f:be,a:ce,t:ye}}}})(ue))))}},Re=d.map(H.functorEvent)(function(ue){return ue?4:1})(Z.sample_(H.eventIsEvent)(ke)(Ne)),Be=d.map(H.functorEvent)(function(ue){return ue?4:1})(Z.sample_(H.eventIsEvent)(Me)(Ne)),Ue=function(ue){return function(pe){return function(be){return J.mapAccum(H.eventIsEvent)(function(ce){return function(ye){var ae=ye.value1+(ce.value1-ye.value0)*function(){return ce.value0?ue:1}();return new x.Tuple(new x.Tuple(ce.value1,ae),ae)}})(Z.sampleBy(H.eventIsEvent)(x.Tuple.create)(pe)(be))(new x.Tuple(0,0))}}},Se=Ue(8)(Te)(Ne),Je=Ue(4)(je)(Ne),w=S.run2(We)([M.gain(H.eventIsEvent)(re.initialGainNumber)(0)(d.mapFlipped(H.functorEvent)(Le(Se)(Be))(function(ue){return te.gain()(K.toAudioParameterAudioNume)({n:Q.calcSlope(1)(.01)(4)(.15)(ue.a)*A.sin(A.pi*ue.f)+.15,o:ue.t,t:K._linear})}))([M.periodicOsc(H.eventIsEvent)(re.initialPeriodicOscRecord(o.convertOptionsWithDefaultsRecord(o.convertOptionsRecord()(o.convertRecordOptionsCons(o.convertRecordOptionsCons(o.convertRecordOptionsNil)(re.convertOptionPeriodicOscO1(re.periodicOscSpecableVecNum(b.posD4)))()()()({reflectSymbol:function(){return"spec"}}))(re.convertOptionPeriodicOscO)()()()({reflectSymbol:function(){return"frequency"}})))(o.defaultsRecord()())))({frequency:325.6,spec:new x.Tuple(k.cons(D.typelevelSucc(b.posD4)()(D.divMod10D3D0)()(D.divMod10D4D0))(.3)(k.cons(D.typelevelSucc(b.posD3)()(D.divMod10D2D0)()(D.divMod10D3D0))(-.1)(k.cons(D.typelevelSucc(b.posD2)()(D.divMod10D1D0)()(D.divMod10D2D0))(.7)(k.cons(D.typelevelSucc(b.posD1)()(D.divMod10D0D0)()(D.divMod10D1D0))(-.4)(k.empty)))),k.cons(D.typelevelSucc(b.posD4)()(D.divMod10D3D0)()(D.divMod10D4D0))(.6)(k.cons(D.typelevelSucc(b.posD3)()(D.divMod10D2D0)()(D.divMod10D3D0))(.3)(k.cons(D.typelevelSucc(b.posD2)()(D.divMod10D1D0)()(D.divMod10D2D0))(.2)(k.cons(D.typelevelSucc(b.posD1)()(D.divMod10D0D0)()(D.divMod10D1D0))(0)(k.empty)))))})(v.oneOf(v.foldableArray)(H.plusEvent)([K.bangOn(H.eventIsEvent)(),d.mapFlipped(H.functorEvent)(Le(Je)(Re))(function(ue){return te.frequency()(K.toAudioParameterAudioNume)({n:325.6+Q.calcSlope(1)(3)(4)(15.5)(ue.a)*A.sin(A.pi*ue.f),o:ue.t,t:K._linear})})]))])])(),oe=i.applySecond($.applyEffect)(w)(T.close(We));return Ae(i.applySecond($.applyEffect)(oe)(he(Ee)))(),he(X(oe))()}}})(me.value0))))}))([G.text(H.eventIsEvent)(d.mapFlipped(H.functorEvent)(Oe)(E.match()()()({stop:function(me){return"Turn off"},start:function(me){return"Turn on"}})))]),R.div(H.eventIsEvent)(d.mapFlipped(H.functorEvent)(Oe)(E.match()()()({stop:function(me){return W.attr(a.attrDiv_StyleString)(a.Style.value)("display:block;")},start:function(me){return W.attr(a.attrDiv_StyleString)(a.Style.value)("display:none;")}})))(d.map(d.functorArray)(function(me){return B.input(H.eventIsEvent)(v.oneOf(v.foldableArray)(H.plusEvent)([J.bang(H.eventIsEvent)(W.attr(f.attrInput_XtypeString)(f.Xtype.value)("checkbox")),J.bang(H.eventIsEvent)(W.attr(u.attrOnClickCb)(u.OnClick.value)(W.cb(s.const(he(U.cbx(me(g.unit))))))),d.map(H.functorEvent)(s.const(W.attr(_.attrInput_CheckedString)(_.Checked.value)("false")))(Oe)]))([])})([ne.cbx0,ne.cbx1,ne.cbx2,ne.cbx3]))])}})}))})}}}};n.foldEx=se})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixEx"]=e["WAGS.Example.Docs.FixEx"]||{};var n=e["WAGS.Example.Docs.FixEx"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Bind"],l=e["Control.Category"],c=e.ConvertableOptions,v=e["Data.Boolean"],s=e["Data.DivisionRing"],d=e["Data.EuclideanRing"],h=e["Data.Exists"],p=e["Data.Field"],m=e["Data.Filterable"],x=e["Data.Function"],D=e["Data.Functor"],b=e["Data.Hashable"],g=e["Data.Maybe"],E=e["Data.Newtype"],k=e["Data.Ord"],W=e["Data.Profunctor.Strong"],G=e["Data.Ring"],_=e["Data.Semiring"],u=e["Data.Set"],a=e["Data.Tuple"],f=e["Data.Typelevel.Num.Ops"],O=e["Data.Typelevel.Num.Sets"],R=e["Data.Unit"],B=e["Data.Variant"],L=e["Data.Vec"],F=e["Deku.Attribute"],$=e["Deku.Control"],Z=e["Deku.DOM.Attr.OnClick"],H=e["Deku.DOM.Elt.Button"],V=e["Deku.DOM.Elt.Div"],J=e["Deku.Pursx"],I=e["Deku.Subgraph"],A=e.Effect,q=e["Effect.Random"],j=e["FRP.Behavior"],re=e["FRP.Behavior.Mouse"],M=e["FRP.Behavior.Time"],T=e["FRP.Event"],Q=e["FRP.Event.Animate"],K=e["FRP.Event.Class"],te=e["FRP.Event.Memoize"],S=e["FRP.Event.Mouse"],y=e["Random.LCG"],N=e["Test.QuickCheck.Arbitrary"],U=e["Test.QuickCheck.Gen"],De=e["Type.Proxy"],Ee=e["WAGS.Clock"],X=e["WAGS.Common"],we=e["WAGS.Control"],ge=e["WAGS.Interpret"],ne=e["WAGS.Parameter"],se=e["WAGS.Properties"],Ae=e["WAGS.Run"],ee=e["WAGS.Variant"],xe=ee.prjs_()(ee.prjsCons({reflectSymbol:function(){return"init"}})(ee.prjsCons({reflectSymbol:function(){return"startStop"}})(ee.prjsNilRow)()()()())()()()())(De.Proxy.value),fe=ee.injs_()(ee.injsCons({reflectSymbol:function(){return"init"}})(ee.injsCons({reflectSymbol:function(){return"startStop"}})(ee.injsNilRow)()()()())()()()())(De.Proxy.value),le=function(Te){var Me=function(Ce){return function(Fe){return function(We){return function(qe){return function(Ne){return function(Le){return function(Re){var Be=_.add(Fe.DivisionRing1().Ring0().Semiring0())(_.one(Fe.DivisionRing1().Ring0().Semiring0()))(_.one(Fe.DivisionRing1().Ring0().Semiring0())),Ue=function(Se){return function(Je){if(Se.last instanceof g.Nothing)return Je;if(Se.last instanceof g.Just)return _.add(We)(Je)(qe(function(w){return d.div(Fe.EuclideanRing0())(_.mul(Fe.DivisionRing1().Ring0().Semiring0())(w(_.add(We)(Se.last.value0.value1)(Se.now.value1)))(G.sub(Fe.DivisionRing1().Ring0())(Se.now.value0)(Se.last.value0.value0)))(Be)}));throw new Error("Failed pattern match at WAGS.Example.Docs.FixEx (line 144, column 5 - line 144, column 35): "+[Se.constructor.name,Je.constructor.name])}};return j.behavior(function(Se){var Je=j.sample(Re)(D.voidLeft(Ce.Filterable1().Functor1())(Se)(l.identity(l.categoryFn))),w=K.withLast(Ce)(j.sampleBy(Ce)(a.Tuple.create)(Le)(Je)),oe=K.fold(Ce)(Ue)(w)(Ne);return K.sampleOn(Ce)(oe)(Se)})}}}}}}},je=function(Ce){return function(Fe){return Me(Ce)(Fe)(Fe.DivisionRing1().Ring0().Semiring0())(function(We){return We(l.identity(l.categoryFn))})}},ke=function(Ce){return function(Fe){return j.behavior(function(We){return K.fix(T.eventIsEvent)(function(qe){var Ne=Fe(j.step(T.eventIsEvent)(Ce)(qe));return{input:j.sample_(T.eventIsEvent)(Ne)(We),output:K.sampleOn(T.eventIsEvent)(qe)(We)}})})}},me=function(Ce){return function(Fe){return function(We){if(u.isEmpty(Ce))return-8*(Fe-1)-We*2;if(v.otherwise)return 2*(4-Fe);throw new Error("Failed pattern match at WAGS.Example.Docs.FixEx (line 104, column 3 - line 106, column 34): "+[Ce.constructor.name,Fe.constructor.name,We.constructor.name])}}};return ke(2)(function(Ce){return je(T.eventIsEvent)(p.field(d.euclideanRingNumber)(s.divisionringNumber))(2)(D.map(j.functorABehavior(T.functorEvent))(E.unwrap())(M.seconds))(function(){var Fe=ke(10)(function(We){return je(T.eventIsEvent)(p.field(d.euclideanRingNumber)(s.divisionringNumber))(10)(D.map(j.functorABehavior(T.functorEvent))(E.unwrap())(M.seconds))(i.apply(j.applyABehavior(T.functorEvent))(i.apply(j.applyABehavior(T.functorEvent))(D.map(j.functorABehavior(T.functorEvent))(me)(re.buttons(Te)))(Ce))(We))});return j.switcher(Fe)(D.voidLeft(T.functorEvent)(S.down)(Fe))}())})},he=ee.injs_()(ee.injsCons({reflectSymbol:function(){return"start"}})(ee.injsCons({reflectSymbol:function(){return"stop"}})(ee.injsNilRow)()()()())()()()())(De.Proxy.value),_e=fe.startStop(he.start(R.unit)),Oe=function(Te){return fe.startStop(he.stop(Te))},Ie=De.Proxy.value,Ge=function(Te){return function(Me){return function(je){return function(ke){return J.makePursx({reflectSymbol:function(){return`<section>
  <h2>Fix</h2>

  <p>Fix, like it's equivalent in wags that we've already seen, creates a feedback loop. However, in this case, we are talking about a feedback loop of <i>events</i>, not sound.</p>

  <p>At first glance, it may not be clear why we need an event stream to feed back into itself? It seems prone to saturation: if you have a counter that feeds back into itself with a delay, after a few seconds you'll have so many events that it will crash your browser (I've tried it!).</p>

  <p>However, there's one important circumstance where you need fixed points: when an event can only be defined in terms of itself. One classic category of this is the <i>differential equation</i>. Differential equations allow you to produce <a href="https://en.wikipedia.org/wiki/Simple_harmonic_motion">Slinky effects, aka simple harmonic motion,</a> and a lot of other neat behaviors that are difficult to produce via other means.</p>

  <p>Let's listen to the sound of simple harmonic motion in the example below, courtesy of <code>fix</code>. The differential equation in the example below comes from Phil Freeman, the creator of the PureScript language and the author of the <code>purescript-behaviors</code> package. When you click "Turn on", you won't hear much, but press and release your mouse anywhere on the screen to hear the differential equation take flight!</p>

  <pre><code>~txt~</code></pre>

  ~empl~

  <p>When working with stateful events, a good way to decide if you should use <code>fold</code> versus <code>fix</code> is to ask the following question: can I incrementally change my state based on an initial state, or is my state defined in terms of how it changes? If you can incrementally change your state, go with <code>fold</code>. If, on the other hand, your state is defined in terms of how it changes, go with <code>fix</code>.</p>
</section>`}})()()(J.pursxToElementConsElt()(J.pursxToElementConsElt()(J.pursxToElementNil(T.plusEvent))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"empl"}}))(T.eventIsEvent)(Ie)({txt:J.nut($.text_(T.eventIsEvent)(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Maybe (Maybe(..))
import Data.Newtype (unwrap)
import Data.Profunctor.Strong (second)
import Data.Set (isEmpty)
import Data.Tuple.Nested ((/\\))
import Data.Variant (Variant, match)
import Data.Vec ((+>))
import Data.Vec as V
import Deku.Attribute (cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Toplevel ((\u{1F680}))
import Effect (Effect)
import Effect.Random (randomInt)
import FRP.Behavior (ABehavior, Behavior, behavior, sample, sampleBy, sample_, step, switcher)
import FRP.Behavior.Mouse (buttons)
import FRP.Behavior.Time as Time
import FRP.Event.Animate (animationFrameEvent)
import FRP.Event.Class (class IsEvent, bang, filterMap, fix, fold, sampleOn, withLast)
import FRP.Event.Memoize (memoize)
import FRP.Event.Mouse (Mouse, down, getMouse)
import Test.QuickCheck (arbitrary, mkSeed)
import Test.QuickCheck.Gen (evalGen)
import Type.Proxy (Proxy(..))
import WAGS.Clock (withACTime)
import WAGS.Control (bandpass_, gain, lowpass_, periodicOsc, squareOsc_)
import WAGS.Interpret (close, context)
import WAGS.Parameter (AudioNumeric(..), _linear, bangOn)
import WAGS.Properties as P
import WAGS.Run (run2)
import WAGS.Variant (injs_, prjs_)

type StartStop = Variant (start :: Unit, stop :: Effect Unit)
ssi = injs_ (Proxy :: _ StartStop)
start = uii.startStop (ssi.start unit)
stop r = uii.startStop (ssi.stop r)

type UIEvents = Variant
  ( init :: Unit
  , startStop :: StartStop
  )

uii = injs_ (Proxy :: _ UIEvents)
uip = prjs_ (Proxy :: _ UIEvents)

-- \`swell\` is an interactive function of time defined by a differential equation:
--
-- d^2s/dt^2
--   | mouse down = \u237A - \u03B2s
--   | mouse up   = \u0263 - \u03B4s - \u03B5 ds/dt
--
-- So the function exhibits either decay or growth depending on if
-- the mouse is pressed or not.
--
-- We can solve the differential equation by integration using \`solve2'\`.
swell :: Mouse -> Behavior Number
swell mouse =
  fixB 2.0 \\b ->
    integral' 2.0 (unwrap <$> Time.seconds)
      let
        db = fixB 10.0 \\db_ ->
          integral' 10.0 (unwrap <$> Time.seconds) (f <$> buttons mouse <*> b <*> db_)
      in
        switcher db (down $> db)
  where
  f bs s ds
    | isEmpty bs = -8.0 * (s - 1.0) - ds * 2.0
    | otherwise = 2.0 * (4.0 - s)

  fixB :: forall a. a -> (Behavior a -> Behavior a) -> Behavior a
  fixB a fn = behavior \\s ->
    fix \\event ->
      let
        b = fn (step a event)
      in
        { input: sample_ b s, output: sampleOn event s }

  -- | Integrate with respect to some measure of time.
  -- |
  -- | This function approximates the integral using the trapezium rule at the
  -- | implicit sampling interval.
  -- |
  -- | The \`Semiring\` \`a\` should be a vector field over the field \`t\`. To represent
  -- | this, the user should provide a _grate_ which lifts a multiplication
  -- | function on \`t\` to a function on \`a\`. Simple examples where \`t ~ a\` can use
  -- | the \`integral'\` function instead.
  integral
    :: forall event a t
     . IsEvent event
    => Field t
    => Semiring a
    => (((a -> t) -> t) -> a)
    -> a
    -> ABehavior event t
    -> ABehavior event a
    -> ABehavior event a
  integral g initial t b =
    behavior \\e ->
      let
        x = sample b (e $> identity)
        y = withLast (sampleBy (/\\) t x)
        z = fold approx y initial
      in
        sampleOn z e
    where
    approx { last: Nothing } s = s
    approx { now: t1 /\\ a1, last: Just (t0 /\\ a0) } s = s + g (\\z -> z (a0 + a1) * (t1 - t0) / two)

    two :: t
    two = one + one

  -- | Integrate with respect to some measure of time.
  -- |
  -- | This function is a simpler version of \`integral\` where the function being
  -- | integrated takes values in the same field used to represent time.
  integral'
    :: forall event t
     . IsEvent event
    => Field t
    => t
    -> ABehavior event t
    -> ABehavior event t
    -> ABehavior event t
  integral' = integral (_ $ identity)

main :: Effect Unit
main = start \u{1F680} \\push event -> do
  let
    ss = bang (ssi.start unit) <|> filterMap uip.startStop event
  D.div_
    [ D.button
        ( ss <#>
            \\e -> D.OnClick := cb
              ( const $ e # match
                  { stop: \\u -> u *> push start
                  , start: \\_ -> do
                      ctx <- context
                      afe <- animationFrameEvent
                      mouse <- getMouse
                      swm <- memoize
                        $ map (\\{ acTime, value } -> acTime /\\ value)
                        $ withACTime ctx
                        $ sample_ (swell mouse) afe
                      ri <- randomInt 0 10000
                      let
                        ttap (o /\\ n) = AudioNumeric { o: o + 0.04, n, t: _linear }
                        fund = 90.4
                        spcn = map (_ - 0.5) arbitrary
                        spc' = do
                          a <- spcn
                          b <- spcn
                          c <- spcn
                          d <- spcn
                          pure (a +> b +> c +> d +> V.empty)
                        spc = (/\\) <$> spc' <*> spc'
                        spcs = { s0: _, s1: _, s2: _, s3: _ } <$> spc <*> spc <*> spc <*> spc
                        allSpcs = evalGen spcs { newSeed: mkSeed ri, size: 5 }
                      r <- run2 ctx
                        [ gain 0.0
                            ( P.gain
                                <<< ttap
                                <<< second (\\x -> max (-0.4) $ 0.5 * (x - 1.0)) <$> swm
                            )
                            [ lowpass_ { frequency: fund, q: 20.0 }
                                [ squareOsc_ fund ]
                            ]
                        , gain 0.0
                            ( P.gain
                                <<< ttap
                                <<< second (\\x -> max (-0.2) $ 0.4 * (x - 3.0)) <$> swm
                            )
                            [ bandpass_ { frequency: fund * 4.0, q: 20.0 }
                                [ periodicOsc
                                    { frequency: (fund * 3.02)
                                    , spec: allSpcs.s0
                                    }
                                    ( bangOn <|>
                                        ( P.frequency
                                            <<< ttap
                                            <<< second (\\x -> fund * 3.02 + 14.0 * (x - 1.0)) <$> swm
                                        )
                                    )
                                ]
                            ]
                        , gain 0.0
                            ( P.gain
                                <<< ttap
                                <<< second (\\x -> max (-0.1) $ 0.2 * (x - 6.0)) <$> swm
                            )
                            [ bandpass_ { frequency: fund * 6.0, q: 20.0 }
                                [ periodicOsc
                                    { frequency: fund * 5.07
                                    , spec: allSpcs.s1
                                    }
                                    ( bangOn <|>
                                        ( P.frequency
                                            <<< ttap
                                            <<< second (\\x -> fund * 5.07 + 18.0 * (x - 1.0)) <$> swm
                                        )
                                    )
                                ]
                            ]
                        , gain 0.0
                            ( P.gain
                                <<< ttap
                                <<< second (\\x -> max 0.0 $ 0.2 * (x - 3.0)) <$> swm
                            )
                            [ bandpass_ { frequency: fund * 8.0, q: 20.0 }
                                [ periodicOsc
                                    { frequency: fund * 7.13
                                    , spec: allSpcs.s2
                                    }
                                    ( bangOn <|>
                                        ( P.frequency
                                            <<< ttap
                                            <<< second (\\x -> fund * 7.13 + 32.0 * (x - 1.0)) <$> swm
                                        )
                                    )
                                ]
                            ]
                        , gain 0.0
                            ( P.gain
                                <<< ttap
                                <<< second (\\x -> max 0.0 $ 0.1 * (x - 7.0)) <$> swm
                            )
                            [ periodicOsc
                                { frequency: fund * 9.14
                                , spec: allSpcs.s3
                                }
                                ( bangOn <|>
                                    ( P.frequency
                                        <<< ttap
                                        <<< second (\\x -> fund * 9.14 + 31.0 * (x - 1.0)) <$> swm
                                    )
                                )
                            ]
                        ]
                      push $ (stop (r *> close ctx))
                  }
              )
        )
        [ text $ ss <#> match
            { stop: \\_ -> "Turn off"
            , start: \\_ -> "Turn on"
            }
        ]
    ]`)),empl:J.nut(I.subgraph(b.hashableUnit)(T.eventIsEvent)(K.bang(T.eventIsEvent)(new a.Tuple(R.unit,I.Insert.value)))(function(me){return h.mkExists(function(Ce){return function(Fe){var We=t.alt(T.altEvent)(K.bang(T.eventIsEvent)(he.start(R.unit)))(m.filterMap(T.filterableEvent)(xe.startStop)(Fe));return V.div_(T.eventIsEvent)([H.button(T.eventIsEvent)(D.mapFlipped(T.functorEvent)(K.biSampleOn(T.eventIsEvent)(t.alt(T.altEvent)(K.bang(T.eventIsEvent)(r.pure(A.applicativeEffect)(R.unit)))(D.map(T.functorEvent)(function(qe){return qe.value0})(ke)))(D.map(T.functorEvent)(a.Tuple.create)(We)))(function(qe){return F.attr(Z.attrOnClickCb)(Z.OnClick.value)(F.cb(x.const(B.match()()()({stop:function(Ne){return i.applySecond(A.applyEffect)(i.applySecond(A.applyEffect)(Ne)(Ce(_e)))(Te(r.pure(A.applicativeEffect)(R.unit)))},start:function(Ne){return function(){qe.value1();var Re=ge.context(),Be=Q.animationFrameEvent(),Ue=S.getMouse(),Se=te.memoize(te.memoizableEvent)(D.map(T.functorEvent)(function(Y){return new a.Tuple(Y.acTime,Y.value)})(Ee.withACTime(Re)(j.sample_(T.eventIsEvent)(le(Ue))(Be))))(),Je=q.randomInt(0)(1e4)(),w=function(Y){return{o:Y.value0+.04,n:Y.value1,t:ne._linear}},oe=D.map(U.functorGen)(function(Y){return Y-.5})(N.arbitrary(N.arbNumber)),ue=o.bind(U.bindGen)(oe)(function(Y){return o.bind(U.bindGen)(oe)(function(ie){return o.bind(U.bindGen)(oe)(function(P){return o.bind(U.bindGen)(oe)(function(de){return r.pure(U.applicativeGen)(L.cons(f.typelevelSucc(O.posD4)()(f.divMod10D3D0)()(f.divMod10D4D0))(Y)(L.cons(f.typelevelSucc(O.posD3)()(f.divMod10D2D0)()(f.divMod10D3D0))(ie)(L.cons(f.typelevelSucc(O.posD2)()(f.divMod10D1D0)()(f.divMod10D2D0))(P)(L.cons(f.typelevelSucc(O.posD1)()(f.divMod10D0D0)()(f.divMod10D1D0))(de)(L.empty)))))})})})}),pe=i.apply(U.applyGen)(D.map(U.functorGen)(a.Tuple.create)(ue))(ue),be=i.apply(U.applyGen)(i.apply(U.applyGen)(i.apply(U.applyGen)(D.map(U.functorGen)(function(Y){return function(ie){return function(P){return function(de){return{s0:Y,s1:ie,s2:P,s3:de}}}}})(pe))(pe))(pe))(pe),ce=U.evalGen(be)({newSeed:y.mkSeed(Je),size:5}),ye=Ae.run2(Re)([we.gain(T.eventIsEvent)(X.initialGainNumber)(0)(D.map(T.functorEvent)(function(){var Y=se.gain()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return k.max(k.ordNumber)(-.4)(.5*(P-1))});return function(P){return Y(w(ie(P)))}}())(Se))([we.lowpass_(T.eventIsEvent)(X.initialLowpassRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionLowpassOptio)()()()({reflectSymbol:function(){return"q"}}))(X.convertOptionLowpassOptio1)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4,q:20})([we.squareOsc_(T.eventIsEvent)(X.initialSquareOscNumber)(90.4)])]),we.gain(T.eventIsEvent)(X.initialGainNumber)(0)(D.map(T.functorEvent)(function(){var Y=se.gain()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return k.max(k.ordNumber)(-.2)(.4*(P-3))});return function(P){return Y(w(ie(P)))}}())(Se))([we.bandpass_(T.eventIsEvent)(X.initialBandpassRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(X.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4*4,q:20})([we.periodicOsc(T.eventIsEvent)(X.initialPeriodicOscRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionPeriodicOscO1(X.periodicOscSpecableVecNum(O.posD4)))()()()({reflectSymbol:function(){return"spec"}}))(X.convertOptionPeriodicOscO)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4*3.02,spec:ce.s0})(t.alt(T.altEvent)(ne.bangOn(T.eventIsEvent)())(D.map(T.functorEvent)(function(){var Y=se.frequency()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return 90.4*3.02+14*(P-1)});return function(P){return Y(w(ie(P)))}}())(Se)))])]),we.gain(T.eventIsEvent)(X.initialGainNumber)(0)(D.map(T.functorEvent)(function(){var Y=se.gain()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return k.max(k.ordNumber)(-.1)(.2*(P-6))});return function(P){return Y(w(ie(P)))}}())(Se))([we.bandpass_(T.eventIsEvent)(X.initialBandpassRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(X.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4*6,q:20})([we.periodicOsc(T.eventIsEvent)(X.initialPeriodicOscRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionPeriodicOscO1(X.periodicOscSpecableVecNum(O.posD4)))()()()({reflectSymbol:function(){return"spec"}}))(X.convertOptionPeriodicOscO)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4*5.07,spec:ce.s1})(t.alt(T.altEvent)(ne.bangOn(T.eventIsEvent)())(D.map(T.functorEvent)(function(){var Y=se.frequency()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return 90.4*5.07+18*(P-1)});return function(P){return Y(w(ie(P)))}}())(Se)))])]),we.gain(T.eventIsEvent)(X.initialGainNumber)(0)(D.map(T.functorEvent)(function(){var Y=se.gain()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return k.max(k.ordNumber)(0)(.2*(P-3))});return function(P){return Y(w(ie(P)))}}())(Se))([we.bandpass_(T.eventIsEvent)(X.initialBandpassRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(X.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4*8,q:20})([we.periodicOsc(T.eventIsEvent)(X.initialPeriodicOscRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionPeriodicOscO1(X.periodicOscSpecableVecNum(O.posD4)))()()()({reflectSymbol:function(){return"spec"}}))(X.convertOptionPeriodicOscO)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4*7.13,spec:ce.s2})(t.alt(T.altEvent)(ne.bangOn(T.eventIsEvent)())(D.map(T.functorEvent)(function(){var Y=se.frequency()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return 90.4*7.13+32*(P-1)});return function(P){return Y(w(ie(P)))}}())(Se)))])]),we.gain(T.eventIsEvent)(X.initialGainNumber)(0)(D.map(T.functorEvent)(function(){var Y=se.gain()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return k.max(k.ordNumber)(0)(.1*(P-7))});return function(P){return Y(w(ie(P)))}}())(Se))([we.periodicOsc(T.eventIsEvent)(X.initialPeriodicOscRecord(c.convertOptionsWithDefaultsRecord(c.convertOptionsRecord()(c.convertRecordOptionsCons(c.convertRecordOptionsCons(c.convertRecordOptionsNil)(X.convertOptionPeriodicOscO1(X.periodicOscSpecableVecNum(O.posD4)))()()()({reflectSymbol:function(){return"spec"}}))(X.convertOptionPeriodicOscO)()()()({reflectSymbol:function(){return"frequency"}})))(c.defaultsRecord()())))({frequency:90.4*9.14,spec:ce.s3})(t.alt(T.altEvent)(ne.bangOn(T.eventIsEvent)())(D.map(T.functorEvent)(function(){var Y=se.frequency()(ne.toAudioParameterAudioNume),ie=W.second(W.strongFn)(function(P){return 90.4*9.14+31*(P-1)});return function(P){return Y(w(ie(P)))}}())(Se)))])])(),ae=i.applySecond(A.applyEffect)(ye)(ge.close(Re));return Te(i.applySecond(A.applyEffect)(ae)(Ce(_e)))(),Ce(Oe(ae))()}}})(qe.value0))))}))([$.text(T.eventIsEvent)(D.mapFlipped(T.functorEvent)(We)(B.match()()()({stop:function(qe){return"Turn off"},start:function(qe){return"Turn on"}})))])])}})}))})}}}};n.fixEx=Ge})(C);(function(e){"use strict";e["WAGS.Example.Docs.Effects"]=e["WAGS.Example.Docs.Effects"]||{};var n=e["WAGS.Example.Docs.Effects"],t=e["Control.Apply"],r=e["Deku.Pursx"],i=e.Effect,o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Example.Docs.Effects.FoldEx"],v=e["WAGS.Example.Docs.FixEx"],s=e["WAGS.Example.Docs.Types"],d=e["WAGS.Example.Docs.Util"],h=l.Proxy.value,p=function(m){return function(x){return function(D){return function(b){var g=d.ccassp(m)(D);return r.makePursx({reflectSymbol:function(){return`<div>
  <h1>State</h1>

  <h3>Or Events 2.0</h3>
  <p>
    The name of this section is a bit of a nisnomer. While it will address the issue of maintaining state in an audio graph, it's really just about two mechanisms you can use to make an <code>Event</code> stateful. One is called <code>fold</code>, and the other is called <code>fix</code>. Both are part of the <code>IsEvent</code> typeclass, which means you get them for free when working with events.
  </p>

  ~fold~
  ~fix~

  <h2>Next steps</h2>
  <p>Using <code>fold</code> and <code>fix</code>, we can create internal state in our Web Audio works that would be really tedious and error-prone to achieve in vanilla JS or other compile-to-JS languages. There's still one nagging issue that we haven't addressed, though. For all of the flexibility we can achieve with events, we still can't flex the audio graph itself, meaning that we can't add or remove components. In the next two sections, we'll learn two ways to do that. Let's start with exploring <a ~next~ style="cursor:pointer;">subgraphs</a>.</p>
</div>`}})()()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsAttr()(r.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"next"}}))({reflectSymbol:function(){return"fold"}}))({reflectSymbol:function(){return"fix"}}))(o.eventIsEvent)(h)({next:d.mkNext(o.altEvent)(o.eventIsEvent)(b)(t.applySecond(i.applyEffect)(x(s.Subgraph.value))(d.scrollToTop)),fold:r.nut(c.foldEx(g)(x)(D)(b)),fix:r.nut(v.fixEx(g)(x)(D)(b))})}}}};n.effects=p})(C);(function(e){"use strict";e["WAGS.Example.Docs.Events.Ex0"]=e["WAGS.Example.Docs.Events.Ex0"]||{};var n=e["WAGS.Example.Docs.Events.Ex0"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Bind"],l=e["Data.Array"],c=e["Data.Exists"],v=e["Data.Function"],s=e["Data.Functor"],d=e["Data.Hashable"],h=e["Data.Int"],p=e["Data.Profunctor"],m=e["Data.Tuple"],x=e["Data.Unit"],D=e["Deku.Attribute"],b=e["Deku.Control"],g=e["Deku.DOM.Attr.OnClick"],E=e["Deku.DOM.Elt.Button"],k=e["Deku.DOM.Elt.Div"],W=e["Deku.Pursx"],G=e["Deku.Subgraph"],_=e.Effect,u=e["FRP.Event"],a=e["FRP.Event.Class"],f=e.Math,O=e["Type.Proxy"],R=e["WAGS.Common"],B=e["WAGS.Control"],L=e["WAGS.Parameter"],F=e["WAGS.Properties"],$=e["WAGS.Run"],Z=function(){function M(){}return M.value=new M,M}(),H=function(){function M(){}return M.value=new M,M}(),V=function(){function M(T){this.value0=T}return M.create=function(T){return new M(T)},M}(),J=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Array ((..))
import Data.Int (toNumber)
import Data.Profunctor (lcmap)
import Deku.Attribute (cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Toplevel ((\u{1F680}))
import Effect (Effect)
import FRP.Event.Class (bang)
import Math (pow)
import WAGS.Control (gain_, gain, sinOsc)
import WAGS.Parameter (AudioEnvelope(..), AudioOnOff(..), _on, _off)
import WAGS.Properties (onOff)
import WAGS.Properties as P
import WAGS.Run (run2_)

data UIEvents = Init | Start | Stop (Effect Unit)

-- an event to turn our oscillators on
oon o = bang $ onOff $ AudioOnOff { x: _on, o }
-- an event to turn our oscillators off
oof o = bang $ onOff $ AudioOnOff { x: _off, o }
-- an event with an envelope for our gain
env o = bang $ P.gain
  $ AudioEnvelope
      { p: [ 0.0, 0.4, 0.1, 0.05, 0.01, 0.0 ]
      , d: 0.8
      , o
      }

-- a single cell with four oscillators,
-- each of which have the envelope applied
cell = lcmap toNumber \\i -> do
  let
    ooo' x = oon (x + 0.27 * (i * (1.005 \`pow\` i)))
      <|> oof (x + 3.0 + 0.3 * (i * (1.005 \`pow\` i)))
    env' x = env (x + 0.3 * (i * (1.005 \`pow\` i)))
    strand x y =
      gain 0.0 (env' x) [ sinOsc (200.0 + i * y) (ooo' x) ]
  [ strand 0.2 4.0
  , strand 0.3 6.0
  , strand 0.45 14.0
  , strand 0.7 20.0
  ]

main :: Effect Unit
main = Init \u{1F680} \\push event ->
  D.div_
    [ D.button
        ( event <#>
            \\e -> D.OnClick := cb
              ( const $ case e of
                  Stop u -> u *> push Start
                  _ -> do
                    r <- run2_
                      [ gain_ 1.0
                          -- we create 100 cells
                          $ join
                          $ cell <$> 0 .. 100
                      ]
                    push $ Stop r
              )
        )
        [ text $ event <#> case _ of
            Stop _ -> "Turn off"
            _ -> "Turn on"
        ]
    ]
`,I=O.Proxy.value,A=function(M){return function(T){return function(Q){return a.bang(M)(F.onOff(T)(L.toAudioOnOffAudioOnOff)({x:L._on,o:Q}))}}},q=function(M){return function(T){return function(Q){return a.bang(M)(F.onOff(T)(L.toAudioOnOffAudioOnOff)({x:L._off,o:Q}))}}},j=function(M){return function(T){return p.lcmap(p.profunctorFn)(h.toNumber)(function(Q){var K=function(y){return t.alt(M)(A(T)()(y+.27*(Q*f.pow(1.005)(Q))))(q(T)()(y+3+.3*(Q*f.pow(1.005)(Q))))},te=function(y){return a.bang(T)(F.gain()(L.toAudioParameterAudioEnve)({p:[0,.4,.1,.05,.01,0],o:y+.3*(Q*f.pow(1.005)(Q)),d:.8}))},S=function(y){return function(N){return B.gain(T)(R.initialGainNumber)(0)(te(y))([B.sinOsc(T)(R.initialSinOscNumber)(200+Q*N)(K(y))])}};return[S(.2)(4),S(.3)(6),S(.45)(14),S(.7)(20)]})}},re=function(M){return function(T){return function(Q){return W["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2>Example 1: Hello events</h2>

  <p>Let's say hi to events! The simplest of events, which we've seen already, are the ones that occur <span style="font-weight:800;">now</span>, that is to say, immediately upon subscription. You create those types of events using <code>bang</code>. In this section, we'll use <code>bang</code> to set several different types of values:</p>

  <ul>
    <li><code>AudioEnvelope</code> to create an envelope for the gain node. To construct one, use a record with the following parameters:<ul><li><code>p</code>: a list of numbers that will be interpolated over.</li><li><code>o</code>: the offset in time from the AudioContext clock's start time.</li><li><code>d</code>: the duration of the envelope.</li></ul></li>
    <li><code>AudioOnOff</code> to turn the sine-wave oscillator on and off. To construct one, use a record with the following parameters:<ul><li><code>n</code>: an enum with the value <code>_on</code>, <code>_off</code> or <code>_onOff</code> (more on this in <a href="#example3">Example 3</a> below).</li><li><code>o</code>: the offset in time from the AudioContext clock's start time.</li></ul></li>
  </ul>

  <p>After that, in the example below, it's functions all the way down. <code>oon</code> and <code>oof</code> create our on/off events, <code>env</code> creates our gain envelope, <code>ooo'</code> and <code>env'</code> specialize these envelopes to a specific point in time, and <code>cell</code> creates a single cell that we deploy 100 times.</p>

  <p>One important thing to note here is the use of the tie fighter (<code>&lt;|&gt;</code>), aka <code>alt</code>, in the definition of <code>ooo'</code>. The <code>Event</code> type, when <code>alt</code>'d, preserves a before-after relationship of the left and right operands when the operands happen at the same time. This is a bit hackish: the events conceptually happen at the same time, but on our CPU, one has to follow the other. We can use this, however, to make sure that certain events happen in a logical sequence. For example, an <code>off</code> instruction must be issued after an <code>on</code> instruction, which we guarantee by using <code>oon</code> on the left side of the alt. If we did it the other way, the <code>on</code> instruction would be last and we'd wind up with 100 oscillators playing at the same time!</p>

  <p>A last thing to note before the music plays is how scheduling works here. Even though all the events are issued upfront via <code>bang</code>, they schedule things to be played <i>later</i> in the audio context. We'll see more advanced scheduling techniques in the <a href="#example4"><code>requestAnimationFrame</code> example below</a>.</p>

  <pre><code>@txt@</code></pre>

  @ex0@

  <p>Unlike the previous examples, this one and all subsequent ones are "batteries included", meaning they are single-file, self-contained PureScript examples that you can compile and run yourself.</p>

</section>
`}})({reflectSymbol:function(){return"@"}})()()(W.pursxToElementConsElt()(W.pursxToElementConsElt()(W.pursxToElementNil(u.plusEvent))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"ex0"}}))(u.eventIsEvent)(O.Proxy.value)(I)({txt:W.nut(b.text_(u.eventIsEvent)(J)),ex0:W.nut(G.subgraph(d.hashableUnit)(u.eventIsEvent)(a.bang(u.eventIsEvent)(new m.Tuple(x.unit,G.Insert.value)))(function(K){return c.mkExists(function(te){return p.lcmap(p.profunctorFn)(t.alt(u.altEvent)(a.bang(u.eventIsEvent)(Z.value)))(function(S){return k.div_(u.eventIsEvent)([E.button(u.eventIsEvent)(s.mapFlipped(u.functorEvent)(a.biSampleOn(u.eventIsEvent)(t.alt(u.altEvent)(a.bang(u.eventIsEvent)(r.pure(_.applicativeEffect)(x.unit)))(s.map(u.functorEvent)(function(y){return y.value0})(Q)))(s.map(u.functorEvent)(m.Tuple.create)(S)))(function(y){return D.attr(g.attrOnClickCb)(g.OnClick.value)(D.cb(v.const(function(){return y.value0 instanceof V?i.applySecond(_.applyEffect)(i.applySecond(_.applyEffect)(y.value0.value0)(te(H.value)))(M(r.pure(_.applicativeEffect)(x.unit))):function(){y.value1();var U=$.run2_([B.gain_(u.eventIsEvent)(R.initialGainNumber)(1)(o.join(o.bindArray)(s.map(s.functorArray)(j(u.altEvent)(u.eventIsEvent))(l.range(0)(100))))])();return M(i.applySecond(_.applyEffect)(U)(te(H.value)))(),te(new V(U))()}}())))}))([b.text(u.eventIsEvent)(s.mapFlipped(u.functorEvent)(S)(function(y){return y instanceof V?"Turn off":"Turn on"}))])])})})}))})}}};n.ex0=re})(C);(function(e){"use strict";e._target=function(n){return n.target}})(C["Web.Event.Event"]=C["Web.Event.Event"]||{});(function(e){"use strict";e["Web.Event.Event"]=e["Web.Event.Event"]||{};var n=e["Web.Event.Event"],t=e["Web.Event.Event"],r=e["Data.Nullable"],i=function(o){return r.toMaybe(t._target(o))};n.target=i})(C);(function(e){"use strict";e.valueAsNumber=function(n){return function(){return n.valueAsNumber}}})(C["Web.HTML.HTMLInputElement"]=C["Web.HTML.HTMLInputElement"]||{});(function(e){"use strict";e["Web.HTML.HTMLInputElement"]=e["Web.HTML.HTMLInputElement"]||{};var n=e["Web.HTML.HTMLInputElement"],t=e["Web.HTML.HTMLInputElement"],r=e["Web.Internal.FFI"],i=r.unsafeReadProtoTagged("HTMLInputElement");n.fromEventTarget=i,n.valueAsNumber=t.valueAsNumber})(C);(function(e){"use strict";e["WAGS.Example.Docs.Events.Ex1"]=e["WAGS.Example.Docs.Events.Ex1"]||{};var n=e["WAGS.Example.Docs.Events.Ex1"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Bind"],l=e.ConvertableOptions,c=e["Data.Exists"],v=e["Data.Filterable"],s=e["Data.Foldable"],d=e["Data.Function"],h=e["Data.Functor"],p=e["Data.Hashable"],m=e["Data.Maybe"],x=e["Data.Semigroup"],D=e["Data.Semiring"],b=e["Data.Tuple"],g=e["Data.Unit"],E=e["Data.Variant"],k=e["Deku.Attribute"],W=e["Deku.Control"],G=e["Deku.DOM.Attr.Max"],_=e["Deku.DOM.Attr.Min"],u=e["Deku.DOM.Attr.OnClick"],a=e["Deku.DOM.Attr.OnInput"],f=e["Deku.DOM.Attr.Step"],O=e["Deku.DOM.Attr.Value"],R=e["Deku.DOM.Attr.Xtype"],B=e["Deku.DOM.Elt.Button"],L=e["Deku.DOM.Elt.Div"],F=e["Deku.DOM.Elt.Input"],$=e["Deku.Pursx"],Z=e["Deku.Subgraph"],H=e.Effect,V=e["Effect.Aff"],J=e["Effect.Class"],I=e["FRP.Event"],A=e["FRP.Event.Class"],q=e["Type.Proxy"],j=e["WAGS.Common"],re=e["WAGS.Control"],M=e["WAGS.Example.Docs.Util"],T=e["WAGS.Interpret"],Q=e["WAGS.Math"],K=e["WAGS.Parameter"],te=e["WAGS.Properties"],S=e["WAGS.Run"],y=e["WAGS.Variant"],N=e["Web.Event.Event"],U=e["Web.HTML.HTMLInputElement"],De=y.prjs_()(y.prjsCons({reflectSymbol:function(){return"slider"}})(y.prjsCons({reflectSymbol:function(){return"startStop"}})(y.prjsNilRow)()()()())()()()())(q.Proxy.value),Ee=y.injs_()(y.injsCons({reflectSymbol:function(){return"slider"}})(y.injsCons({reflectSymbol:function(){return"startStop"}})(y.injsNilRow)()()()())()()()())(q.Proxy.value),X=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Exists (mkExists)
import Data.Foldable (oneOf, oneOfMap, traverse_)
import Data.Hashable (class Hashable)
import Data.Newtype (class Newtype, unwrap)
import Data.Tuple.Nested ((/\\))
import Data.Variant (Variant, match)
import Deku.Attribute (cb, (:=))
import Deku.Control (text, text_)
import Deku.Core (SubgraphF(..))
import Deku.DOM as D
import Deku.Subgraph ((@@))
import Deku.Subgraph as Sg
import Deku.Toplevel ((\u{1F686}))
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event.Class (bang, biSampleOn, filterMap, keepLatest)
import Type.Proxy (Proxy(..))
import WAGS.Control (loopBuf)
import WAGS.Interpret (ctxAff, decodeAudioDataFromUri)
import WAGS.Math (calcSlope)
import WAGS.Parameter (bangOn)
import WAGS.Properties (loopEnd, loopStart, playbackRate)
import WAGS.Run (run2_)
import WAGS.Variant (injs_, prjs_)
import WAGS.WebAPI (BrowserAudioBuffer)
import Web.Event.Event (target)
import Web.HTML.HTMLInputElement (fromEventTarget, valueAsNumber)

type Slider = Variant (s0 :: Number, s1 :: Number, s2 :: Number)
sli = injs_ (Proxy :: _ Slider)
slp = prjs_ (Proxy :: _ Slider)
type StartStop = Variant (start :: Unit, stop :: Effect Unit)
ssi = injs_ (Proxy :: _ StartStop)
start = uii.startStop (ssi.start unit)
stop r = uii.startStop (ssi.stop r)
ssp = prjs_ (Proxy :: _ StartStop)
type UIEvents = Variant (startStop :: StartStop, slider :: Slider)
uii = injs_ (Proxy :: _ UIEvents)
uip = prjs_ (Proxy :: _ UIEvents)
type State' = Variant (loading :: Unit, loaded :: BrowserAudioBuffer)

derive instance Newtype State _
newtype State = State State'
sti = injs_ (Proxy :: _ State')
loading = State $ sti.loading unit
stp = prjs_ (Proxy :: _ State')

derive instance Eq State

instance Hashable State where
  hash (State v) = match { loading: \\_ -> 0, loaded: \\_ -> 1 } v

atari =
  "https://freesound.org/data/previews/100/100981_1234256-lq.mp3"

main :: Effect Unit
main = do
  { push } <- loading \u{1F686} go
  launchAff_ $ ctxAff
    \\ctx -> decodeAudioDataFromUri ctx atari >>= liftEffect
      <<< push
      <<< State
      <<< sti.loaded
  where
  go _ ev =
    ( keepLatest $
        ( \\i@(State i') -> match
            { loading: \\_ -> bang (i /\\ Sg.Insert)
            , loaded: \\_ -> bang (loading /\\ Sg.Remove)
                <|> bang (i /\\ Sg.Insert)
            }
            i'
        ) <$> ev
    ) @@ scene
    where
    scene = unwrap >>> match
      { loaded: \\buffer -> mkExists $ SubgraphF \\push event -> do
          let
            ss = bang (ssi.start unit) <|> filterMap uip.startStop event
            sl = filterMap uip.slider event
            sl0 = filterMap slp.s0 sl
            sl1 = filterMap slp.s1 sl
            sl2 = filterMap slp.s2 sl
            music = run2_
              [ loopBuf
                  { buffer: buffer
                  , playbackRate: 2.6
                  , loopStart: 0.6
                  , loopEnd: 1.1
                  }
                  $ oneOf
                      [ bangOn
                      , (calcSlope 0.0 0.2 100.0 5.0 >>> playbackRate) <$> sl0
                      , (calcSlope 0.0 0.0 100.0 1.2 >>> loopStart) <$> sl1
                      , (calcSlope 0.0 0.05 100.0 1.0 >>> loopEnd) <$> biSampleOn sl2
                          (add <$> (bang 0.0 <|> sl1))
                      ]
              ]
          D.div_
            $
              map
                ( \\{ l, f } -> D.div_
                    [ text_ l
                    , D.input
                        ( oneOfMap bang
                            [ D.Xtype := "range"
                            , D.Min := "0"
                            , D.Max := "100"
                            , D.Step := "1"
                            , D.Value := "50"
                            , D.OnInput := cb
                                ( traverse_
                                    ( valueAsNumber
                                        >=> push <<< uii.slider <<< f
                                    )
                                    <<< (=<<) fromEventTarget
                                    <<< target
                                )
                            ]
                        )
                        []
                    ]
                )
                [ { l: "Playback rate", f: sli.s0 }
                , { l: "Loop start", f: sli.s1 }
                , { l: "Loop end", f: sli.s2 }
                ] <>
                [ D.button
                    ( ss <#>
                        \\e -> D.OnClick := cb
                          ( const $ e # match
                              { stop: \\u -> u *>
                                  push start
                              , start: \\_ -> do
                                  r <- music
                                  push (stop r)
                              }
                          )
                    )
                    [ text $ ss <#> match
                        { stop: \\_ -> "Turn off"
                        , start: \\_ -> "Turn on"
                        }
                    ]
                ]
      , loading: \\_ -> mkExists
          $ SubgraphF \\_ _ -> D.div_ [ text_ "Loading..." ]
      }
`,we=y.prjs_()(y.prjsCons({reflectSymbol:function(){return"loading"}})(y.prjsCons({reflectSymbol:function(){return"start"}})(y.prjsCons({reflectSymbol:function(){return"stop"}})(y.prjsNilRow)()()()())()()()())()()()())(q.Proxy.value),ge=y.injs_()(y.injsCons({reflectSymbol:function(){return"loading"}})(y.injsCons({reflectSymbol:function(){return"start"}})(y.injsCons({reflectSymbol:function(){return"stop"}})(y.injsNilRow)()()()())()()()())()()()())(q.Proxy.value),ne=Ee.startStop(ge.start(g.unit)),se=function(_e){return Ee.startStop(ge.stop(_e))},Ae=y.prjs_()(y.prjsCons({reflectSymbol:function(){return"s0"}})(y.prjsCons({reflectSymbol:function(){return"s1"}})(y.prjsCons({reflectSymbol:function(){return"s2"}})(y.prjsNilRow)()()()())()()()())()()()())(q.Proxy.value),ee=y.injs_()(y.injsCons({reflectSymbol:function(){return"s0"}})(y.injsCons({reflectSymbol:function(){return"s1"}})(y.injsCons({reflectSymbol:function(){return"s2"}})(y.injsNilRow)()()()())()()()())()()()())(q.Proxy.value),xe=q.Proxy.value,fe=Ee.startStop(ge.loading(g.unit)),le="https://freesound.org/data/previews/100/100981_1234256-lq.mp3",he=function(_e){return function(Oe){return function(Ie){return $["makePursx'"]({reflectSymbol:function(){return`<section>
 <h2>Example 2: Three sliders</h2>

  <p>In this example, we'll use three sliders to control the playback rate, the start time, and the end time of a looping buffer.</p>

  <p>There is a fair bit of DOM-related code in this example, so before showing the whole thing, let's isolate the Wags bit.</p>

  <pre><code>@wagtxt@</code></pre>

  <p>Note that our loopBuf consumes four events: in addition to the three sliders, there is a <code>bangOn</code> event that turns it on. For the events belonging to range sliders, we use <code>calcSlope</code> to normalize the range to sensible values for these parameters.</p>

  <p>Because each slider event contains a number, we can compose it with a function from <code>WAGS.Properties</code>, like <code>playbackRate</code> or <code>loopStart</code>, to create an event that controls a Wags parameter. The <code>oneOf</code> directive indicates that the incoming event will be "one of" the events in the array. It's also possible to use the tie-fighter, aka <code>alt</code>, to separate each event, but I like the array syntax when possible as tie fighters do, after all, work for the Empire, and who likes the Empire?</p>

  <p>And below you'll find the full example. It also shows useful patterns like downloading audio files and filtering events.</p>

  <pre><code>@txt@</code></pre>

  @ex1@

</section>
`}})({reflectSymbol:function(){return"@"}})()()($.pursxToElementConsElt()($.pursxToElementConsElt()($.pursxToElementConsElt()($.pursxToElementNil(I.plusEvent))({reflectSymbol:function(){return"wagtxt"}}))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"ex1"}}))(I.eventIsEvent)(q.Proxy.value)(xe)({wagtxt:$.nut(W.text_(I.eventIsEvent)(`run2_
  $ loopBuf
      { buffer: buffer
      , playbackRate: 2.6
      , loopStart: 0.6
      , loopEnd: 1.1
      }
  $ oneOf
      [ bangOn
      , (calcSlope 0.0 0.2 100.0 5.0 >>> playbackRate) <$> sl0
      , (calcSlope 0.0 0.0 100.0 1.2 >>> loopStart) <$> sl1
      , (calcSlope 0.0 0.05 100.0 1.0 >>> loopEnd) <$> biSampleOn sl2
          (add <$> (bang 0.0 <|> sl1))
      ]`)),txt:$.nut(W.text_(I.eventIsEvent)(X)),ex1:$.nut(Z.subgraph(p.hashableUnit)(I.eventIsEvent)(A.bang(I.eventIsEvent)(new b.Tuple(g.unit,Z.Insert.value)))(function(Ge){return c.mkExists(function(Te){return function(Me){var je=t.alt(I.altEvent)(A.bang(I.eventIsEvent)(ge.start(g.unit)))(v.filterMap(I.filterableEvent)(De.startStop)(Me)),ke=v.filterMap(I.filterableEvent)(we.start)(je),me=v.filterMap(I.filterableEvent)(we.stop)(je),Ce=v.filterMap(I.filterableEvent)(De.slider)(Me),Fe=v.filterMap(I.filterableEvent)(Ae.s0)(Ce),We=v.filterMap(I.filterableEvent)(Ae.s1)(Ce),qe=v.filterMap(I.filterableEvent)(Ae.s2)(Ce),Ne=function(Le){return re.loopBuf(I.eventIsEvent)(j.initialLoopBufRecord(l.convertOptionsWithDefaultsRecord(l.convertOptionsRecord()(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsNil)(j.convertOptionLoopBufOptio4)()()()({reflectSymbol:function(){return"playbackRate"}}))(j.convertOptionLoopBufOptio2)()()()({reflectSymbol:function(){return"loopStart"}}))(j.convertOptionLoopBufOptio1)()()()({reflectSymbol:function(){return"loopEnd"}}))(j.convertOptionLoopBufOptio)()()()({reflectSymbol:function(){return"buffer"}})))(l.defaultsRecord()())))({buffer:Le,playbackRate:2.6,loopStart:.6,loopEnd:1.1})(s.oneOf(s.foldableArray)(I.plusEvent)([K.bangOn(I.eventIsEvent)(),h.map(I.functorEvent)(function(){var Re=te.playbackRate()(K.toAudioParameterNumber),Be=Q.calcSlope(0)(.2)(100)(5);return function(Ue){return Re(Be(Ue))}}())(Fe),h.map(I.functorEvent)(function(){var Re=te.loopStart(),Be=Q.calcSlope(0)(0)(100)(1.2);return function(Ue){return Re(Be(Ue))}}())(We),h.map(I.functorEvent)(function(){var Re=te.loopEnd(),Be=Q.calcSlope(0)(.05)(100)(1);return function(Ue){return Re(Be(Ue))}}())(A.biSampleOn(I.eventIsEvent)(qe)(h.map(I.functorEvent)(D.add(D.semiringNumber))(t.alt(I.altEvent)(A.bang(I.eventIsEvent)(0))(We))))]))};return L.div_(I.eventIsEvent)(x.append(x.semigroupArray)(h.map(h.functorArray)(function(Le){return L.div_(I.eventIsEvent)([W.text_(I.eventIsEvent)(Le.l),F.input(I.eventIsEvent)(s.oneOfMap(s.foldableArray)(I.plusEvent)(A.bang(I.eventIsEvent))([k.attr(R.attrInput_XtypeString)(R.Xtype.value)("range"),k.attr(_.attrInput_MinString)(_.Min.value)("0"),k.attr(G.attrInput_MaxString)(G.Max.value)("100"),k.attr(f.attrInput_StepString)(f.Step.value)("1"),k.attr(O.attrInput_ValueString)(O.Value.value)("50"),k.attr(a.attrOnInputCb)(a.OnInput.value)(k.cb(function(){var Re=s.traverse_(H.applicativeEffect)(s.foldableMaybe)(o.composeKleisli(H.bindEffect)(U.valueAsNumber)(function(Ue){return Te(Ee.slider(Le.f(Ue)))})),Be=o.bindFlipped(m.bindMaybe)(U.fromEventTarget);return function(Ue){return Re(Be(N.target(Ue)))}}()))]))([])])})([{l:"Playback rate",f:ee.s0},{l:"Loop start",f:ee.s1},{l:"Loop end",f:ee.s2}]))([B.button(I.eventIsEvent)(h.mapFlipped(I.functorEvent)(A.biSampleOn(I.eventIsEvent)(t.alt(I.altEvent)(A.bang(I.eventIsEvent)(r.pure(H.applicativeEffect)(g.unit)))(h.map(I.functorEvent)(function(Le){return Le.value0})(Ie)))(h.map(I.functorEvent)(b.Tuple.create)(je)))(function(Le){return k.attr(u.attrOnClickCb)(u.OnClick.value)(k.cb(d.const(E.match()()()({loading:function(Re){return r.pure(H.applicativeEffect)(g.unit)},stop:function(Re){return i.applySecond(H.applyEffect)(i.applySecond(H.applyEffect)(Re)(_e(r.pure(H.applicativeEffect)(g.unit))))(Te(ne))},start:function(Re){return function(){Le.value1(),Te(fe)();var Ue=V.launchAff(o.bind(V.bindAff)(T.ctxAff(function(Se){return T.decodeAudioDataFromUri(Se)(le)}))(function(Se){return J.liftEffect(V.monadEffectAff)(function(){var w=S.run2_([Ne(Se)])();return Te(se(w))(),w})}))();return _e(function(){return Te(ne)(),V.launchAff_(M.raceSelf(Ue))()})(),g.unit}}})(Le.value0))))}))([W.text(I.eventIsEvent)(s.oneOf(s.foldableArray)(I.plusEvent)([h.map(I.functorEvent)(d.const("Turn off"))(me),h.map(I.functorEvent)(d.const("Turn on"))(ke)]))])]))}})}))})}}};n.ex1=he})(C);(function(e){"use strict";e["WAGS.Example.Docs.Events.Ex2"]=e["WAGS.Example.Docs.Events.Ex2"]||{};var n=e["WAGS.Example.Docs.Events.Ex2"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Bind"],l=e.ConvertableOptions,c=e["Data.Boolean"],v=e["Data.Exists"],s=e["Data.Filterable"],d=e["Data.Foldable"],h=e["Data.Function"],p=e["Data.Functor"],m=e["Data.Hashable"],x=e["Data.Maybe"],D=e["Data.Semiring"],b=e["Data.Tuple"],g=e["Data.Unit"],E=e["Data.Variant"],k=e["Deku.Attribute"],W=e["Deku.Control"],G=e["Deku.DOM.Attr.Max"],_=e["Deku.DOM.Attr.Min"],u=e["Deku.DOM.Attr.OnClick"],a=e["Deku.DOM.Attr.OnInput"],f=e["Deku.DOM.Attr.Step"],O=e["Deku.DOM.Attr.Value"],R=e["Deku.DOM.Attr.Xtype"],B=e["Deku.DOM.Elt.Button"],L=e["Deku.DOM.Elt.Div"],F=e["Deku.DOM.Elt.Input"],$=e["Deku.Pursx"],Z=e["Deku.Subgraph"],H=e.Effect,V=e["Effect.Random"],J=e["FRP.Behavior"],I=e["FRP.Event"],A=e["FRP.Event.Class"],q=e["FRP.Event.Memoize"],j=e["Type.Proxy"],re=e["WAGS.Clock"],M=e["WAGS.Common"],T=e["WAGS.Control"],Q=e["WAGS.Core"],K=e["WAGS.Interpret"],te=e["WAGS.Math"],S=e["WAGS.Parameter"],y=e["WAGS.Properties"],N=e["WAGS.Run"],U=e["WAGS.Variant"],De=e["Web.Event.Event"],Ee=e["Web.HTML.HTMLInputElement"],X=U.prjs_()(U.prjsCons({reflectSymbol:function(){return"init"}})(U.prjsCons({reflectSymbol:function(){return"slider"}})(U.prjsCons({reflectSymbol:function(){return"startStop"}})(U.prjsNilRow)()()()())()()()())()()()())(j.Proxy.value),we=U.injs_()(U.injsCons({reflectSymbol:function(){return"init"}})(U.injsCons({reflectSymbol:function(){return"slider"}})(U.injsCons({reflectSymbol:function(){return"startStop"}})(U.injsNilRow)()()()())()()()())()()()())(j.Proxy.value),ge=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Foldable (oneOfMap, traverse_)
import Data.Tuple (Tuple(..), fst, snd)
import Data.Variant (Variant, match)
import Deku.Attribute (cb, (:=))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Toplevel ((\u{1F680}))
import Effect (Effect)
import Effect.Random as Random
import FRP.Behavior (behavior, sampleBy)
import FRP.Event (makeEvent, subscribe)
import FRP.Event.Class (bang, filterMap)
import FRP.Event.Memoize (memoize)
import Type.Proxy (Proxy(..))
import WAGS.Clock (interval)
import WAGS.Control (bandpass_, gain, gain_, highpass_, triangleOsc)
import WAGS.Core (Node, fan, input)
import WAGS.Interpret (close, context)
import WAGS.Math (calcSlope)
import WAGS.Parameter (AudioEnvelope(..), bangOn)
import WAGS.Properties (frequency)
import WAGS.Properties as P
import WAGS.Run (run2)
import WAGS.Variant (injs_, prjs_)
import Web.Event.Event (target)
import Web.HTML.HTMLInputElement (fromEventTarget, valueAsNumber)

type StartStop = Variant (start :: Unit, stop :: Effect Unit)
ssi = injs_ (Proxy :: _ StartStop)
start = uii.startStop (ssi.start unit)
stop r = uii.startStop (ssi.stop r)

type UIEvents = Variant
  ( init :: Unit
  , startStop :: StartStop
  , slider :: Number
  )

random = behavior \\e ->
  makeEvent \\k -> subscribe e \\f ->
    Random.random >>= k <<< f

uii = injs_ (Proxy :: _ UIEvents)
uip = prjs_ (Proxy :: _ UIEvents)

-- pentatonic scale
cp n
  | n < 0.142857 = 261.625565
  | n < 0.285714 = 293.664768
  | n < 0.428571 = 349.228231
  | n < 0.571429 = 391.995436
  | n < 0.714286 = 440.000000
  | n < 0.857143 = 523.251131
  | otherwise = 587.329536

main :: Effect Unit
main = uii.init unit \u{1F680} \\push event -> do
  let
    ss = bang (ssi.start unit) <|> filterMap uip.startStop event
    sl = filterMap uip.slider event
    music :: forall lock. _ -> Array (Node _ lock _ _)
    music evt = do
      let
        pitch = map fst evt
        -- to avoid artifacts in the pitch change
        time = map (add 0.01 <<< snd) evt
        e0 =
          AudioEnvelope <<<
            { p: [ 0.0, 0.6, 0.2, 0.1, 0.5, 0.03, 0.0 ]
            , d: 0.4
            , o: _
            } <$> time
        e1 =
          AudioEnvelope <<<
            { p: [ 0.0, 0.3, 0.1, 0.05, 0.01, 0.005, 0.0 ]
            , d: 0.4
            , o: _
            } <$> time
        e2 =
          AudioEnvelope <<<
            { p: [ 0.0, 0.15, 0.05, 0.01, 0.005, 0.0005, 0.0 ]
            , d: 0.4
            , o: _
            } <$> time
        f0 = bangOn <|> frequency <<< cp <$> pitch
      [ fan (triangleOsc 0.0 f0) \\ipt -> do
          gain_ 2.0
            [ gain 0.0 (P.gain <$> e0)
                [ bandpass_
                    { frequency: 1000.0
                    , q: 20.0
                    }
                    [ ipt ]
                ]
            , gain 0.0 (P.gain <$> e1)
                [ bandpass_
                    { frequency: 2000.0
                    , q: 20.0
                    }
                    [ ipt ]
                ]
            , gain 0.0 (P.gain <$> e2)
                [ highpass_
                    { frequency: 4000.0
                    , q: 20.0
                    }
                    [ ipt ]
                ]
            ]
      ]
  D.div_
    [ D.div_
        [ text_ "tempo"
        , D.input
            ( oneOfMap bang
                [ D.Xtype := "range"
                , D.Min := "0"
                , D.Max := "100"
                , D.Step := "1"
                , D.Value := "50"
                , D.OnInput := cb
                    ( traverse_
                        ( valueAsNumber
                            >=> push <<< uii.slider
                        )
                        <<< (=<<) fromEventTarget
                        <<< target
                    )
                ]
            )
            []
        ]
    , D.button
        ( ss <#>
            \\e -> D.OnClick := cb
              ( const $ e # match
                  { stop: \\u -> u *>
                      push start
                  , start: \\_ -> do
                      ctx <- context
                      myIvl <- memoize
                        $ interval ctx 0.91
                        $ map (calcSlope 0.0 0.42 100.0 1.4) sl
                      r <- run2 ctx (music (sampleBy Tuple random myIvl))
                      push (stop (r *> close ctx))
                  }
              )
        )
        [ text $
            match
              { stop: \\_ -> "Turn off"
              , start: \\_ -> "Turn on"
              } <$> ss
        ]
    ]`,ne=U.injs_()(U.injsCons({reflectSymbol:function(){return"start"}})(U.injsCons({reflectSymbol:function(){return"stop"}})(U.injsNilRow)()()()())()()()())(j.Proxy.value),se=we.startStop(ne.start(g.unit)),Ae=function(he){return we.startStop(ne.stop(he))},ee=J.behavior(function(he){return I.makeEvent(function(_e){return I.subscribe(he)(function(Oe){return function(){var Ge=V.random();return _e(Oe(Ge))()}})})}),xe=j.Proxy.value,fe=function(he){if(he<.142857)return 261.625565;if(he<.285714)return 293.664768;if(he<.428571)return 349.228231;if(he<.571429)return 391.995436;if(he<.714286)return 440;if(he<.857143)return 523.251131;if(c.otherwise)return 587.329536;throw new Error("Failed pattern match at WAGS.Example.Docs.Events.Ex2 (line 250, column 1 - line 257, column 27): "+[he.constructor.name])},le=function(he){return function(_e){return function(Oe){return $["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2>Example 3: Fascinating rhyhtm</h2>

  <p>Wags comes with several different ways to hook into the Web Audio API's sample-accurate timers. In this section, we'll use a Wags <code>interval</code> event to create a sample-accurate ticker. We'll also use a <code>random</code> beahvior to change up our samples.</p>

  <p><code>interval :: AudioContext -> Event Number -> Event Number</code> in wags is similar to <a href=""><code>interval :: Int -> Event Instant</code></a> from the <code>Event</code> library with a few important exceptions.</p>

  <ul>
    <li>The wags interval works in seconds (<code>Number</code>) instead of milliseconds.</li>
    <li>The wags interval needs an audio context to work.</li>
    <li>The wags interval gets its timing from an <code>Event Number</code> instead of a plain old <code>Number</code>. This is necessary to have variable rates.</li>
  </ul>

  <blockquote><code>interval</code> works fine for a stream of events where each event is separated by more than ~100 milliseconds. For anything faster, you'll likely want to use <code>requestAnimationLoop</code> coupled with a local state, as it will be more efficient for older and battery-sensitive devices.</blockquote>

  <p>In the following example, we use <code>interval</code> to control the playback rate of an analogue synth. We'll also use a custom behavior called <code>random</code> to control the pitch.</p>

  <p>One important optimization we make here is the use of the function <code>memoize</code>. Whenever we're dealing with audio-clock timing, we want to limit the number of subscriptions to receive events from the audio clock. Ideally, there is only one subscription that takes a reading of the clock as a single source of truth. Because we are in PureScript-land, events (like everything else), are referrentially transparent, meaning that new ones will get created every time you use them (just like a new <code>2</code> is created every time you type the value <code>2</code>: they don't all refer to one uber-<code>2</code>). To sync all the events to the <i>same</i> source, we use <code>memoize</code>. While this optimization is not necessary, I recommend it: it will make sure the timing is 100% accurate at a very small energy cost (meaning <code>memoize</code> will eat up slightly more power from a phone's battery, but still not much).</p>

  <pre><code>@txt@</code></pre>

  @ex2@

</section>
`}})({reflectSymbol:function(){return"@"}})()()($.pursxToElementConsElt()($.pursxToElementConsElt()($.pursxToElementNil(I.plusEvent))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"ex2"}}))(I.eventIsEvent)(j.Proxy.value)(xe)({txt:$.nut(W.text_(I.eventIsEvent)(ge)),ex2:$.nut(Z.subgraph(m.hashableUnit)(I.eventIsEvent)(A.bang(I.eventIsEvent)(new b.Tuple(g.unit,Z.Insert.value)))(function(Ie){return v.mkExists(function(Ge){return function(Te){var Me=t.alt(I.altEvent)(A.bang(I.eventIsEvent)(ne.start(g.unit)))(s.filterMap(I.filterableEvent)(X.startStop)(Te)),je=s.filterMap(I.filterableEvent)(X.slider)(Te),ke=function(me){var Ce=p.map(I.functorEvent)(function(){var Re=D.add(D.semiringNumber)(.01);return function(Be){return Re(b.snd(Be))}}())(me),Fe=p.map(I.functorEvent)(b.fst)(me),We=t.alt(I.altEvent)(S.bangOn(I.eventIsEvent)())(p.map(I.functorEvent)(function(){var Re=y.frequency()(S.toAudioParameterNumber);return function(Be){return Re(fe(Be))}}())(Fe)),qe=p.map(I.functorEvent)(function(Re){return S.AudioEnvelope(function(Be){return{p:[0,.15,.05,.01,.005,5e-4,0],d:.4,o:Be}}(Re))})(Ce),Ne=p.map(I.functorEvent)(function(Re){return S.AudioEnvelope(function(Be){return{p:[0,.3,.1,.05,.01,.005,0],d:.4,o:Be}}(Re))})(Ce),Le=p.map(I.functorEvent)(function(Re){return S.AudioEnvelope(function(Be){return{p:[0,.6,.2,.1,.5,.03,0],d:.4,o:Be}}(Re))})(Ce);return[Q.fan(I.eventIsEvent)(T.triangleOsc(I.eventIsEvent)(M.initialTriangleOscNumber)(0)(We))(function(Re){return T.gain_(I.eventIsEvent)(M.initialGainNumber)(2)([T.gain(I.eventIsEvent)(M.initialGainNumber)(0)(p.map(I.functorEvent)(y.gain()(S.toAudioParameterAudioEnve))(Le))([T.bandpass_(I.eventIsEvent)(M.initialBandpassRecord(l.convertOptionsWithDefaultsRecord(l.convertOptionsRecord()(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsNil)(M.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(M.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(l.defaultsRecord()())))({frequency:1e3,q:20})([Re])]),T.gain(I.eventIsEvent)(M.initialGainNumber)(0)(p.map(I.functorEvent)(y.gain()(S.toAudioParameterAudioEnve))(Ne))([T.bandpass_(I.eventIsEvent)(M.initialBandpassRecord(l.convertOptionsWithDefaultsRecord(l.convertOptionsRecord()(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsNil)(M.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(M.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(l.defaultsRecord()())))({frequency:2e3,q:20})([Re])]),T.gain(I.eventIsEvent)(M.initialGainNumber)(0)(p.map(I.functorEvent)(y.gain()(S.toAudioParameterAudioEnve))(qe))([T.highpass_(I.eventIsEvent)(M.initialHighpassRecord(l.convertOptionsWithDefaultsRecord(l.convertOptionsRecord()(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsNil)(M.convertOptionHighpassOpti)()()()({reflectSymbol:function(){return"q"}}))(M.convertOptionHighpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(l.defaultsRecord()())))({frequency:4e3,q:20})([Re])])])})]};return L.div_(I.eventIsEvent)([L.div_(I.eventIsEvent)([W.text_(I.eventIsEvent)("tempo"),F.input(I.eventIsEvent)(d.oneOfMap(d.foldableArray)(I.plusEvent)(A.bang(I.eventIsEvent))([k.attr(R.attrInput_XtypeString)(R.Xtype.value)("range"),k.attr(_.attrInput_MinString)(_.Min.value)("0"),k.attr(G.attrInput_MaxString)(G.Max.value)("100"),k.attr(f.attrInput_StepString)(f.Step.value)("1"),k.attr(O.attrInput_ValueString)(O.Value.value)("50"),k.attr(a.attrOnInputCb)(a.OnInput.value)(k.cb(function(){var me=d.traverse_(H.applicativeEffect)(d.foldableMaybe)(o.composeKleisli(H.bindEffect)(Ee.valueAsNumber)(function(Fe){return Ge(we.slider(Fe))})),Ce=o.bindFlipped(x.bindMaybe)(Ee.fromEventTarget);return function(Fe){return me(Ce(De.target(Fe)))}}()))]))([])]),B.button(I.eventIsEvent)(p.mapFlipped(I.functorEvent)(A.biSampleOn(I.eventIsEvent)(t.alt(I.altEvent)(A.bang(I.eventIsEvent)(r.pure(H.applicativeEffect)(g.unit)))(p.map(I.functorEvent)(function(me){return me.value0})(Oe)))(p.map(I.functorEvent)(b.Tuple.create)(Me)))(function(me){return k.attr(u.attrOnClickCb)(u.OnClick.value)(k.cb(h.const(E.match()()()({stop:function(Ce){return i.applySecond(H.applyEffect)(i.applySecond(H.applyEffect)(Ce)(Ge(se)))(he(r.pure(H.applicativeEffect)(g.unit)))},start:function(Ce){return function(){me.value1();var We=K.context(),qe=q.memoize(q.memoizableEvent)(re.interval(We)(.91)(p.map(I.functorEvent)(te.calcSlope(0)(.42)(100)(1.4))(je)))(),Ne=N.run2(We)(ke(J.sampleBy(I.eventIsEvent)(b.Tuple.create)(ee)(qe)))(),Le=i.applySecond(H.applyEffect)(Ne)(K.close(We));return he(i.applySecond(H.applyEffect)(Le)(Ge(se)))(),Ge(Ae(Le))()}}})(me.value0))))}))([W.text(I.eventIsEvent)(p.map(I.functorEvent)(E.match()()()({stop:function(me){return"Turn off"},start:function(me){return"Turn on"}}))(Me))])])}})}))})}}};n.ex2=le})(C);(function(e){"use strict";e["WAGS.Example.Docs.Events.Flavors"]=e["WAGS.Example.Docs.Events.Flavors"]||{};var n=e["WAGS.Example.Docs.Events.Flavors"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=i.Proxy.value,l=t["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2>Three flavors of events.</h2>

  <p>When we're in the browser, events tend to come in three broad categories:</p>

  <ul>
    <li>Things that need to happen <span style="font-weight: 800;">now</span>.</li>
    <li>Things that happen as the result of a user interaction.</li>
    <li>Things that are scheduled to happen in the future, for example with <code>setTimeout</code>.</li>
  </ul>

  <p>The next three examples cover all three cases.</p>

</section>`}})({reflectSymbol:function(){return"@"}})()()(t.pursxToElementNil(r.plusEvent))(r.eventIsEvent)(i.Proxy.value)(o)({});n.flavors=l})(C);(function(e){"use strict";e["WAGS.Example.Docs.Events.InWags"]=e["WAGS.Example.Docs.Events.InWags"]||{};var n=e["WAGS.Example.Docs.Events.InWags"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=i.Proxy.value,l=t["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2>Events in Wags</h2>
  <p>Wags follows a consistent pattern: every audio unit accepts an event containing a <code>newtype</code> around a <code>Variant</code> of parameters that can be changed. As a motivating example, let's look at the definition of <code>sinOsc</code>.</p>

  <pre><code>sinOsc
  :: forall i outputChannels event payload
   . IsEvent event
  => Common.InitialSinOsc i
  => i
  -> event C.SinOsc
  -> C.Node outputChannels "" C.G_ event payload</code></pre>

  <p>In that defintion, <code>SinOsc</code> is a <code>newtype</code> that is defined as such:</p>

  <pre><code>newtype SinOsc = SinOsc
  (Variant (frequency :: AudioParameter, onOff :: AudioOnOff))</code></pre>

  <p>Informally, the <code>sinOsc</code> function listens to an event that contains one of several possible instructions, including changing the frequency and turning the oscillator on or off. Let's see a few more examples:</p>

    <table>
    <tr>
      <th>Audio Unit</th>
      <th>Newtype name</th>
      <th>Variant</th>
    </tr>
    <tr>
      <td><code>delay</code></td>
      <td><code>Delay</code></td>
      <td><code>Variant (delayTime :: AudioParameter)</code></td>
    </tr>
    <tr>
      <td><code>highshelf</code></td>
      <td><code>Highshelf</code></td>
      <td><code>Variant (frequency :: AudioParameter, gain :: AudioParameter)</code></td>
    </tr>
    <tr>
      <td><code>playBuf</code></td>
      <td><code>PlayBuf</code></td>
      <td><code>Variant (playbackRate :: AudioParameter, buffer :: BrowserAudioBuffer, duration :: Maybe Number, bufferOffset :: Number, onOff :: AudioOnOff)</code></td>
    </tr>
  </table>

  <p>In practice, you'll never need to use newtypes presented above. The <code>WAGS.Properties</code> module has highly-overloaded smart constructors for all these values. For example, to use an <code>Event Number</code> to set the frequency of a <code>sinOsc</code>, you'd write <code>frequency &lt;$&gt; event</code> instead of <code>SinOsc &lt;&lt;&lt; inj (Proxy :: _ "frequency") &lt;&lt;&lt; AudioParameter &lt;&lt;&lt; { o: 0.0, t: _linearRamp, n: _ } &lt;$&gt; event</code>. Of course, you <i>can</i> write the longer format, but life is short and keystrokes are precious! Below is a table showing the varoius smart constructors available and the units to which they apply.</p>


    <table>
    <tr>
      <th>Constructor</th>
      <th>Type</th>
      <th>Receptive Audio Units</th>
    </tr>
    <tr>
      <td><code>bufferOffset</code></td>
      <td><code>Number</code></td>
      <td><ul><li><code>playBuf</code></li></ul></td>
    </tr>
    <tr>
      <td><code>delayTime</code></td>
      <td><code>AudioParameter</code></td>
      <td><ul><li><code>delay</code></li></ul></td>
    </tr>
    <tr>
      <td><code>duration</code></td>
      <td><code>Maybe Number</code></td>
      <td><ul><li><code>playBuf</code></li></ul></td>
    </tr>
    <tr>
      <td><code>frequency</code></td>
      <td><code>AudioParameter</code></td>
      <td>
        <ul>
          <li><code>allpass</code></li>
          <li><code>bandpass</code></li>
          <li><code>highpass</code></li>
          <li><code>highshelf</code></li>
          <li><code>lowpass</code></li>
          <li><code>lowshelf</code></li>
          <li><code>notch</code></li>
          <li><code>peaking</code></li>
          <li><code>periodicOsc</code></li>
          <li><code>sawtoothOsc</code></li>
          <li><code>sineOsc</code></li>
          <li><code>squareOsc</code></li>
          <li><code>triangleOsc</code></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><code>gain</code></td>
      <td><code>AudioParameter</code></td>
      <td>
        <ul>
          <li><code>gain</code></li>
          <li><code>highshelf</code></li>
          <li><code>lowshelf</code></li>
          <li><code>peaking</code></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><code>loopEnd</code></td>
      <td><code>Number</code></td>
      <td><ul><li><code>loopBuf</code></li></ul></td>
    </tr>
    <tr>
      <td><code>loopStart</code></td>
      <td><code>Number</code></td>
      <td><ul><li><code>loopBuf</code></li></ul></td>
    </tr>
    <tr>
      <td><code>offset</code></td>
      <td><code>AudioParameter</code></td>
      <td>
        <ul>
          <li><code>constant</code></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><code>onOff</code></td>
      <td><code>AudioOnOff</code></td>
      <td>
        <ul>
          <li><code>constant</code></li>
          <li><code>loopBuf</code></li>
          <li><code>periodicOsc</code></li>
          <li><code>playBuf</code></li>
          <li><code>sawtoothOsc</code></li>
          <li><code>sineOsc</code></li>
          <li><code>squareOsc</code></li>
          <li><code>triangleOsc</code></li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><code>playbackRate</code></td>
      <td><code>AudioParameter</code></td>
      <td><ul><li><code>loopBuf</code></li><li>playBuf</li></ul></td>
    </tr>
    <tr>
      <td><code>q</code></td>
      <td><code>AudioParameter</code></td>
      <td>
        <ul>
          <li><code>allpass</code></li>
          <li><code>bandpass</code></li>
          <li><code>highpass</code></li>
          <li><code>lowpass</code></li>
          <li><code>notch</code></li>
          <li><code>peaking</code></li>
        </ul>
      </td>
    </tr>
  </table>

  <p>You can use this smart-constructor pattern to transform any <code>Event</code> into something that Wags can consume. For example:</p>

  <ul>
    <li>If you have an <code>Event Number</code> called <code>myFreq</code> and you'd like it to control the frequency of a band-pass filter, you can write <code>bandpass 440.0 (frequency &lt;$&gt; myFreq)</code>.</li>
    <li>If you have an <code>Event Number</code> called <code>myQ</code> and you'd like it to control the Q value of the same bandpass, you can write <code>bandpass 440.0 (frequency &lt;$&gt; myFreq &lt;|&gt; q &lt;$&gt; myQ)</code> <i>or</i> <code>bandpass 440.0 $ oneOf [frequency &lt;$&gt; myFreq, q &lt;$&gt; myQ]</code>.</li>
    <li>If you'd like <code>myFreq</code> <i>only</i> to have an effect when it's over <code>1000.0</code>, you can write <code>bandpass 440.0 (frequency &lt;$&gt; filter (_ > 1000.0) myFreq &lt;|&gt; q &lt;$&gt; myQ)</code>.</li>
  </ul>

  <p>None of these transformations are unique to Wags:</p>
  <ul>
    <li>Because <code>Event</code> implements <a href=""><code>Functor</code></a>, you can use <code>map</code> (aka <code>&lt;$&gt;</code> above).</li>
    <li>Because <code>Event</code> implements <a href=""><code>Alt</code></a>, you can use <code>alt</code> (aka <code>&lt;|&gt;</code> above).</li>
    <li>Because <code>Event</code> implements <a href=""><code>Plus</code></a>, you can use <code>empty</code> for an event that emits nothing as well as <code>oneOf</code>.</li>
    <li>Because <code>Event</code> implements <a href=""><code>Filterable</code></a>, you can use <code>filter</code>, <code>filterMap</code>, <code>partition</code>, <code>partitionMap</code>, and <code>compact</code>.</li>
    <li>Because <code>Event</code> implements <a href=""><code>IsEvent</code></a>, you can use <code>bang</code> to emit something right away, <code>sampleOn</code> to sample one event's most recent value based on another event, and all of the other functions rolled into <a href=""><code>IsEvent</code></a>.</li>
  </ul>

  <p>
    This gets to one of the core design principles of Wags. Idiomatic Wags projects use functional reactive programming as a way to "steer" web audio, and Wags aims to be a minimal viable framework to shepherd events to their web-audio destinations.
  </p>
</section>`}})({reflectSymbol:function(){return"@"}})()()(t.pursxToElementNil(r.plusEvent))(r.eventIsEvent)(i.Proxy.value)(o)({});n.inWags=l})(C);(function(e){"use strict";e["WAGS.Example.Docs.Events.Primer"]=e["WAGS.Example.Docs.Events.Primer"]||{};var n=e["WAGS.Example.Docs.Events.Primer"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=i.Proxy.value,l=t["makePursx'"]({reflectSymbol:function(){return`<section>

  <h2>Events, a primer</h2>

  <p>The <code>Event</code> and <code>Behavior</code> types in PureScript are defined as such:</p>

  <pre><code>newtype Event a =
    Event ((a -> Effect Unit) -> Effect (Effect Unit))

newtype ABehavior event a =
  ABehavior (forall b. event (a -> b) -> event b)
type Behavior = ABehavior Event
</code></pre>

  <p>Let's unpack what the contract of both types are saying.</p>

  <h3>Event</h3>

  <p>An event takes a pusher of type <code>a -> Effect Unit</code> to which you can push values of type <code>a</code>. What are the values? Whatever you want! It could be a mouse click, a slider's input, an animation loop thunk, whatever. The event returns a nested <code>Effect</code> - the outer one is triggered on event subscription and the inner one is triggered on event unsubscription. In the case of a click listener, for example, the outer effect will likely call <code>addEventListener</code> and the inner will likely call <code>removeEventListener</code>.</p>

  <p>
    When using Wags, you have to get your events from somewhere. At a minimum, you'll consume a browser interaction like a click or swipe that turns on the audio. In fact, without some form of human interaction, most browsers will block the Web Audio API from turning on.
  </p>
  <p>
    <code>Events</code> are often produced within a web framework like <a href="https://github.com/mikesol/purescript-deku">Deku</a>, Halogen or React. They don't have to be, though - you can create and consume your own events.
  </p>

  <h3>Behavior</h3>

  <p>
    The <code>Behavior</code> type takes an event that needs to be "unlocked" (meaning in the form of <code>a -> b</code>, so an <code>a</code> is needed to unlock a <code>b</code>) and unlocks it with an <code>a</code>. Behaviors don't need to produce their <code>a</code> immediately. In fact, they don't need to produce it at all: it's entirely possible to create <code>Behavior (const empty)</code> that "mutes" the event. This resembles the physical world: when we want to observe a behavior, like the weather outside or the axial rotation of the Earth, there is a time-cost to observing anything that ranges from instantaneous to infinite.
  </p>

  <p>
    In Wags, we usually want to observe the behavior of things like a mouse's position, an audio buffer's content or a random number generator.
  </p>
</section>`}})({reflectSymbol:function(){return"@"}})()()(t.pursxToElementNil(r.plusEvent))(r.eventIsEvent)(i.Proxy.value)(o)({});n.primer=l})(C);(function(e){"use strict";e["WAGS.Example.Docs.Events"]=e["WAGS.Example.Docs.Events"]||{};var n=e["WAGS.Example.Docs.Events"],t=e["Control.Apply"],r=e["Deku.Pursx"],i=e.Effect,o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Example.Docs.Events.Ex0"],v=e["WAGS.Example.Docs.Events.Ex1"],s=e["WAGS.Example.Docs.Events.Ex2"],d=e["WAGS.Example.Docs.Events.Flavors"],h=e["WAGS.Example.Docs.Events.InWags"],p=e["WAGS.Example.Docs.Events.Primer"],m=e["WAGS.Example.Docs.Types"],x=e["WAGS.Example.Docs.Util"],D=l.Proxy.value,b=function(g){return function(E){return function(k){return function(W){var G=function(u){return x.mkNext(o.altEvent)(o.eventIsEvent)(W)(t.applySecond(i.applyEffect)(E(u))(x.scrollToTop))},_=x.ccassp(g)(k);return r["makePursx'"]({reflectSymbol:function(){return`<div>
  <h1>Events</h1>

  <h3>Clicks, wiggles and loops, oh my!</h3>
  <p>
    The true magic of web audio lies in its ability to harness the rich interactivity built into the browser. We can use mouse clicks, finger swipes and animation loops to create beautiful audio landscapes. But how can we tame the complexity of all these events in an expressive, declarative, functional manner? Enter <code>Event</code>, the abstraction that allows us to build rich reactive works using Wags.
  </p>

  @primer@
  @inWags@
  @flavors@
  @ex0@
  @ex1@
  @ex2@

  <h2>Next steps</h2>
  <p>In this section, saw how to build rich audio applications using the <code>Event</code> and <code>Behavior</code> types. We also covered the three most common patterns you'll see when working with events: events that need to happen <i>now</i>, events that come from user interaction, and timed events. In the next section, we'll look at how to make events <a @next@ style="cursor:pointer;">stateful</a>.</p>
</div>`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsAttr()(r.pursxToElementConsElt()(r.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"primer"}}))({reflectSymbol:function(){return"next"}}))({reflectSymbol:function(){return"inWags"}}))({reflectSymbol:function(){return"flavors"}}))({reflectSymbol:function(){return"ex2"}}))({reflectSymbol:function(){return"ex1"}}))({reflectSymbol:function(){return"ex0"}}))(o.eventIsEvent)(l.Proxy.value)(D)({next:G(m.State.value),primer:r.nut(p.primer),inWags:r.nut(h.inWags),flavors:r.nut(d.flavors),ex0:r.nut(c.ex0(_)(E)(W)),ex1:r.nut(v.ex1(_)(E)(W)),ex2:r.nut(s.ex2(_)(E)(W))})}}}};n.events=b})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan.AI0"]=e["WAGS.Example.Docs.FixFan.AI0"]||{};var n=e["WAGS.Example.Docs.FixFan.AI0"],t=e["Control.Apply"],r=e["Control.Parallel.Class"],i=e["Data.Functor"],o=e["Data.Semiring"],l=e["Deku.Pursx"],c=e["Effect.Aff"],v=e["FRP.Event"],s=e["FRP.Event.Class"],d=e["Type.Proxy"],h=e["WAGS.Common"],p=e["WAGS.Control"],m=e["WAGS.Example.Docs.Util"],x=e["WAGS.Interpret"],D=e["WAGS.Parameter"],b=e["WAGS.Properties"],g=e["WAGS.Run"],E=d.Proxy.value,k=function(W){return function(G){return function(_){return l["makePursx'"]({reflectSymbol:function(){return`<div>
  <pre><code>\\{ tink0, tink1, tink2, tink3 } -> run2_
  [ gain_ 1.0 do
      let ooo n = bang $ onOff $ dt (add n) apOn
      [ playBuf tink0 (ooo 0.1)
      , playBuf tink1 (ooo 0.2)
      , playBuf tink2 (ooo 0.9)
      , playBuf tink3 (ooo 1.8)
      ]
  ]</code></pre>

  @ai0@
  </div>
`}})({reflectSymbol:function(){return"@"}})()()(l.pursxToElementConsElt()(l.pursxToElementNil(v.plusEvent))({reflectSymbol:function(){return"ai0"}}))(v.eventIsEvent)(d.Proxy.value)(E)({ai0:l.nut(m.audioWrapper(_)(W)(x.ctxAff(function(u){return r.sequential(c.parallelAff)(t.apply(c.applyParAff)(t.apply(c.applyParAff)(t.apply(c.applyParAff)(i.map(c.functorParAff)(function(a){return function(f){return function(O){return function(R){return{tink0:a,tink1:f,tink2:O,tink3:R}}}}})(r.parallel(c.parallelAff)(x.decodeAudioDataFromUri(u)("https://freesound.org/data/previews/178/178660_717950-lq.mp3"))))(r.parallel(c.parallelAff)(x.decodeAudioDataFromUri(u)("https://freesound.org/data/previews/178/178660_717950-lq.mp3"))))(r.parallel(c.parallelAff)(x.decodeAudioDataFromUri(u)("https://freesound.org/data/previews/562/562008_7107243-lq.mp3"))))(r.parallel(c.parallelAff)(x.decodeAudioDataFromUri(u)("https://freesound.org/data/previews/126/126531_2044671-lq.mp3"))))}))(function(u){return g.run2_([p.gain_(v.eventIsEvent)(h.initialGainNumber)(1)(function(){var a=function(f){return s.bang(v.eventIsEvent)(b.onOff()(D.toAudioOnOffAudioOnOff)(D.dt()(o.add(o.semiringNumber)(f))(D.apOn)))};return[p.playBuf(v.eventIsEvent)(h.initialPlayBufBrowserAudi)(u.tink0)(a(.1)),p.playBuf(v.eventIsEvent)(h.initialPlayBufBrowserAudi)(u.tink1)(a(.2)),p.playBuf(v.eventIsEvent)(h.initialPlayBufBrowserAudi)(u.tink2)(a(.9)),p.playBuf(v.eventIsEvent)(h.initialPlayBufBrowserAudi)(u.tink3)(a(1.8))]}())])}))})}}};n.ai0=k})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan.AI1"]=e["WAGS.Example.Docs.FixFan.AI1"]||{};var n=e["WAGS.Example.Docs.FixFan.AI1"],t=e["Control.Apply"],r=e["Control.Parallel.Class"],i=e["Data.Array"],o=e["Data.EuclideanRing"],l=e["Data.Functor"],c=e["Data.Int"],v=e["Data.Semiring"],s=e["Deku.Pursx"],d=e["Effect.Aff"],h=e["FRP.Event"],p=e["FRP.Event.Class"],m=e.Math,x=e["Type.Proxy"],D=e["WAGS.Common"],b=e["WAGS.Control"],g=e["WAGS.Example.Docs.Util"],E=e["WAGS.Interpret"],k=e["WAGS.Parameter"],W=e["WAGS.Properties"],G=e["WAGS.Run"],_=x.Proxy.value,u=function(a){return function(f){return function(O){return s["makePursx'"]({reflectSymbol:function(){return`<div>
  <pre><code>\\{ tink0, tink1, tink2, tink3 } -> run2_
  [ gain_ 1.0
      $ do
          let
            ooo n = bang $ onOff $ dt (add n) apOn
            mtk i =
              case i \`mod\` 4 of
                0 -> tink0
                1 -> tink1
                2 -> tink2
                _ -> tink3
          0 .. 100 &lt;#&gt;
            \\i' -> do
              let i = toNumber i'
              playBuf (mtk i')
                (ooo (0.3 + 0.3 * (i * (1.005 \`pow\` i))))</code></pre>

  @ai0@
  </div>
`}})({reflectSymbol:function(){return"@"}})()()(s.pursxToElementConsElt()(s.pursxToElementNil(h.plusEvent))({reflectSymbol:function(){return"ai0"}}))(h.eventIsEvent)(x.Proxy.value)(_)({ai0:s.nut(g.audioWrapper(O)(a)(E.ctxAff(function(R){return r.sequential(d.parallelAff)(t.apply(d.applyParAff)(t.apply(d.applyParAff)(t.apply(d.applyParAff)(l.map(d.functorParAff)(function(B){return function(L){return function(F){return function($){return{tink0:B,tink1:L,tink2:F,tink3:$}}}}})(r.parallel(d.parallelAff)(E.decodeAudioDataFromUri(R)("https://freesound.org/data/previews/178/178660_717950-lq.mp3"))))(r.parallel(d.parallelAff)(E.decodeAudioDataFromUri(R)("https://freesound.org/data/previews/178/178660_717950-lq.mp3"))))(r.parallel(d.parallelAff)(E.decodeAudioDataFromUri(R)("https://freesound.org/data/previews/562/562008_7107243-lq.mp3"))))(r.parallel(d.parallelAff)(E.decodeAudioDataFromUri(R)("https://freesound.org/data/previews/126/126531_2044671-lq.mp3"))))}))(function(R){return G.run2_([b.gain_(h.eventIsEvent)(D.initialGainNumber)(1)(function(){var B=function(F){return p.bang(h.eventIsEvent)(W.onOff()(k.toAudioOnOffAudioOnOff)(k.dt()(v.add(v.semiringNumber)(F))(k.apOn)))},L=function(F){var $=o.mod(o.euclideanRingInt)(F)(4);return $===0?R.tink0:$===1?R.tink1:$===2?R.tink2:R.tink3};return l.mapFlipped(l.functorArray)(i.range(0)(100))(function(F){var $=c.toNumber(F);return b.playBuf(h.eventIsEvent)(D.initialPlayBufBrowserAudi)(L(F))(B(.3+.3*($*m.pow(1.005)($))))})}())])}))})}}};n.ai1=u})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan.Fan0"]=e["WAGS.Example.Docs.FixFan.Fan0"]||{};var n=e["WAGS.Example.Docs.FixFan.Fan0"],t=e.ConvertableOptions,r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["Type.Proxy"],l=e["WAGS.Common"],c=e["WAGS.Control"],v=e["WAGS.Core"],s=e["WAGS.Example.Docs.Util"],d=e["WAGS.Interpret"],h=e["WAGS.Parameter"],p=e["WAGS.Run"],m=o.Proxy.value,x=function(D){return function(b){return function(g){return r["makePursx'"]({reflectSymbol:function(){return`<div>
  <pre><code>run2_
  [ fan (loopBuf buf bangOn)
      \\b -> gain_ 0.8
        [ bandpass_ { frequency: 400.0, q: 1.0 } [ b ]
        , bandpass_ { frequency: 880.0, q: 5.0 } [ b ]
        , bandpass_ { frequency: 1200.0, q: 10.0 } [ b ]
        , bandpass_ { frequency: 2000.0, q: 20.0 } [ b ]
        , bandpass_ { frequency: 3000.0, q: 30.0 } [ b ]
        ]
  ]</code></pre>

  @ai0@
  </div>
`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"ai0"}}))(i.eventIsEvent)(o.Proxy.value)(m)({ai0:r.nut(s.audioWrapper(g)(D)(d.ctxAff(function(E){return d.decodeAudioDataFromUri(E)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(E){return p.run2_([v.fan(i.eventIsEvent)(c.loopBuf(i.eventIsEvent)(l.initialLoopBufBrowserAudi)(E)(h.bangOn(i.eventIsEvent)()))(function(k){return c.gain_(i.eventIsEvent)(l.initialGainNumber)(.8)([c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:400,q:1})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:880,q:5})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:1200,q:10})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:2e3,q:20})([k]),c.bandpass_(i.eventIsEvent)(l.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(l.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(l.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:3e3,q:30})([k])])})])}))})}}};n.fan0=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan.Fan1"]=e["WAGS.Example.Docs.FixFan.Fan1"]||{};var n=e["WAGS.Example.Docs.FixFan.Fan1"],t=e.ConvertableOptions,r=e["Data.Array"],i=e["Data.Functor"],o=e["Data.Int"],l=e["Data.Profunctor"],c=e["Deku.Pursx"],v=e["FRP.Event"],s=e["Type.Proxy"],d=e["WAGS.Common"],h=e["WAGS.Control"],p=e["WAGS.Core"],m=e["WAGS.Example.Docs.Util"],x=e["WAGS.Interpret"],D=e["WAGS.Parameter"],b=e["WAGS.Run"],g=s.Proxy.value,E=function(k){return function(W){return function(G){return c["makePursx'"]({reflectSymbol:function(){return`<div>
  <pre><code>\\buf -> run2_
  [ fan (loopBuf buf bangOn)
      \\b -> gain_ 0.8
        $ 0 .. 40 &lt;#&gt; lcmap toNumber
            \\i -> bandpass_
              { frequency: 200.0 + i * 150.0, q: 30.0 }
              [ b ]
  ]</code></pre>

  @ai0@
  </div>
`}})({reflectSymbol:function(){return"@"}})()()(c.pursxToElementConsElt()(c.pursxToElementNil(v.plusEvent))({reflectSymbol:function(){return"ai0"}}))(v.eventIsEvent)(s.Proxy.value)(g)({ai0:c.nut(m.audioWrapper(G)(k)(x.ctxAff(function(_){return x.decodeAudioDataFromUri(_)("https://freesound.org/data/previews/320/320873_527080-hq.mp3")}))(function(_){return b.run2_([p.fan(v.eventIsEvent)(h.loopBuf(v.eventIsEvent)(d.initialLoopBufBrowserAudi)(_)(D.bangOn(v.eventIsEvent)()))(function(u){return h.gain_(v.eventIsEvent)(d.initialGainNumber)(.8)(i.mapFlipped(i.functorArray)(r.range(0)(40))(l.lcmap(l.profunctorFn)(o.toNumber)(function(a){return h.bandpass_(v.eventIsEvent)(d.initialBandpassRecord(t.convertOptionsWithDefaultsRecord(t.convertOptionsRecord()(t.convertRecordOptionsCons(t.convertRecordOptionsCons(t.convertRecordOptionsNil)(d.convertOptionBandpassOpti)()()()({reflectSymbol:function(){return"q"}}))(d.convertOptionBandpassOpti1)()()()({reflectSymbol:function(){return"frequency"}})))(t.defaultsRecord()())))({frequency:200+a*150,q:30})([u])})))})])}))})}}};n.fan1=E})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan.Fix0"]=e["WAGS.Example.Docs.FixFan.Fix0"]||{};var n=e["WAGS.Example.Docs.FixFan.Fix0"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=e["WAGS.Common"],l=e["WAGS.Control"],c=e["WAGS.Core"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=i.Proxy.value,m=function(x){return function(D){return function(b){return t["makePursx'"]({reflectSymbol:function(){return`<div>
  <pre><code>\\buf -> run2_
  [ fix
      \\b -> gain_ 1.0
        [ playBuf buf bangOn
        , delay_ 0.1 [ gain_ 0.6 [ b ] ]
        ]
  ]</code></pre>

  @ai0@
  </div>
`}})({reflectSymbol:function(){return"@"}})()()(t.pursxToElementConsElt()(t.pursxToElementNil(r.plusEvent))({reflectSymbol:function(){return"ai0"}}))(r.eventIsEvent)(i.Proxy.value)(p)({ai0:t.nut(v.audioWrapper(b)(x)(s.ctxAff(function(g){return s.decodeAudioDataFromUri(g)("https://freesound.org/data/previews/178/178660_717950-lq.mp3")}))(function(g){return h.run2_([c.fix(r.eventIsEvent)(function(E){return l.gain_(r.eventIsEvent)(o.initialGainNumber)(1)([l.playBuf(r.eventIsEvent)(o.initialPlayBufBrowserAudi)(g)(d.bangOn(r.eventIsEvent)()),l.delay_(r.eventIsEvent)(o.initialDelayNumber)(.1)([l.gain_(r.eventIsEvent)(o.initialGainNumber)(.6)([E])])])})])}))})}}};n.fix0=m})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan.Fix1"]=e["WAGS.Example.Docs.FixFan.Fix1"]||{};var n=e["WAGS.Example.Docs.FixFan.Fix1"],t=e["Deku.Control"],r=e["Deku.Pursx"],i=e["FRP.Event"],o=e["FRP.Event.Class"],l=e["Type.Proxy"],c=e["WAGS.Common"],v=e["WAGS.Control"],s=e["WAGS.Core"],d=e["WAGS.Example.Docs.Util"],h=e["WAGS.Interpret"],p=e["WAGS.Parameter"],m=e["WAGS.Properties"],x=e["WAGS.Run"],D=l.Proxy.value,b=function(W){return function(G){return o.bang(W)(m.gain(G)(p.toAudioParameterAudioEnve)({p:[1,1,0],o:0,d:10}))}},g=function(W){return function(G){return o.bang(W)(m.gain(G)(p.toAudioParameterAudioEnve)({p:[1,1,0],o:0,d:8}))}},E=function(W){return function(G){return function(_){return function(u){return function(a){return function(f){return function(O){return function(R){return v.delay_(W)(G)(a)([v.gain_(W)(_)(f)([v.highpass_(W)(u)(O)(R)])])}}}}}}}},k=function(W){return function(G){return function(_){return r["makePursx'"]({reflectSymbol:function(){return`<div>
  <pre><code>@txt@</code></pre>

  @ai0@
  </div>
`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementNil(i.plusEvent))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"ai0"}}))(i.eventIsEvent)(l.Proxy.value)(D)({txt:r.nut(t.text_(i.eventIsEvent)(`dgh d g h i =
  delay_ d [gain_ g [highpass_ h i]]

fade0 = bang
  $ P.gain
  $ AudioEnvelope { p: [1.0, 1.0, 0.0], o: 0.0, d: 8.0 }

fade1 = bang
  $ P.gain
  $ AudioEnvelope { p: [1.0, 1.0, 0.0], o: 0.0, d: 10.0 }

scene buf = run2_
  [ fan (playBuf buf bangOn) \\b -> fix
      \\g0 -> gain_ 1.0
        [ b
        , dgh 0.15 0.7 1500.0
            [ fix
                \\g1 -> gain 1.0 fade1
                  [ dgh 0.4 0.5 2500.0
                      [ g0, g1 ]
                  ]
            ]
        , dgh 0.29 0.85 2000.0
            [ fix
                \\g1 -> gain_ 1.0
                  [ dgh 0.6 0.6 3500.0
                      [ g0
                      , ( fix
                            \\g2 -> gain 1.0 fade0
                              [ dgh 0.75 0.6 4000.0
                                  [ g1, g2 ]
                              , dgh 0.75 0.55 3000.0 [ b ]
                              ]
                        )
                      ]
                  ]
            ]
        ]
  ]`)),ai0:r.nut(d.audioWrapper(_)(W)(h.ctxAff(function(u){return h.decodeAudioDataFromUri(u)("https://freesound.org/data/previews/178/178660_717950-lq.mp3")}))(function(u){return x.run2_([s.fan(i.eventIsEvent)(v.playBuf(i.eventIsEvent)(c.initialPlayBufBrowserAudi)(u)(p.bangOn(i.eventIsEvent)()))(function(a){return s.fix(i.eventIsEvent)(function(f){return v.gain_(i.eventIsEvent)(c.initialGainNumber)(1)([a,E(i.eventIsEvent)(c.initialDelayNumber)(c.initialGainNumber)(c.initialHighpassInitialAud)(.15)(.7)(1500)([s.fix(i.eventIsEvent)(function(O){return v.gain(i.eventIsEvent)(c.initialGainNumber)(1)(b(i.eventIsEvent)())([E(i.eventIsEvent)(c.initialDelayNumber)(c.initialGainNumber)(c.initialHighpassInitialAud)(.4)(.5)(2500)([f,O])])})]),E(i.eventIsEvent)(c.initialDelayNumber)(c.initialGainNumber)(c.initialHighpassInitialAud)(.29)(.85)(2e3)([s.fix(i.eventIsEvent)(function(O){return v.gain_(i.eventIsEvent)(c.initialGainNumber)(1)([E(i.eventIsEvent)(c.initialDelayNumber)(c.initialGainNumber)(c.initialHighpassInitialAud)(.6)(.6)(3500)([f,s.fix(i.eventIsEvent)(function(R){return v.gain(i.eventIsEvent)(c.initialGainNumber)(1)(g(i.eventIsEvent)())([E(i.eventIsEvent)(c.initialDelayNumber)(c.initialGainNumber)(c.initialHighpassInitialAud)(.75)(.6)(4e3)([O,R]),E(i.eventIsEvent)(c.initialDelayNumber)(c.initialGainNumber)(c.initialHighpassInitialAud)(.75)(.55)(3e3)([a])])})])])})])])})})])}))})}}};n.fix1=k})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan.Intro"]=e["WAGS.Example.Docs.FixFan.Intro"]||{};var n=e["WAGS.Example.Docs.FixFan.Intro"],t=e["Control.Apply"],r=e["Deku.Pursx"],i=e.Effect,o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Example.Docs.Types"],v=e["WAGS.Example.Docs.Util"],s=l.Proxy.value,d=function(h){return function(p){return function(m){return function(x){var D=function(g){return v.mkNext(o.altEvent)(o.eventIsEvent)(x)(t.applySecond(i.applyEffect)(p(g))(v.scrollToTop))},b=v.ccassp(h)(m);return r["makePursx'"]({reflectSymbol:function(){return`<section>
  <p>
    In the <a @hwLink@ style="cursor:pointer;">hello world</a> section, we saw how to create and wire up two audio nodes: a <code>sinOsc</code>, or a sine-wave oscillator, is hooked up to a <code>gain</code> node. For some cases, feeding one audio node to another all the way up to a loudspeaker will be all you need. However, in most cases, you'll need to exploit three additional relationships:</p>
    <ul>
      <li><span style="font-weight:800px;">Many to one</span>, where many audio units pass through one.</li>
      <li><span style="font-weight:800px;">One to many</span>, where a single audio unit passes through many different ones.</li>
      <li><span style="font-weight:800px;">Feedback</span>, where an audio unit is an input to itself.</li>
    </ul>
    <p>This section will show how wags handles all three cases:</p>
    <ul>
      <li><span style="font-weight:800px;"><code>Array</code></span> is the data structure we'll use to send many audio units into one.</li>
      <li><span style="font-weight:800px;"><code>fan</code></span> is a function that we'll use to "fan" one audio node out to many.</li>
      <li><span style="font-weight:800px;"><code>fix</code></span> is the function we'll use to make an audio unit an input into itself.</li>
    </ul>
    <h2>The setup</h2>
    <p>
      To illustrate how <code>Array</code>, <code>fan</code> and <code>fix</code> work, we're going to use a few new audio units.
    </p>
      <ul>
        <li><code>delay</code>: A delay node</li>
        <li><code>bandpass</code>: A bandpass filter, meaning a filter that lets a single frequency band pass through.</li>
        <li><code>playBuf</code> and <code>loopBuf</code>: Playback or looping playback of a buffer. We'll use some MP3 files from freesound.org.</li>
      </ul>
  </section>`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsAttr()(r.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"hwLink"}}))(o.eventIsEvent)(l.Proxy.value)(s)({hwLink:D(c.HelloWorld.value)})}}}};n.ffIntro=d})(C);(function(e){"use strict";e["WAGS.Example.Docs.FixFan"]=e["WAGS.Example.Docs.FixFan"]||{};var n=e["WAGS.Example.Docs.FixFan"],t=e["Control.Apply"],r=e["Deku.Pursx"],i=e.Effect,o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Example.Docs.FixFan.AI0"],v=e["WAGS.Example.Docs.FixFan.AI1"],s=e["WAGS.Example.Docs.FixFan.Fan0"],d=e["WAGS.Example.Docs.FixFan.Fan1"],h=e["WAGS.Example.Docs.FixFan.Fix0"],p=e["WAGS.Example.Docs.FixFan.Fix1"],m=e["WAGS.Example.Docs.FixFan.Intro"],x=e["WAGS.Example.Docs.Types"],D=e["WAGS.Example.Docs.Util"],b=l.Proxy.value,g=function(E){return function(k){return function(W){return function(G){var _=function(a){return D.mkNext(o.altEvent)(o.eventIsEvent)(G)(t.applySecond(i.applyEffect)(k(a))(D.scrollToTop))},u=D.ccassp(E)(W);return r["makePursx'"]({reflectSymbol:function(){return`<div>
  <h1>Array, fan, and fix</h1>

  <h3>The anatomy of a Wags graph</h3>

  @intro@

  <h2>Arrays</h2>

  <p>To send several audio units through one, we use an <code>Array</code>.</p>

  @code0@

  <p>PureScript <code>Array</code>-s are extremely flexible and efficient, so go to town! For example, you can <code>map</code> (aka <code>&lt;#&gt;</code> when flipped) over a range of integers to create audio units, like in the example below.</p>

  @code1@

  <h2>Fan</h2>

  <p><span style="font-weight:800;">Fan</span> takes an audio signal and fans it out to multiple processing chains. For example, if you have a looping buffer and you'd like to filter it through a bank of different filters, you can do this via fan. Fan takes two arguments:</p>

  <ul>
    <li>The node to fan out.</li>
    <li>A function that accepts a reference to this node and returns a new node that may or may not contain the input.</li>
  </ul>

  <p>Let's see an example below that fans one <code>playBuf</code> to five bandpass filters.</p>

  @code2@

  <p>Just for kicks, let's jack it up to forty bandpass filters.</p>

  @code3@

  <h2>Fix</h2>

  <p><span style="font-weight:800;">Fix</span> is a fixed point operator. It accepts itself as an argument and returns... itself \u{1F92F}. You can use <code>fix</code> to create feedback loops!</p>

  @code4@

  <blockquote>If you don't have some sort of delay line in your processing chain, either via the Web-Audio-provided delay line or a custom delay node, Web Audio will raise a runtime error. Wags doesn't check for this, so make sure you test your audio to guarantee that it's feedback-explosion-free!</blockquote>

  <p>Nothing stops you from nesting <code>fix</code>-s to create a mega-feedback loop!</p>

  <blockquote>In the example below, I've added a couple fades to make sure the experience isn't too unpleasant. We'll talk more about fades in the events section \u{1F3B8}</blockquote>

  @code5@

  <h2>Next steps</h2>
  <p>In this section, saw how to combine together audio nodes with arrays, fan one audio node to many processing chains via <code>fan</code>, and how to create a fixed point, aka feedback, for a node via <code>fix</code>. In the next section, we'll ramp up on all of the yummy <a @next@ style="cursor:pointer;">audio nodes you can use</a>.</p>
</div>`}})({reflectSymbol:function(){return"@"}})()()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsElt()(r.pursxToElementConsAttr()(r.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"next"}}))({reflectSymbol:function(){return"intro"}}))({reflectSymbol:function(){return"code5"}}))({reflectSymbol:function(){return"code4"}}))({reflectSymbol:function(){return"code3"}}))({reflectSymbol:function(){return"code2"}}))({reflectSymbol:function(){return"code1"}}))({reflectSymbol:function(){return"code0"}}))(o.eventIsEvent)(l.Proxy.value)(b)({intro:r.nut(m.ffIntro(E)(k)(W)(G)),next:_(x.AudioUnits.value),code0:r.nut(c.ai0(u)(k)(G)),code1:r.nut(v.ai1(u)(k)(G)),code2:r.nut(s.fan0(u)(k)(G)),code3:r.nut(d.fan1(u)(k)(G)),code4:r.nut(h.fix0(u)(k)(G)),code5:r.nut(p.fix1(u)(k)(G))})}}}};n.fixFan=g})(C);(function(e){"use strict";e["WAGS.Example.Docs.HelloWorld"]=e["WAGS.Example.Docs.HelloWorld"]||{};var n=e["WAGS.Example.Docs.HelloWorld"],t=e["Control.Applicative"],r=e["Control.Apply"],i=e["Data.Unit"],o=e["Deku.Control"],l=e["Deku.DOM.Elt.Code"],c=e["Deku.DOM.Elt.Pre"],v=e["Deku.Pursx"],s=e.Effect,d=e["Effect.Aff"],h=e["FRP.Event"],p=e["Type.Proxy"],m=e["WAGS.Common"],x=e["WAGS.Control"],D=e["WAGS.Example.Docs.Types"],b=e["WAGS.Example.Docs.Util"],g=e["WAGS.Parameter"],E=e["WAGS.Run"],k=p.Proxy.value,W=function(G){return function(_){return function(u){return function(a){var f=r.applySecond(s.applyEffect)(_(D.FixFan.value))(b.scrollToTop),O=b.ccassp(G)(u);return v["makePursx'"]({reflectSymbol:function(){return`<div>
  <h1>Hello world</h1>

  <h3>Wagging at 440Hz</h3>

  <p>Here's a "hello world" in Wags. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  @code@
  @result@

  <h2>The <code>run</code> functions</h2>

  <p>The <code>run</code> family of functions run our audio and produces an unsubscribe function that we use to stop the audio. In this case, <code>run2_</code> does three extra things:
  <ul>
    <li>Wires up our session for two-channel audio. If the sources are mono, it will automatically scale them up to stereo.</li>
    <li>Automatically handles creation and destruction of audio contexts.</li>
    <li>Takes care of the subscription to the rendering engine.</li>
  </ul></p>

  <p>The <code>push</code> function comes from the <a href="https://github.com/mikesol/purescript-deku"><code>purescript-deku</code></a> framework and is used to register an unsubscribe effect. When we trigger the effect it in the <code>Just</code> branch of our pattern match, the audio turns off.</p>

  <h2>Audio units</h2>

  <p>The sound you hear when you play the example above is created with the statement <code>gain_ 0.15 [ sinOsc 440.0 bangOn ]</code>. The first function, <code>gain_</code>, creates a gain node with a volume of <code>0.15</code>. In WebAudio, gain ranges from <code>0.0</code> to <code>1.0</code> and can be converted to decibels using the following equation:</p>

  <pre><code>decibels = 20 * log10( gain );</code></pre>

  <p>In our case, a gain of <code>0.15</code> is roughly <code>-16.5 dB</code>.</p>

  <p>Our sine wave oscillator is set to a frequency of <code>440Hz</code>. That means that your loudspeaker or headphones will vibrate back and forth in sinusoidal motion 440 times per second, which most folks perceive as the <a href="https://en.wikipedia.org/wiki/A440_(pitch_standard)">note A</a>. And we turn on the oscillator with <code>bangOn</code>, as the default is off for <i>all</i> sound generators in Wags. This is a design decision to help preserve the hearing of those that work frequently with audio.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's explore the anatomy of a Wags graph. Irrespective of the nodes comprising the graph, there are three basic concepts you need to be familiar with before you start diving into audio units: <a @next@ style="cursor:pointer;">array, fan, and fix</a>.</p>
</div>`}})({reflectSymbol:function(){return"@"}})()()(v.pursxToElementConsElt()(v.pursxToElementConsAttr()(v.pursxToElementConsElt()(v.pursxToElementNil(h.plusEvent))({reflectSymbol:function(){return"result"}}))({reflectSymbol:function(){return"next"}}))({reflectSymbol:function(){return"code"}}))(h.eventIsEvent)(p.Proxy.value)(k)({code:v.nut(c.pre_(h.eventIsEvent)([l.code_(h.eventIsEvent)([o.text_(h.eventIsEvent)(`case e of
  Just x -> x *> push Nothing
  _ -> (run2_ [ gain_ 0.15 [ sinOsc 440.0 bangOn ] ]
         >>= Just >>> push`)])])),result:v.nut(b.audioWrapper(a)(O)(t.pure(d.applicativeAff)(i.unit))(function(R){return E.run2_([x.gain_(h.eventIsEvent)(m.initialGainNumber)(.15)([x.sinOsc(h.eventIsEvent)(m.initialSinOscNumber)(440)(g.bangOn(h.eventIsEvent)())])])})),next:b.mkNext(h.altEvent)(h.eventIsEvent)(a)(f)})}}}};n.helloWorld=W})(C);(function(e){"use strict";e["WAGS.Example.Docs.Intro.IntroEx"]=e["WAGS.Example.Docs.Intro.IntroEx"]||{};var n=e["WAGS.Example.Docs.Intro.IntroEx"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Bind"],l=e["Control.Parallel"],c=e["Control.Plus"],v=e.ConvertableOptions,s=e["Data.Array"],d=e["Data.Array.NonEmpty"],h=e["Data.ArrayBuffer.Typed"],p=e["Data.Exists"],m=e["Data.Filterable"],x=e["Data.Foldable"],D=e["Data.Function"],b=e["Data.Functor"],g=e["Data.Hashable"],E=e["Data.Homogeneous.Record"],k=e["Data.Int"],W=e["Data.Maybe"],G=e["Data.Show"],_=e["Data.Traversable"],u=e["Data.Tuple"],a=e["Data.UInt"],f=e["Data.Unit"],O=e["Data.Variant"],R=e["Deku.Attribute"],B=e["Deku.Control"],L=e["Deku.DOM"],F=e["Deku.DOM.Attr.Height"],$=e["Deku.DOM.Attr.Max"],Z=e["Deku.DOM.Attr.Min"],H=e["Deku.DOM.Attr.OnClick"],V=e["Deku.DOM.Attr.OnInput"],J=e["Deku.DOM.Attr.Step"],I=e["Deku.DOM.Attr.Style"],A=e["Deku.DOM.Attr.Value"],q=e["Deku.DOM.Attr.Width"],j=e["Deku.DOM.Attr.Xtype"],re=e["Deku.DOM.Elt.Button"],M=e["Deku.DOM.Elt.Canvas"],T=e["Deku.DOM.Elt.Div"],Q=e["Deku.DOM.Elt.Input"],K=e["Deku.Pursx"],te=e["Deku.Subgraph"],S=e.Effect,y=e["Effect.Aff"],N=e["Effect.Class"],U=e["Effect.Random"],De=e["Effect.Ref"],Ee=e["FRP.Behavior"],X=e["FRP.Event"],we=e["FRP.Event.Animate"],ge=e["FRP.Event.Class"],ne=e["Foreign.Object"],se=e["Graphics.Canvas"],Ae=e.Math,ee=e["Random.LCG"],xe=e["Test.QuickCheck.Gen"],fe=e["Type.Proxy"],le=e["WAGS.Common"],he=e["WAGS.Control"],_e=e["WAGS.Core"],Oe=e["WAGS.Example.Docs.Util"],Ie=e["WAGS.Interpret"],Ge=e["WAGS.Math"],Te=e["WAGS.Parameter"],Me=e["WAGS.Properties"],je=e["WAGS.Run"],ke=e["WAGS.Variant"],me=e["Web.Event.Event"],Ce=e["Web.HTML.HTMLInputElement"],Fe=ke.prjs_()(ke.prjsCons({reflectSymbol:function(){return"canvas"}})(ke.prjsCons({reflectSymbol:function(){return"slider"}})(ke.prjsCons({reflectSymbol:function(){return"startStop"}})(ke.prjsNilRow)()()()())()()()())()()()())(fe.Proxy.value),We=ke.injs_()(ke.injsCons({reflectSymbol:function(){return"canvas"}})(ke.injsCons({reflectSymbol:function(){return"slider"}})(ke.injsCons({reflectSymbol:function(){return"startStop"}})(ke.injsNilRow)()()()())()()()())()()()())(fe.Proxy.value),qe=2*Ae.pi,Ne=ke.prjs_()(ke.prjsCons({reflectSymbol:function(){return"loading"}})(ke.prjsCons({reflectSymbol:function(){return"start"}})(ke.prjsCons({reflectSymbol:function(){return"stop"}})(ke.prjsNilRow)()()()())()()()())()()()())(fe.Proxy.value),Le=ke.injs_()(ke.injsCons({reflectSymbol:function(){return"loading"}})(ke.injsCons({reflectSymbol:function(){return"start"}})(ke.injsCons({reflectSymbol:function(){return"stop"}})(ke.injsNilRow)()()()())()()()())()()()())(fe.Proxy.value),Re=We.startStop(Le.start(f.unit)),Be=function(ze){return We.startStop(Le.stop(ze))},Ue=Ee.behavior(function(ze){return X.makeEvent(function(Qe){return X.subscribe(ze)(function(He){return function(){var Ye=U.random();return Qe(He(Ye))()}})})}),Se=fe.Proxy.value,Je=We.startStop(Le.loading(f.unit)),w=function(ze){return function(Qe){return function(He){return function(Pe){return ge.bang(ze)(Me.frequency(Qe)(Te.toAudioParameterAudioEnve)({p:[He,Pe],o:0,d:16}))}}}},oe=function(ze){return function(Qe){return ge.bang(ze)(Me.gain(Qe)(Te.toAudioParameterAudioEnve)({p:[1,1,.75,.5,.75,.5,.75,.5,.25,.5,.25,0],o:0,d:18}))}},ue=function(ze){return function(Qe){return ge.bang(ze)(Me.gain(Qe)(Te.toAudioParameterAudioEnve)({p:[1,1,.75,.5,.75,.5,.75,.5,.25,.5,.25,0],o:0,d:24}))}},pe=function(ze){return function(Qe){return function(He){return function(Pe){return function(Ye){return function(Ke){return function(ot){return function(ct){return function(lt){return function(rt){return function(st){return he.delay(ze)(Qe)(Ye)(Ke)([he.gain(ze)(He)(ot)(ct)([he.highpass(ze)(Pe)(lt)(rt)(st)])])}}}}}}}}}}},be=function(ze){return function(Qe){return function(He){return function(Pe){return function(Ye){return function(Ke){return function(ot){return function(ct){return function(lt){return function(rt){return function(st){return he.delay(ze)(Qe)(Ye)(Ke)([he.gain(ze)(He)(ot)(ct)([he.bandpass(ze)(Pe)(lt)(rt)(st)])])}}}}}}}}}}},ce=function(ze){return function(Qe){return function(He){return function(Pe){return ge.bang(ze)(Me.delayTime(Qe)(Te.toAudioParameterAudioEnve)({p:[He,Pe],o:0,d:16}))}}}},ye=400,ae=k.toNumber(ye),Y=G.show(G.showInt)(ye)+"px",ie=600,P=k.toNumber(ie),de=G.show(G.showInt)(ie)+"px",at={pluck0:"https://freesound.org/data/previews/493/493016_10350281-lq.mp3",pluck1:"https://freesound.org/data/previews/141/141524_2558140-lq.mp3",strum0:"https://freesound.org/data/previews/234/234738_3635427-lq.mp3"},ut=function(ze){return function(Qe){return function(He){return K["makePursx'"]({reflectSymbol:function(){return"<section>@ex1@</section>"}})({reflectSymbol:function(){return"@"}})()()(K.pursxToElementConsElt()(K.pursxToElementNil(X.plusEvent))({reflectSymbol:function(){return"ex1"}}))(X.eventIsEvent)(fe.Proxy.value)(Se)({ex1:K.nut(te.subgraph(g.hashableUnit)(X.eventIsEvent)(ge.bang(X.eventIsEvent)(new u.Tuple(f.unit,te.Insert.value)))(function(Pe){return p.mkExists(function(Ye){return function(Ke){var ot=t.alt(X.altEvent)(ge.bang(X.eventIsEvent)(Le.start(f.unit)))(m.filterMap(X.filterableEvent)(Fe.startStop)(Ke)),ct=m.filterMap(X.filterableEvent)(Ne.start)(ot),lt=m.filterMap(X.filterableEvent)(Ne.stop)(ot),rt=m.filterMap(X.filterableEvent)(Fe.slider)(Ke),st=function(Ze){return function(Xe){return[he.analyser_(X.eventIsEvent)(he.initialAnalyserRecord(v.convertOptionsWithDefaultsRecord(v.convertOptionsRecord()(v.convertRecordOptionsCons(v.convertRecordOptionsCons(v.convertRecordOptionsNil)(he.convertOptionAnalyserOpti1)()()()({reflectSymbol:function(){return"fftSize"}}))(he.convertOptionAnalyserOpti)()()()({reflectSymbol:function(){return"cb"}})))(v.defaultsRecord()())))({cb:function($e){return function(){return De.write(new W.Just($e))(Xe)(),De.write(W.Nothing.value)(Xe)}},fftSize:_e.TTT7.value})(_e.fan(X.eventIsEvent)(he.playBuf(X.eventIsEvent)(le.initialPlayBufBrowserAudi)(Ze)(t.alt(X.altEvent)(Te.bangOn(X.eventIsEvent)())(b.map(X.functorEvent)(function(){var $e=Me.playbackRate()(Te.toAudioParameterNumber),et=Ge.calcSlope(0)(.96)(100)(1.04);return function(tt){return $e(et(tt))}}())(rt))))(function($e){return _e.fix(X.eventIsEvent)(function(et){return he.gain_(X.eventIsEvent)(le.initialGainNumber)(1)([$e,pe(X.eventIsEvent)(le.initialDelayNumber)(le.initialGainNumber)(le.initialHighpassInitialAud)(.15)(c.empty(X.plusEvent))(.7)(c.empty(X.plusEvent))(1500)(w(X.eventIsEvent)()(1500)(3e3))([_e.fix(X.eventIsEvent)(function(tt){return he.gain(X.eventIsEvent)(le.initialGainNumber)(1)(oe(X.eventIsEvent)())([pe(X.eventIsEvent)(le.initialDelayNumber)(le.initialGainNumber)(le.initialHighpassInitialAud)(.4)(c.empty(X.plusEvent))(.5)(c.empty(X.plusEvent))(3e3)(w(X.eventIsEvent)()(3e3)(100))([et,tt])])})]),pe(X.eventIsEvent)(le.initialDelayNumber)(le.initialGainNumber)(le.initialHighpassInitialAud)(.29)(b.map(X.functorEvent)(function(){var tt=Me.delayTime()(Te.toAudioParameterNumber),it=Ge.calcSlope(0)(.1)(100)(.4);return function(nt){return tt(it(nt))}}())(rt))(.85)(c.empty(X.plusEvent))(2e3)(w(X.eventIsEvent)()(2e3)(5e3))([_e.fix(X.eventIsEvent)(function(tt){return he.gain_(X.eventIsEvent)(le.initialGainNumber)(1)([pe(X.eventIsEvent)(le.initialDelayNumber)(le.initialGainNumber)(le.initialHighpassInitialAud)(.6)(b.map(X.functorEvent)(function(){var it=Me.delayTime()(Te.toAudioParameterNumber),nt=Ge.calcSlope(0)(.8)(100)(.3);return function(ft){return it(nt(ft))}}())(rt))(.6)(c.empty(X.plusEvent))(3500)(w(X.eventIsEvent)()(3500)(100))([et,_e.fix(X.eventIsEvent)(function(it){return he.gain(X.eventIsEvent)(le.initialGainNumber)(1)(ue(X.eventIsEvent)())([be(X.eventIsEvent)(le.initialDelayNumber)(le.initialGainNumber)(le.initialBandpassInitialAud)(.75)(b.map(X.functorEvent)(function(){var nt=Me.delayTime()(Te.toAudioParameterNumber),ft=Ge.calcSlope(0)(.9)(100)(.1);return function(vt){return nt(ft(vt))}}())(rt))(.6)(c.empty(X.plusEvent))(4e3)(w(X.eventIsEvent)()(4e3)(200))([tt,it]),be(X.eventIsEvent)(le.initialDelayNumber)(le.initialGainNumber)(le.initialBandpassInitialAud)(.75)(ce(X.eventIsEvent)()(.75)(.2))(.55)(c.empty(X.plusEvent))(200)(w(X.eventIsEvent)()(200)(4e3))([$e])])})])])})])])})}))]}},mt=m.filterMap(X.filterableEvent)(Ne.loading)(ot);return T.div_(X.eventIsEvent)([M.canvas(X.eventIsEvent)(t.alt(X.altEvent)(x.oneOfMap(x.foldableArray)(X.plusEvent)(ge.bang(X.eventIsEvent))([R.attr(q.attrCanvas_WidthString)(q.Width.value)(de),R.attr(F.attrCanvas_HeightString)(F.Height.value)(Y),R.attr(I.attrCanvas_StyleString)(I.Style.value)("width: 100%;"),R.attr(L.attrCanvas_Draw2DContext2)(L.Draw2D.value)(function(Ze){return function(){return se.setFillStyle(Ze)("black")(),se.fillRect(Ze)({width:P,height:ae,x:0,y:0})(),f.unit}})]))(b.map(X.functorEvent)(function(Ze){return R.attr(L.attrCanvas_Draw2DContext2)(L.Draw2D.value)(function(Xe){return function(){return se.setFillStyle(Xe)("black")(),se.fillRect(Xe)({width:P,height:ae,x:0,y:0})(),se.setFillStyle(Xe)("rgba(255,255,255,0.2)")(),S.foreachE(Ze)(function(et){return function(){return se.beginPath(Xe)(),se.arc(Xe)({end:qe,radius:et.value1*40,start:0,x:et.value0.x*P,y:et.value0.y*ae})(),se.fill(Xe)()}})()}})})(m.filterMap(X.filterableEvent)(Fe.canvas)(Ke))))([]),Q.input(X.eventIsEvent)(x.oneOfMap(x.foldableArray)(X.plusEvent)(ge.bang(X.eventIsEvent))([R.attr(j.attrInput_XtypeString)(j.Xtype.value)("range"),R.attr(Z.attrInput_MinString)(Z.Min.value)("0"),R.attr($.attrInput_MaxString)($.Max.value)("100"),R.attr(J.attrInput_StepString)(J.Step.value)("1"),R.attr(A.attrInput_ValueString)(A.Value.value)("50"),R.attr(I.attrInput_StyleString)(I.Style.value)("width: 100%;"),R.attr(V.attrOnInputCb)(V.OnInput.value)(R.cb(function(){var Ze=x.traverse_(S.applicativeEffect)(x.foldableMaybe)(o.composeKleisli(S.bindEffect)(Ce.valueAsNumber)(function($e){return Ye(We.slider($e))})),Xe=o.bindFlipped(W.bindMaybe)(Ce.fromEventTarget);return function($e){return Ze(Xe(me.target($e)))}}()))]))([]),re.button(X.eventIsEvent)(x.oneOf(x.foldableArray)(X.plusEvent)([ge.bang(X.eventIsEvent)(R.attr(I.attrButton_StyleString)(I.Style.value)("width:100%; padding:1.0rem;")),b.mapFlipped(X.functorEvent)(ge.biSampleOn(X.eventIsEvent)(t.alt(X.altEvent)(ge.bang(X.eventIsEvent)(r.pure(S.applicativeEffect)(f.unit)))(b.map(X.functorEvent)(function(Ze){return Ze.value0})(He)))(b.map(X.functorEvent)(u.Tuple.create)(ot)))(function(Ze){return R.attr(H.attrOnClickCb)(H.OnClick.value)(R.cb(D.const(O.match()()()({loading:function(Xe){return r.pure(S.applicativeEffect)(f.unit)},stop:function(Xe){return i.applySecond(S.applyEffect)(i.applySecond(S.applyEffect)(Xe)(ze(r.pure(S.applicativeEffect)(f.unit))))(Ye(Re))},start:function(Xe){return function(){Ze.value1(),Ye(Je)();var et=we.animationFrameEvent(),tt=De.new(W.Nothing.value)(),it=y.launchAff(o.bind(y.bindAff)(b.map(y.functorAff)(E.fromHomogeneous())(Ie.ctxAff(function(nt){return l.parTraverse(y.parallelAff)(E.traversableHomogeneous)(Ie.decodeAudioDataFromUri(nt))(E.homogeneous()(at))})))(function(nt){return o.bind(y.bindAff)(N.liftEffect(y.monadEffectAff)(U.randomInt(0)(5e4)))(function(ft){var vt=xe.evalGen(xe.elements(W.fromMaybe(d.singleton(nt.pluck0))(d.fromArray(ne.values(ne.fromHomogeneous()(nt))))))({newSeed:ee.mkSeed(ft),size:4});return N.liftEffect(y.monadEffectAff)(function(){var dt=_.traverse(_.traversableArray)(S.applicativeEffect)(function(Dt){return function(){var ve=U.random(),Ve=U.random();return{x:ve,y:Ve}}})(s.range(0)(127))(),xt=je.run2_(st(vt)(tt))(),ht=X.subscribe(et)(function(Dt){return function(){var ve=De.read(tt)();return x.for_(S.applicativeEffect)(x.foldableMaybe)(ve)(function(Ve){return function(){var bt=Ie.getByteFrequencyData(Ve)(),gt=b.map(S.functorEffect)(function(){var At=s.zip(dt),wt=b.map(b.functorArray)(function(yt){return function(Ct){return Ct/255}(a.toNumber(yt))});return function(yt){return At(wt(yt))}}())(h.toArray(h.typedArrayUint8)(bt))();return Ye(We.canvas(gt))(),f.unit}})()}})(),pt=i.applySecond(S.applyEffect)(xt)(ht);return Ye(Be(pt))(),pt})})}))();return ze(function(){return Ye(Re)(),y.launchAff_(Oe.raceSelf(it))()})(),f.unit}}})(Ze.value0))))})]))([B.text(X.eventIsEvent)(x.oneOf(x.foldableArray)(X.plusEvent)([b.map(X.functorEvent)(D.const("Turn off"))(lt),b.map(X.functorEvent)(D.const("Turn on"))(ct),b.map(X.functorEvent)(D.const("Loading..."))(mt)]))])])}})}))})}}};n.introEx=ut})(C);(function(e){"use strict";e["WAGS.Example.Docs.Intro"]=e["WAGS.Example.Docs.Intro"]||{};var n=e["WAGS.Example.Docs.Intro"],t=e["Control.Apply"],r=e["Deku.Pursx"],i=e.Effect,o=e["FRP.Event"],l=e["Type.Proxy"],c=e["WAGS.Example.Docs.Intro.IntroEx"],v=e["WAGS.Example.Docs.Types"],s=e["WAGS.Example.Docs.Util"],d=l.Proxy.value,h=function(p){return function(m){return function(x){return function(D){var b=s.ccassp(p)(x);return r.makePursx({reflectSymbol:function(){return`<div>
  <h1>Wags</h1>

  <h3>A web-audio framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-wags">Wags</a>.</p>

  <p>Wags is a web-audio framework designed for interactive media and games. Events like mouse clicks, MIDI notes and tweening frames are streamed to an audio rendering engine and, in response to these events, sound happens.</p>

  <h2>Why?</h2>

  <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a> is an amazing piece of technology. It is clear, concise, straightforward and ergonomic. So why build a framework on top of it?</p>

  <p>As audio projects become more and more ambitious, a need emerges for powerful abstractions to handle browser events and scheduling. Wags aims to tackle this problem through a small set of <a href="https://en.wikipedia.org/wiki/Functional_reactive_programming">FRP</a>-based abstractions. In doing so, it aims to be concise, expressive, and as fast as manually-optimized hand-written JavaScript.</p>

  <h2>How does it sound?</h2>

  <p>Here's a small example in Wags that, when you turn it on, emits a single sound and then uses feedback loops to create long tail. You can use the slider to change the properties of the tail in real time.</p>

  ~ex~

  <p>By the end of this documentation, you'll know all of the concepts you need to create interactive audio like the example above.</p>

  <p>If you'd like to use this documentation as a springboard for your own work, it can be found <a href="https://github.com/mikesol/purescript-wags/tree/main/examples/docs">here</a>.</p>

  <p>And now, without further ado, let's write a small <a ~next~ style="cursor:pointer;">hello world \xE0 la wags</a>!</p>
</div>`}})()()(r.pursxToElementConsElt()(r.pursxToElementConsAttr()(r.pursxToElementNil(o.plusEvent))({reflectSymbol:function(){return"next"}}))({reflectSymbol:function(){return"ex"}}))(o.eventIsEvent)(d)({next:s.mkNext(o.altEvent)(o.eventIsEvent)(D)(t.applySecond(i.applyEffect)(m(v.HelloWorld.value))(s.scrollToTop)),ex:r.nut(c.introEx(b)(m)(D))})}}}};n.intro=h})(C);(function(e){"use strict";e["WAGS.Example.Docs.MultiChannel"]=e["WAGS.Example.Docs.MultiChannel"]||{};var n=e["WAGS.Example.Docs.MultiChannel"],t=e["Control.Apply"],r=e["Data.Function"],i=e["Deku.Attribute"],o=e["Deku.DOM.Attr.OnClick"],l=e["Deku.Pursx"],c=e.Effect,v=e["FRP.Event"],s=e["FRP.Event.Class"],d=e["Type.Proxy"],h=e["WAGS.Example.Docs.Types"],p=e["WAGS.Example.Docs.Util"],m=d.Proxy.value,x=function(D){return function(b){return function(g){return function(E){return l.makePursx({reflectSymbol:function(){return`<div>
  <h1>Merge and split</h1>

  <h3>Inputs and outputs abound!</h3>
  <p>
    Web audio allows you to merge and split arbitrary audio. This is essential when you're working with complex audio setups like 5.1 surround sound or novel headphones used in some gaming setups. Wags allows you to both split and merge arbitrary signals using Web Audio's native merger and splitter nodes.
  </p>

  <h2>Merging</h2>

  <p>Merging audio in wags looks like any node that takes multiple inputs, but instead of accepting something of type <code>AudioInput</code>, it accepts a <i>vector of audio inputs</i>.</p>

  <h2>Splitting</h2>

  <p>Splitting is the inverse operation of merging: it takes a single audio node and splits it into its separate channels. In doing so, it resembles <code>fan</code>, but instead of fanning the audio, it splits it into mono-channel audio.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to merge and split audio. In the next section, we'll look at how to work with <a ~next~ style="cursor:pointer;">custom audio worklets</a>.</p>
</div>`}})()()(l.pursxToElementConsAttr()(l.pursxToElementNil(v.plusEvent))({reflectSymbol:function(){return"next"}}))(v.eventIsEvent)(m)({next:s.bang(v.eventIsEvent)(i.attr(o.attrOnClickCb)(o.OnClick.value)(i.cb(r.const(t.applySecond(c.applyEffect)(b(h.AudioWorklets.value))(p.scrollToTop)))))})}}}};n.multiChannel=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.Portals"]=e["WAGS.Example.Docs.Portals"]||{};var n=e["WAGS.Example.Docs.Portals"],t=e["Control.Apply"],r=e["Data.Function"],i=e["Deku.Attribute"],o=e["Deku.DOM.Attr.OnClick"],l=e["Deku.Pursx"],c=e.Effect,v=e["FRP.Event"],s=e["FRP.Event.Class"],d=e["Type.Proxy"],h=e["WAGS.Example.Docs.Types"],p=e["WAGS.Example.Docs.Util"],m=d.Proxy.value,x=function(D){return function(b){return function(g){return function(E){return l.makePursx({reflectSymbol:function(){return`<div>
  <h1>Tumult</h1>

  <h2>The unknown unknowns of web audio</h2>
  <p>
    As we saw in the last section on subgraphs, sometimes, you simply don't know how your audio will evolve. For example, if we are building a live coding environment and create a space where someone can basically do <i>anything</i>, working with anonymous audio nodes will not cut it. For example, imagine that they have two relatively unconnected parts of the audio graph and want to start creating cross-connections. With subgraphs, we can't pick apart the graph and say "take node X and connect it to node Y" as nodes don't have names.
  </p>

  <p>
    Tumult solves this problem. It is an entirely separate rendering engine from the one we've seen before that works via <i>diffing</i> two audio graphs and adjusting the current graph based on the diff. The biggest difference is that tumult <i>requires</i> you to give a name to each audio unit. Otherwise, the engine won't know what node corresponds to what name.
  </p>

  <p>
    For you veteran coders and audio-ers, you may bristle at the word <i>diff</i>. After all, diffing is expensive, and we are working in resource constrained environments where timing is of the essence. Fear not! Tumult uses PureScript <code>Set</code>-s to do blazingly fast diffs. That said, tumult is the slowest part of wags (meaning it is just blazingly fast instead of obscenely and indecently fast), so only use it where you can afford a performmance hit.
  </p>

  <h2>Hello tumult</h2>

  <h2>Stability in tumult</h2>

  <p>While tumult will run a diff every time its event is triggered, if you don't tear down a node, its nodes will merrily putter along with whatever events you send them. This means that you can trigger tumult events <i>only</i> when you need to change the shape of the graph.</p>

  <h2>Feeling lucky</h2>

  <p>So far, we have only seen the <code>DiffMe</code> instruction sent to tumult. There is another instruction you can send called <code>FeelingLucky</code>. <code>FeelingLucky</code> will attempt to perform its instruction and be a no-op if it is incoherent with respect to the graph. Careful with this, though! <code>DiffMe</code> guarantees that whatever you send to tumult will be what's rendered from your loudspeaker. Too many <code>FeelingLucky</code>-s, on the other hand, can lead to bugs where you're not quite sure anymore <i>what</i> is playing. That said, <code>FeelingLucky</code> is grotesquely fast, especially for larger graphs. So if it makes sense to use it, use it!</p>

  <h2>Next steps</h2>
  <p>In this section, we learned how to use tumult to create truly dynamic audio graphs that allow you to fine-tune the speed-versus-dynamism tradeoff in various ways.</p>
  <p>In the next section, we'll look at how to create audio graphs via an <a ~next~ style="cursor:pointer;">imperative API that more closely resembles Web Audio while providing additional type-safety benefits</a>.</p>
</div>`}})()()(l.pursxToElementConsAttr()(l.pursxToElementNil(v.plusEvent))({reflectSymbol:function(){return"next"}}))(v.eventIsEvent)(m)({next:s.bang(v.eventIsEvent)(i.attr(o.attrOnClickCb)(o.OnClick.value)(i.cb(r.const(t.applySecond(c.applyEffect)(b(h.Imperative.value))(p.scrollToTop)))))})}}}};n.portals=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.Pursx1"]=e["WAGS.Example.Docs.Pursx1"]||{};var n=e["WAGS.Example.Docs.Pursx1"],t=e["Control.Apply"],r=e["Data.Function"],i=e["Deku.Attribute"],o=e["Deku.DOM.Attr.OnClick"],l=e["Deku.Pursx"],c=e.Effect,v=e["FRP.Event"],s=e["FRP.Event.Class"],d=e["Type.Proxy"],h=e["WAGS.Example.Docs.Types"],p=e["WAGS.Example.Docs.Util"],m=d.Proxy.value,x=function(D){return function(b){return function(g){return function(E){return l.makePursx({reflectSymbol:function(){return`<div>
  <h1>Audio Worklets</h1>

  <h2>Supercharging our audio experiences</h2>

  <p>The Web Audio lets you do basically anything, but when anything isn't enough, there are custom Audio Worklets. </p>

  <p>Custom audio worklets come in a few shapes an sizes:</p>

  <ul>
    <li>You can <a href="https://developer.chrome.com/blog/audio-worklet/">write your own in JavaScript</a>. While this is ok for small PoCs, it will get really slow really quick.</li>
    <li>You can compile your favorite C/C++/Rust audio processors to <a href="https://developer.chrome.com/blog/audio-worklet-design-pattern/#using-audio-worklet-with-webassembly">web assembly</a>. The helpful folks at Google have created many examples that do exactly this, and you can pilfer them for fun and profit.</li>
    <li>My go-to solution is Faust. <a href="https://faust.grame.fr/">Faust</a> is the greatest audio project on Earth, and let's you build very performant audio processors with an expressive and concise syntax. Faust's <a href="https://webaudioconf.com/posts/2017_EA_60/">Web Audio integration</a> is a one-liner from the command line.</li>
  </ul>

  <p>In this example, we'll use Faust to create a three custom audio units and wire them together using Wags. The units are:</p>

  <ul>
    <li>A wicked sawtooth synth.</li>
    <li>A kickin' comb filter.</li>
    <li>Freeverb, the free-software-world's favorite reverb!</li>
  </ul>

  <h2>Faust</h2>

  <p>Here are our three faust examples:</p>

  <h3>Sawtooth</h3>

  <h3>Comb filter</h3>

  <h3>Freeverb</h3>

  <h3>Compilation</h3>

  We can compile each example using the following commands. Each command creates a self-contained JavaScript file, so all we need to do is link to it in wags-land.

  <pre><code>placeholder</code></pre>

  <h2>Wags</h2>

  <p>Wags provides a type-safe interface for declaring the API of Audio Worklets. While it's your job to make sure the API is in fact the actual API of the worklet, assuming this is correct, wags will enforce it for you. Let's see how in the following example. Here's the code:</p>

  <pre><code>placeholder</code></pre>

  <p>And here's the result:</p>

  <blockquote>placeholder</blockquote>

  <p>You can try it yourself by <a>following this trypurescript link.</a></p>

  <h3>The API contract</h3>

  <p>The <code>InitializeAudioWorklet</code> API contract is defined like so:</p>

  <pre><code>InitializeAudioWorkletNode
  { name :: Proxy name
  , numberOfInputs :: numberOfInputs
  , numberOfOutputs :: numberOfOutputs
  , outputChannelCount :: outputChannelCount
  , parameterData :: { | parameterData }
  , processorOptions :: { | processorOptions }
  }</code></pre>

  <p>And here is how the APIs parameters are used:</p>

  <table>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
    <tr>
      <td><code>name</code></td>
      <td>The name of the worklet as defined in the JS output. When in doubt, check the JS produced by faust!</td>
    </tr>
    <tr>
      <td><code>numerOfInputs</code></td>
      <td>How many inputs does the node take? Note that this is <i>not</i> the number of channels, but rather the number of distinct inputs, like in a merger node.</td>
    </tr>
    <tr>
      <td><code>numerOfOutputs</code></td>
      <td>How many outputs does the node produce? Note that this is <i>not</i> the number of channels, but rather the number of distinct outputs, like in a splitter node.</td>
    </tr>
    <tr>
      <td><code>outputChannelCount</code></td>
      <td>How many channels are in each output? This is defined using a tuple of type-level numbers.</td>
    </tr>
    <tr>
      <td><code>parameterData</code></td>
      <td>Initial parameters for the audio node. This will also define what parameters can be sent to it via events (the record gets flipped to a <a href="https://github.com/natefaubion/purescript-variant"><code>Variant</code></a> when it is an event).</td>
    </tr>
  </table>

  <h2>Next steps</h2>
  <p>In this section, we created three audio worklet nodes using Faust and used them in the Web Audio API via wags. There is active work going on to bundle all this into a single toolchain so that Faust can be written directly in PureScript and automatically read as an Audio Worklet by wags. Until that happens, though, this is a great solution: just make sure to get the parameter names right across the language barrier! No amonut of type-safety can save you there \u{1F605}</p>
  <p>In the next section, we'll look at how to create <a ~next~ style="cursor:pointer;">mutable state in a wags graph</a>.</p>
</div>`}})()()(l.pursxToElementConsAttr()(l.pursxToElementNil(v.plusEvent))({reflectSymbol:function(){return"next"}}))(v.eventIsEvent)(m)({next:s.bang(v.eventIsEvent)(i.attr(o.attrOnClickCb)(o.OnClick.value)(i.cb(r.const(t.applySecond(c.applyEffect)(b(h.Events.value))(p.scrollToTop)))))})}}}};n.pursx1=x})(C);(function(e){"use strict";e["WAGS.Example.Docs.Pursx2"]=e["WAGS.Example.Docs.Pursx2"]||{};var n=e["WAGS.Example.Docs.Pursx2"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=i.Proxy.value,l=function(c){return function(v){return function(s){return function(d){return t["makePursx'"]({reflectSymbol:function(){return`<div>
  <h1>Imperative API</h1>

  <h2>Like JavaScript, but PureScript</h2>
  <p>
    If you're coming from the JavaScript or TypeScript world, or if you're a fan of monadic <code>do</code> notation, you may enjoy building things step-by-step rather than constructing large declarative structures. If you're that sort of person, this section is for you!
  </p>

  <h2>Parting shot</h2>
  <p>Thanks for checking out wags! We want it to be the most ergonomimc, expressive, and performant Web Audio API on your side of the Mississippi. It certainly is for me, and as I'm in Finland, I'm on <i>both sides</i> of the Mississippi, so you can't beat that! If you have any questions, comments, concerns or would just like to say "hi!", please check out the <a href="https://github.com/mikesol/purescript-wags">Wags GitHub Repo</a> or the <a href="https://purescript.org/chat">PureScript Discord's music channel</a>. Happy wagging!</p>
</div>`}})({reflectSymbol:function(){return"~"}})()()(t.pursxToElementNil(r.plusEvent))(r.eventIsEvent)(i.Proxy.value)(o)({})}}}};n.pursx2=l})(C);(function(e){"use strict";e["WAGS.Example.Docs.Subgraph.SliderEx"]=e["WAGS.Example.Docs.Subgraph.SliderEx"]||{};var n=e["WAGS.Example.Docs.Subgraph.SliderEx"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Apply"],o=e["Control.Bind"],l=e.ConvertableOptions,c=e["Data.Exists"],v=e["Data.Filterable"],s=e["Data.Foldable"],d=e["Data.Function"],h=e["Data.Functor"],p=e["Data.Hashable"],m=e["Data.Tuple"],x=e["Data.Unit"],D=e["Data.Variant"],b=e["Deku.Attribute"],g=e["Deku.Control"],E=e["Deku.DOM.Attr.Max"],k=e["Deku.DOM.Attr.Min"],W=e["Deku.DOM.Attr.OnClick"],G=e["Deku.DOM.Attr.OnInput"],_=e["Deku.DOM.Attr.Step"],u=e["Deku.DOM.Attr.Value"],a=e["Deku.DOM.Attr.Xtype"],f=e["Deku.DOM.Elt.Button"],O=e["Deku.DOM.Elt.Div"],R=e["Deku.DOM.Elt.Input"],B=e["Deku.Pursx"],L=e["Deku.Subgraph"],F=e.Effect,$=e["Effect.Aff"],Z=e["Effect.Class"],H=e["Effect.Random"],V=e["FRP.Behavior"],J=e["FRP.Event"],I=e["FRP.Event.Class"],A=e["FRP.Event.Time"],q=e["Type.Proxy"],j=e["WAGS.Common"],re=e["WAGS.Control"],M=e["WAGS.Core"],T=e["WAGS.Example.Docs.Util"],Q=e["WAGS.Interpret"],K=e["WAGS.Parameter"],te=e["WAGS.Run"],S=e["WAGS.Variant"],y=S.prjs_()(S.prjsCons({reflectSymbol:function(){return"slider"}})(S.prjsCons({reflectSymbol:function(){return"startStop"}})(S.prjsNilRow)()()()())()()()())(q.Proxy.value),N=S.injs_()(S.injsCons({reflectSymbol:function(){return"slider"}})(S.injsCons({reflectSymbol:function(){return"startStop"}})(S.injsNilRow)()()()())()()()())(q.Proxy.value),U=`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Exists (mkExists)
import Data.Foldable (oneOf, oneOfMap)
import Data.Hashable (class Hashable)
import Data.Newtype (class Newtype, unwrap)
import Data.Tuple (fst)
import Data.Tuple.Nested ((/\\))
import Data.Variant (Variant, match)
import Deku.Attribute (cb, (:=))
import Deku.Control (text, text_)
import Deku.Core (SubgraphF(..))
import Deku.DOM as D
import Deku.Subgraph ((@@))
import Deku.Subgraph as Sg
import Deku.Toplevel ((\u{1F686}))
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import Effect.Random as Random
import FRP.Behavior (behavior, sampleBy)
import FRP.Event (fold, makeEvent, subscribe)
import FRP.Event.Class (bang, filterMap, keepLatest)
import FRP.Event.Time (delay)
import Type.Proxy (Proxy(..))
import WAGS.Control (playBuf)
import WAGS.Core (mkSubgraph, subgraph)
import WAGS.Core as C
import WAGS.Interpret (ctxAff, decodeAudioDataFromUri)
import WAGS.Parameter (bangOn)
import WAGS.Run (run2_)
import WAGS.Variant (injs_, prjs_)
import WAGS.WebAPI (BrowserAudioBuffer)

type StartStop = Variant (start :: Unit, stop :: Effect Unit)
ssi = injs_ (Proxy :: _ StartStop)
start = uii.startStop (ssi.start unit)
stop r = uii.startStop (ssi.stop r)
ssp = prjs_ (Proxy :: _ StartStop)
type UIEvents = Variant (startStop :: StartStop, slider :: Unit)
uii = injs_ (Proxy :: _ UIEvents)
uip = prjs_ (Proxy :: _ UIEvents)
type State' = Variant (loading :: Unit, loaded :: BrowserAudioBuffer)

derive instance Newtype State _
newtype State = State State'
sti = injs_ (Proxy :: _ State')
loading = State $ sti.loading unit
stp = prjs_ (Proxy :: _ State')

derive instance Eq State

instance Hashable State where
  hash (State v) = match { loading: \\_ -> 0, loaded: \\_ -> 1 } v

bell =
  "https://freesound.org/data/previews/339/339810_5121236-lq.mp3"

random = behavior \\e ->
  makeEvent \\k -> subscribe e \\f ->
    Random.random >>= k <<< f

main :: Effect Unit
main = do
  { push } <- loading \u{1F686} go
  launchAff_ $ ctxAff
    \\ctx -> decodeAudioDataFromUri ctx bell >>= liftEffect
      <<< push
      <<< State
      <<< sti.loaded
  where
  go _ ev =
    ( keepLatest $
        ( \\i@(State i') -> match
            { loading: \\_ -> bang (i /\\ Sg.Insert)
            , loaded: \\_ -> bang (loading /\\ Sg.Remove)
                <|> bang (i /\\ Sg.Insert)
            }
            i'
        ) <$> ev
    ) @@ scene
    where
    scene = unwrap >>> match
      { loaded: \\buffer -> mkExists $ SubgraphF \\push event -> do
          let
            ss = bang (ssi.start unit) <|> filterMap uip.startStop event
            sl = sampleBy (/\\) random
              $ fold (\\_ b -> b + 1) (filterMap uip.slider event) 0
            music = run2_
              [ subgraph
                  ( keepLatest $ map
                      (\\i ->
                          oneOf
                            [ bang $ i /\\ C.Insert
                            , delay 5000 $ bang $ i /\\ C.Remove
                            ]
                      )
                      sl
                  )
                  ( \\i -> mkSubgraph
                      ( playBuf
                          { buffer: buffer, playbackRate: 0.7 + (fst i) * 2.0 }
                          bangOn
                      )
                  )
              ]
          D.div_
            [ D.div_
                [ text_ "Slide me!"
                , D.input
                    ( oneOfMap bang
                        [ D.Xtype := "range"
                        , D.Min := "0"
                        , D.Max := "100"
                        , D.Step := "1"
                        , D.Value := "50"
                        , D.OnInput := cb (const (push $ uii.slider unit))
                        ]
                    )
                    []
                ]
            , D.button
                ( ss <#>
                    \\e -> D.OnClick := cb
                      ( const $ e # match
                          { stop: \\u -> u *>
                              push start
                          , start: \\_ -> do
                              r <- music
                              push (stop r)
                          }
                      )
                )
                [ text $ ss <#> match
                    { stop: \\_ -> "Turn off"
                    , start: \\_ -> "Turn on"
                    }
                ]
            ]
      , loading: \\_ -> mkExists
          $ SubgraphF \\_ _ -> D.div_ [ text_ "Loading..." ]
      }
`,De=S.prjs_()(S.prjsCons({reflectSymbol:function(){return"loading"}})(S.prjsCons({reflectSymbol:function(){return"start"}})(S.prjsCons({reflectSymbol:function(){return"stop"}})(S.prjsNilRow)()()()())()()()())()()()())(q.Proxy.value),Ee=S.injs_()(S.injsCons({reflectSymbol:function(){return"loading"}})(S.injsCons({reflectSymbol:function(){return"start"}})(S.injsCons({reflectSymbol:function(){return"stop"}})(S.injsNilRow)()()()())()()()())()()()())(q.Proxy.value),X=N.startStop(Ee.start(x.unit)),we=function(xe){return N.startStop(Ee.stop(xe))},ge=V.behavior(function(xe){return J.makeEvent(function(fe){return J.subscribe(xe)(function(le){return function(){var _e=H.random();return fe(le(_e))()}})})}),ne=q.Proxy.value,se=N.startStop(Ee.loading(x.unit)),Ae="https://freesound.org/data/previews/339/339810_5121236-lq.mp3",ee=function(xe){return function(fe){return function(le){return B["makePursx'"]({reflectSymbol:function(){return`<section>
  <h2>Hello subgraph</h2>

  <p>To make a subgraph, you need two things:</p>

  <ol>
    <li>An index type. This type needs to implement the <code>Hashable</code> typeclass. You can use this to customize whatever the resulting subgraph will be.</li>
    <li>The subgraph itself, which is a single audio node that must be prefaced by <code>mkSubgraph</code>.</li>
  </ol>

  <p>Here's a simple subgraph that is connected to a slider. As you slide the slider, new nodes are provisioned. Each one has a pseudo-random pitch.</p>

  <pre><code>@txt@</code></pre>
  @ex1@

  <p>Note how, in this example, we use a delay to turn off audio nodes. One nice thing about subgraphs is that, when they are removed, their nodes are turned off <i>and</i> their events are cancelled, which means that there will never be a case where a subgraph keeps playing or consuming events after it has been removed.</p>

</section>
`}})({reflectSymbol:function(){return"@"}})()()(B.pursxToElementConsElt()(B.pursxToElementConsElt()(B.pursxToElementNil(J.plusEvent))({reflectSymbol:function(){return"txt"}}))({reflectSymbol:function(){return"ex1"}}))(J.eventIsEvent)(q.Proxy.value)(ne)({txt:B.nut(g.text_(J.eventIsEvent)(U)),ex1:B.nut(L.subgraph(p.hashableUnit)(J.eventIsEvent)(I.bang(J.eventIsEvent)(new m.Tuple(x.unit,L.Insert.value)))(function(he){return c.mkExists(function(_e){return function(Oe){var Ie=t.alt(J.altEvent)(I.bang(J.eventIsEvent)(Ee.start(x.unit)))(v.filterMap(J.filterableEvent)(y.startStop)(Oe)),Ge=v.filterMap(J.filterableEvent)(De.start)(Ie),Te=v.filterMap(J.filterableEvent)(De.stop)(Ie),Me=V.sampleBy(J.eventIsEvent)(m.Tuple.create)(ge)(I.fold(J.eventIsEvent)(function(ke){return function(me){return me+1|0}})(v.filterMap(J.filterableEvent)(y.slider)(Oe))(0)),je=function(ke){return[M.subgraph(J.eventIsEvent)(p.hashableTuple(p.hashableNumber)(p.hashableInt))(I.keepLatest(J.eventIsEvent)(h.map(J.functorEvent)(function(me){return s.oneOf(s.foldableArray)(J.plusEvent)([I.bang(J.eventIsEvent)(new m.Tuple(me,M.Insert.value)),A.delay(5e3)(I.bang(J.eventIsEvent)(new m.Tuple(me,M.Remove.value)))])})(Me)))(function(me){return M.mkSubgraph(re.playBuf(J.eventIsEvent)(j.initialPlayBufRecord(l.convertOptionsWithDefaultsRecord(l.convertOptionsRecord()(l.convertRecordOptionsCons(l.convertRecordOptionsCons(l.convertRecordOptionsNil)(j.convertOptionPlayBufOptio3)()()()({reflectSymbol:function(){return"playbackRate"}}))(j.convertOptionPlayBufOptio)()()()({reflectSymbol:function(){return"buffer"}})))(l.defaultsRecord()())))({buffer:ke,playbackRate:.7+m.fst(me)*2})(K.bangOn(J.eventIsEvent)()))})]};return O.div_(J.eventIsEvent)([O.div_(J.eventIsEvent)([g.text_(J.eventIsEvent)("Slide me!"),R.input(J.eventIsEvent)(s.oneOfMap(s.foldableArray)(J.plusEvent)(I.bang(J.eventIsEvent))([b.attr(a.attrInput_XtypeString)(a.Xtype.value)("range"),b.attr(k.attrInput_MinString)(k.Min.value)("0"),b.attr(E.attrInput_MaxString)(E.Max.value)("100"),b.attr(_.attrInput_StepString)(_.Step.value)("1"),b.attr(u.attrInput_ValueString)(u.Value.value)("50"),b.attr(G.attrOnInputCb)(G.OnInput.value)(b.cb(d.const(_e(N.slider(x.unit)))))]))([])]),f.button(J.eventIsEvent)(h.mapFlipped(J.functorEvent)(I.biSampleOn(J.eventIsEvent)(t.alt(J.altEvent)(I.bang(J.eventIsEvent)(r.pure(F.applicativeEffect)(x.unit)))(h.map(J.functorEvent)(function(ke){return ke.value0})(le)))(h.map(J.functorEvent)(m.Tuple.create)(Ie)))(function(ke){return b.attr(W.attrOnClickCb)(W.OnClick.value)(b.cb(d.const(D.match()()()({loading:function(me){return r.pure(F.applicativeEffect)(x.unit)},stop:function(me){return i.applySecond(F.applyEffect)(i.applySecond(F.applyEffect)(me)(xe(r.pure(F.applicativeEffect)(x.unit))))(_e(X))},start:function(me){return function(){ke.value1(),_e(se)();var Fe=$.launchAff(o.bind($.bindAff)(Q.ctxAff(function(We){return Q.decodeAudioDataFromUri(We)(Ae)}))(function(We){return Z.liftEffect($.monadEffectAff)(function(){var Ne=te.run2_(je(We))();return _e(we(Ne))(),Ne})}))();return xe(function(){return _e(X)(),$.launchAff_(T.raceSelf(Fe))()})(),x.unit}}})(ke.value0))))}))([g.text(J.eventIsEvent)(s.oneOf(s.foldableArray)(J.plusEvent)([h.map(J.functorEvent)(d.const("Turn off"))(Te),h.map(J.functorEvent)(d.const("Turn on"))(Ge)]))])])}})}))})}}};n.sgSliderEx=ee})(C);(function(e){"use strict";e["WAGS.Example.Docs.Subgraphs"]=e["WAGS.Example.Docs.Subgraphs"]||{};var n=e["WAGS.Example.Docs.Subgraphs"],t=e["Deku.Pursx"],r=e["FRP.Event"],i=e["Type.Proxy"],o=e["WAGS.Common"],l=e["WAGS.Control"],c=e["WAGS.Example.Docs.Subgraph.SliderEx"],v=e["WAGS.Example.Docs.Util"],s=e["WAGS.Interpret"],d=e["WAGS.Parameter"],h=e["WAGS.Run"],p=i.Proxy.value,m=function(x){return function(D){return function(b){return function(g){var E=v.ccassp(x)(b);return t.makePursx({reflectSymbol:function(){return`<div>
  <h1>Subgraphs</h1>

  <h2>Making audio even more dynamic</h2>
  <p>
    When we're creating video games or other types of interactive work, it's rare that we'll be able to anticipate the exact web audio graph we'll need for an entire session. As an example, imagine that in a video game a certain sound effects accompany various characters, and those characters come in and out based on your progress through the game. One way to solve this would be to anticipate the maximum number of characters that are present in a game and do a round-robin assignment of nodes in the audio graph as characters enter and leave your game. But sometimes that's not ergonomic, and in certain cases its downright inefficient. Another downside is that it does not allow for specialization of the web audio graph based on new data, like for example a character to play a custom sound once you've earned a certain badge.
  </p>

  <p>
    Subgraphs fix this problem. They provide a concise mechansim to dynamically insert audio graphs based on events.
  </p>

  ~suby~

  <h2>Go forth and be brilliant!</h2>
  <p>Thus ends the first version of the wags documentation. Applause is always welcome ~appl~! Alas, some features remain undocumented, like audio worklets, an imperative API, and an experimental rendering engine called <code>tumult</code> that allows for efficient "VDOM"-esque audio unit diffing in portions of a graph. At some point I hope to document all of these, but hopefully this should be enough to get anyone interested up and running. If you need to use any of those features before I document them, ping me on the <a href="https://purescript.org/chat">PureScript Discord</a>. Otherwise, happy music making with Wags!</p>
</div>`}})()()(t.pursxToElementConsElt()(t.pursxToElementConsElt()(t.pursxToElementNil(r.plusEvent))({reflectSymbol:function(){return"suby"}}))({reflectSymbol:function(){return"appl"}}))(r.eventIsEvent)(p)({appl:t.nut(v.audioWrapperSpan("\u{1F44F}")(g)(E)(s.ctxAff(function(k){return s.decodeAudioDataFromUri(k)("https://freesound.org/data/previews/277/277021_1402315-lq.mp3")}))(function(k){return h.run2_([l.gain_(r.eventIsEvent)(o.initialGainNumber)(1)([l.loopBuf(r.eventIsEvent)(o.initialLoopBufBrowserAudi)(k)(d.bangOn(r.eventIsEvent)())])])})),suby:t.nut(c.sgSliderEx(E)(D)(g))})}}}};n.subgraphs=m})(C);(function(e){"use strict";e._body=function(n){return function(){return n.body}}})(C["Web.HTML.HTMLDocument"]=C["Web.HTML.HTMLDocument"]||{});(function(e){"use strict";e["Web.HTML.HTMLDocument"]=e["Web.HTML.HTMLDocument"]||{};var n=e["Web.HTML.HTMLDocument"],t=e["Web.HTML.HTMLDocument"],r=e["Data.Functor"],i=e["Data.Nullable"],o=e.Effect,l=function(){var c=r.map(o.functorEffect)(i.toMaybe);return function(v){return c(t._body(v))}}();n.body=l})(C);(function(e){"use strict";e["Web.HTML.HTMLElement"]=e["Web.HTML.HTMLElement"]||{};var n=e["Web.HTML.HTMLElement"],t=e["Unsafe.Coerce"],r=t.unsafeCoerce;n.toElement=r})(C);(function(e){"use strict";e["WAGS.Example.Docs"]=e["WAGS.Example.Docs"]||{};var n=e["WAGS.Example.Docs"],t=e["Control.Alt"],r=e["Control.Applicative"],i=e["Control.Bind"],o=e["Control.Plus"],l=e["Data.Eq"],c=e["Data.Exists"],v=e["Data.Filterable"],s=e["Data.Foldable"],d=e["Data.Function"],h=e["Data.Functor"],p=e["Data.Hashable"],m=e["Data.HeytingAlgebra"],x=e["Data.Maybe"],D=e["Data.Monoid"],b=e["Data.Newtype"],g=e["Data.Tuple"],E=e["Data.Unit"],k=e["Deku.Attribute"],W=e["Deku.Control"],G=e["Deku.DOM.Attr.OnClick"],_=e["Deku.DOM.Attr.Style"],u=e["Deku.DOM.Elt.A"],a=e["Deku.DOM.Elt.Div"],f=e["Deku.DOM.Elt.Span"],O=e["Deku.Interpret"],R=e["Deku.Subgraph"],B=e.Effect,L=e["FRP.Event"],F=e["FRP.Event.Class"],$=e["WAGS.Example.Docs.Component"],Z=e["WAGS.Example.Docs.Effects"],H=e["WAGS.Example.Docs.Events"],V=e["WAGS.Example.Docs.FixFan"],J=e["WAGS.Example.Docs.HelloWorld"],I=e["WAGS.Example.Docs.Intro"],A=e["WAGS.Example.Docs.MultiChannel"],q=e["WAGS.Example.Docs.Portals"],j=e["WAGS.Example.Docs.Pursx1"],re=e["WAGS.Example.Docs.Pursx2"],M=e["WAGS.Example.Docs.Subgraphs"],T=e["WAGS.Example.Docs.Types"],Q=e["Web.HTML"],K=e["Web.HTML.HTMLDocument"],te=e["Web.HTML.HTMLElement"],S=e["Web.HTML.Window"],y=function(ge){return ge},N={Coercible0:function(){}},U={eq:d.on(l.eq(T.eqPage))(function(){var ge=b.unwrap();return function(ne){return function(se){return se.page}(ge(ne))}}())},De={hash:function(){var ge=p.hash(T.hashablePage),ne=b.unwrap();return function(se){return ge(function(Ae){return Ae.page}(ne(se)))}}(),Eq0:function(){return U}},Ee=function(ge){return{page:ge,setPage:D.mempty(D.monoidFn(B.monoidEffect(D.monoidUnit))),setCancellation:D.mempty(D.monoidFn(B.monoidEffect(D.monoidUnit)))}},X=function(ge){return function(ne){var se=function(ee){var xe=function(fe){if(fe instanceof T.Intro)return c.mkExists(I.intro(ee.setCancellation)(ee.setPage));if(fe instanceof T.HelloWorld)return c.mkExists(J.helloWorld(ee.setCancellation)(ee.setPage));if(fe instanceof T.FixFan)return c.mkExists(V.fixFan(ee.setCancellation)(ee.setPage));if(fe instanceof T.AudioUnits)return c.mkExists($.components(ee.setCancellation)(ee.setPage));if(fe instanceof T.AudioWorklets)return c.mkExists(j.pursx1(ee.setCancellation)(ee.setPage));if(fe instanceof T.Events)return c.mkExists(H.events(ee.setCancellation)(ee.setPage));if(fe instanceof T.State)return c.mkExists(Z.effects(ee.setCancellation)(ee.setPage));if(fe instanceof T.Imperative)return c.mkExists(re.pursx2(ee.setCancellation)(ee.setPage));if(fe instanceof T.MultiChannel)return c.mkExists(A.multiChannel(ee.setCancellation)(ee.setPage));if(fe instanceof T.Subgraph)return c.mkExists(M.subgraphs(ee.setCancellation)(ee.setPage));if(fe instanceof T.Tumult)return c.mkExists(q.portals(ee.setCancellation)(ee.setPage));throw new Error("Failed pattern match at WAGS.Example.Docs (line 158, column 5 - line 158, column 74): "+[fe.constructor.name])};return xe(ee.page)},Ae=F.fold(L.eventIsEvent)(function(ee){if(ee instanceof T.ChangePage)return function(xe){return{prevPage:new x.Just(xe.curPage),curPage:ee.value0,cancel:xe.cancel,pageChange:!0}};if(ee instanceof T.SetCancelation)return function(xe){return{cancel:ee.value0,pageChange:!1,curPage:xe.curPage,prevPage:xe.prevPage}};throw new Error("Failed pattern match at WAGS.Example.Docs (line 148, column 7 - line 150, column 75): "+[ee.constructor.name])})(ne)({prevPage:x.Nothing.value,curPage:T.Intro.value,cancel:r.pure(B.applicativeEffect)(E.unit),pageChange:!0});return W.flatten(L.plusEvent)([a.div_(L.eventIsEvent)(h.map(h.functorArray)(function(ee){return f.span_(L.eventIsEvent)([u.a(L.eventIsEvent)(t.alt(L.altEvent)(s.oneOfMap(s.foldableArray)(L.plusEvent)(F.bang(L.eventIsEvent))([k.attr(G.attrOnClickCb)(G.OnClick.value)(k.cb(d.const(ge(new T.ChangePage(ee.value0))))),k.attr(_.attrA_StyleString)(_.Style.value)("cursor:pointer;")]))(h.map(L.functorEvent)(function(xe){return k.attr(G.attrOnClickCb)(G.OnClick.value)(k.cb(d.const(function(){return xe.cancel(),ge(new T.ChangePage(ee.value0))()})))})(v.filter(L.filterableEvent)(function(){var xe=m.not(m.heytingAlgebraBoolean);return function(fe){return xe(function(le){return le.pageChange}(fe))}}())(Ae))))([W.text_(L.eventIsEvent)(ee.value1.value0)]),f.span(L.eventIsEvent)(F.bang(L.eventIsEvent)(k.attr(_.attrSpan_StyleString)(_.Style.value)(function(){return ee.value1.value1?"":"display:none;"}())))([W.text_(L.eventIsEvent)(" | ")])])})([new g.Tuple(T.Intro.value,new g.Tuple("Home",!0)),new g.Tuple(T.HelloWorld.value,new g.Tuple("Hello world",!0)),new g.Tuple(T.FixFan.value,new g.Tuple("Array, fan, and fix",!0)),new g.Tuple(T.AudioUnits.value,new g.Tuple("Audio units",!0)),new g.Tuple(T.Events.value,new g.Tuple("Events",!0)),new g.Tuple(T.State.value,new g.Tuple("State",!0)),new g.Tuple(T.Subgraph.value,new g.Tuple("Subgraphs",!1))])),R.subgraph(De)(L.eventIsEvent)(F.keepLatest(L.eventIsEvent)(h.map(L.functorEvent)(function(ee){return t.alt(L.altEvent)(function(){if(ee.prevPage instanceof x.Nothing)return o.empty(L.plusEvent);if(ee.prevPage instanceof x.Just)return F.bang(L.eventIsEvent)(new g.Tuple(Ee(ee.prevPage.value0),R.Remove.value));throw new Error("Failed pattern match at WAGS.Example.Docs (line 131, column 23 - line 133, column 58): "+[ee.prevPage.constructor.name])}())(F.bang(L.eventIsEvent)(new g.Tuple({page:ee.curPage,setPage:function(xe){return ge(T.ChangePage.create(xe))},setCancellation:function(xe){return ge(T.SetCancelation.create(xe))}},R.Insert.value)))})(v.filter(L.filterableEvent)(function(ee){return ee.pageChange})(Ae))))(se)])}},we=function(){var ne=i.bind(B.bindEffect)(i.bind(B.bindEffect)(Q.window)(S.document))(K.body)();return s.for_(B.applicativeEffect)(s.foldableMaybe)(h.map(x.functorMaybe)(te.toElement)(ne))(function(se){return function(){var ee=O.makeFFIDOMSnapshot(),xe=L.create(),fe=W.deku(L.eventIsEvent)(se)(X(xe.push)(xe.event))(O.effectfulDOMInterpret);return h.void(B.functorEffect)(L.subscribe(fe)(function(le){return le(ee)}))(),xe.push(new T.ChangePage(T.Intro.value))()}})()};n.TopLevelSg=y,n.p2tl=Ee,n.scene=X,n.main=we,n.newtypeTopLevelSg_=N,n.eqTopLevelSg=U,n.hashableTopLevelSg=De})(C);C["WAGS.Example.Docs"].main();})();
